(self.webpackChunkretail_usa=self.webpackChunkretail_usa||[]).push([[6887],{6684:(Ee,K,s)=>{"use strict";s.r(K),s.d(K,{AccountsTransactionsJourneyBundleModule:()=>oi});var f=s(9808),d=s(5357),I=s(4942),N=(s(4292),s(4544)),Y=s(7120),h=s(2929),O=s(6791),e=s(5e3),_=s(538),Z=s(2908),A=s(7605),m=s(4004),l=s(9841),u=s(5698),p=s(7579),y=s(1884),v=s(2722),T=s(9300),Be=s(590),H=s(4813),B=s(1365),V=s(4782),Rt=s(727),Tt=s(8675),ht=s(4351),W=s(6129),Nt=s(4707),j=s(9646),X=s(262),J=s(9287),L=s(5460),ee=s(7555),P=s(429),Se=s(7287),vt=s(655),U=s(3075),Mt=s(9774),te=s(682),be=s(8639),Ce=s(2658),ne=s(4951),oe=s(5622),ie=s(3842),F=s(1777),Qe=s(6706),xe=s(5893),It=s(9351),k=s(7218),ce=s(520);function Ot(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"button",1),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().pick(a.uuid)}),e._UZ(1,"bb-product-item-basic-account-ui",2),e.qZA()}if(2&n){const t=i.$implicit,o=e.oxw();e.ekj("bb-quick-transfer--selected-bg",t.uuid===o.selected),e.Q6J("disabled",t.uuid===o.selectedCounterPartyAccount),e.xp6(1),e.ekj("bb-quick-transfer--disabled",t.uuid===o.selectedCounterPartyAccount),e.Q6J("highlight",null==o.config||null==o.config.uiComponentProps?null:o.config.uiComponentProps.productItemHighlight)("title",t.name)("amount",null==t?null:t.balance)("productNumber",t.number)("currency",null==t?null:t.currency)("productNumberFormat",null==o.config||null==o.config.uiComponentProps?null:o.config.uiComponentProps.accountNumberFormat)("showCurrencySymbol",!(null==o.config||null==o.config.uiComponentProps||!o.config.uiComponentProps.mapCurrency))("active",!1)}}const yt=["done"];function Ut(n,i){if(1&n&&(e.ynx(0),e.TgZ(1,"span"),e._uU(2),e.qZA(),e.BQk()),2&n){const t=i.ngIf;e.xp6(2),e.hij("",t.name,".")}}function kt(n,i){if(1&n&&(e.TgZ(0,"span",16)(1,"span"),e.SDv(2,17),e.qZA(),e._UZ(3,"bb-amount-ui",18),e.TgZ(4,"span"),e.SDv(5,19),e.qZA(),e.YNc(6,Ut,3,1,"ng-container",20),e.ALo(7,"async"),e.qZA()),2&n){const t=i.ngIf,o=e.oxw(2);e.MGl("id","payment-success-description-",o.id,""),e.xp6(3),e.Q6J("currency",t.currency)("amount",t.amount)("mapCurrency",!(null==o.config||null==o.config.uiComponentProps||!o.config.uiComponentProps.mapCurrency))("showPlusSign",!1),e.xp6(3),e.Q6J("ngIf",e.lcZ(7,6,o.toPayee$))}}function Dt(n,i){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",3)(2,"div",4)(3,"button",5),e.NdJ("click",function(){return e.CHM(t),e.oxw().restart()}),e._UZ(4,"bb-icon-ui",6),e.qZA()(),e.TgZ(5,"div",7)(6,"picture"),e._UZ(7,"source",8)(8,"img",9),e.qZA(),e._UZ(9,"bb-header-ui",10),e.YNc(10,kt,8,8,"span",11),e.ALo(11,"async"),e.qZA(),e.TgZ(12,"div",12)(13,"button",13,14),e.NdJ("click",function(){return e.CHM(t),e.oxw().restart()}),e.SDv(15,15),e.qZA()()(),e.BQk()}if(2&n){const t=e.oxw();e.xp6(1),e.bQe("aria-describedby","payment-success-img-",t.id," payment-success-title-",t.id," payment-success-description-",t.id,""),e.xp6(6),e.s9C("srcset",t.successImgNoMotion,e.LSH),e.xp6(1),e.MGl("id","payment-success-img-",t.id,""),e.s9C("srcset",t.successImg+"?"+t.timestamp,e.LSH),e.xp6(1),e.MGl("id","payment-success-title-",t.id,""),e.xp6(1),e.Q6J("ngIf",e.lcZ(11,8,t.amount$))}}function Ft(n,i){if(1&n&&(e.TgZ(0,"div",26),e._UZ(1,"bb-icon-ui",27)(2,"bb-header-ui",28),e.TgZ(3,"span",16),e.SDv(4,29),e.qZA()()),2&n){const t=i.ngIf,o=e.oxw(2);let c;e.xp6(2),e.MGl("id","payment-error-title-",o.id,""),e.Q6J("heading",null==(c=t)||null==c.error?null:c.error.message),e.xp6(1),e.MGl("id","payment-error-description-",o.id,"")}}function Bt(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",3)(1,"div",21)(2,"button",22),e.NdJ("click",function(){return e.CHM(t),e.oxw().tryAgain()}),e._UZ(3,"bb-icon-ui",6),e.qZA()(),e.YNc(4,Ft,5,3,"div",23),e.ALo(5,"async"),e.TgZ(6,"div",12)(7,"button",24,14),e.NdJ("click",function(){return e.CHM(t),e.oxw().tryAgain()}),e.SDv(9,25),e.qZA()()()}if(2&n){const t=e.oxw();e.zWS("aria-describedby","payment-error-title-",t.id," payment-error-description-",t.id,""),e.xp6(4),e.Q6J("ngIf",e.lcZ(5,3,t.paymentOrderCallState$))}}function Qt(n,i){if(1&n&&(e.TgZ(0,"div",10)(1,"label",11),e.SDv(2,12),e.qZA(),e._UZ(3,"br")(4,"bb-amount-ui",13),e.qZA()),2&n){const t=i.ngIf;e.xp6(4),e.Q6J("currency",t.currency)("amount",t.amount)("mapCurrency",!0)("showPlusSign",!1)}}function xt(n,i){if(1&n&&(e.TgZ(0,"div",14)(1,"div",15)(2,"label",16),e.SDv(3,17),e.qZA(),e.TgZ(4,"div"),e._UZ(5,"bb-product-item-basic-account-ui",18),e.qZA()()()),2&n){const t=i.ngIf,o=e.oxw(2);e.xp6(5),e.Q6J("title",t.name)("productNumber",t.number)("amount",null==t?null:t.balance)("currency",null==t?null:t.currency)("productNumberFormat",null==o.config||null==o.config.uiComponentProps?null:o.config.uiComponentProps.accountNumberFormat)("showCurrencySymbol",!(null==o.config||null==o.config.uiComponentProps||!o.config.uiComponentProps.mapCurrency))("highlight",!(null==o.config||null==o.config.uiComponentProps||!o.config.uiComponentProps.productItemHighlight))("active",!1)}}function Kt(n,i){if(1&n&&(e.TgZ(0,"div",19)(1,"div",15)(2,"label",16),e.SDv(3,20),e.qZA(),e.TgZ(4,"div"),e._UZ(5,"bb-product-item-basic-account-ui",21),e.qZA()()()),2&n){const t=i.ngIf,o=e.oxw(2);e.xp6(5),e.Q6J("title",t.name)("productNumber",t.number)("amount",null==t?null:t.balance)("currency",null==t?null:t.currency)("productNumberFormat",null==o.config||null==o.config.uiComponentProps?null:o.config.uiComponentProps.accountNumberFormat)("showCurrencySymbol",!(null==o.config||null==o.config.uiComponentProps||!o.config.uiComponentProps.mapCurrency))("highlight",null==o.config||null==o.config.uiComponentProps?null:o.config.uiComponentProps.productItemHighlight)("active",!1)}}function Jt(n,i){if(1&n&&(e.YNc(0,Qt,5,4,"div",4),e.ALo(1,"async"),e.TgZ(2,"div",5),e.YNc(3,xt,6,8,"div",6),e.ALo(4,"async"),e.TgZ(5,"div",7),e._UZ(6,"bb-icon-ui",8),e.qZA(),e.YNc(7,Kt,6,8,"div",9),e.ALo(8,"async"),e.qZA()),2&n){const t=e.oxw();e.Q6J("ngIf",e.lcZ(1,3,t.amount$)),e.xp6(3),e.Q6J("ngIf",e.lcZ(4,5,t.fromAccount$)),e.xp6(4),e.Q6J("ngIf",e.lcZ(8,7,t.toPayee$))}}function Pt(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",22)(1,"bb-load-button-ui",23),e.NdJ("click",function(){return e.CHM(t),e.oxw().handleConfirm()}),e.SDv(2,24),e.ALo(3,"async"),e.qZA(),e.TgZ(4,"button",25),e.NdJ("click",function(){return e.CHM(t),e.oxw().closeModal()}),e.ALo(5,"async"),e.TgZ(6,"span"),e.SDv(7,26),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("isLoading",e.lcZ(3,2,t.paymentOrderCallState$)===t.loadingstate.LOADING),e.xp6(3),e.Q6J("disabled",e.lcZ(5,4,t.paymentOrderCallState$)===t.loadingstate.LOADING)}}function Gt(n,i){if(1&n&&(e.TgZ(0,"span",4),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.account.name)}}function Lt(n,i){if(1&n&&(e.TgZ(0,"span",5),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.emptyLabel)}}function Yt(n,i){if(1&n&&(e.TgZ(0,"span",5),e._uU(1),e.qZA()),2&n){const t=e.oxw(3);e.uIk("id",t.id),e.xp6(1),e.hij(" ",t.requiredMessage," ")}}function Zt(n,i){if(1&n&&(e.ynx(0),e.YNc(1,Yt,2,2,"span",4),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.requiredMessage)}}function $t(n,i){if(1&n&&(e.TgZ(0,"span",5),e._uU(1),e.qZA()),2&n){const t=i.ngIf,o=e.oxw(3);e.uIk("id",o.id),e.xp6(1),e.hij(" ",t,"")}}function wt(n,i){if(1&n&&e.YNc(0,$t,2,2,"span",4),2&n){const t=e.oxw(2);e.Q6J("ngIf",t.getValidationMessage())}}function qt(n,i){if(1&n&&(e.TgZ(0,"bb-input-validation-message-ui",1),e.YNc(1,Zt,2,1,"ng-container",2),e.YNc(2,wt,1,1,"ng-template",null,3,e.W1O),e.qZA()),2&n){const t=e.MAs(3),o=e.oxw();e.Q6J("showErrors",!(null==o.control||!o.control.touched||null==o.control||!o.control.invalid))("@fadeSlideInOut",void 0),e.xp6(1),e.Q6J("ngIf",null==o.control||null==o.control.errors?null:o.control.errors.required)("ngIfElse",t)}}const Ht=["formElement"],Ke=["back"];function Wt(n,i){1&n&&e.GkF(0)}const Re=function(){return{$implicit:"md"}};function jt(n,i){if(1&n&&(e.ynx(0),e.YNc(1,Wt,1,0,"ng-container",13),e.BQk()),2&n){e.oxw(3);const t=e.MAs(11);e.xp6(1),e.Q6J("ngTemplateOutlet",t)("ngTemplateOutletContext",e.DdM(2,Re))}}function zt(n,i){1&n&&e.GkF(0)}function Vt(n,i){if(1&n&&(e.ynx(0),e.YNc(1,zt,1,0,"ng-container",14),e.BQk()),2&n){e.oxw(3);const t=e.MAs(13);e.xp6(1),e.Q6J("ngTemplateOutlet",t)}}function Xt(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"bb-quick-transfer-accounts-ui",17),e.NdJ("select",function(c){return e.CHM(t),e.oxw(6).handleSelectFrom(c)}),e.ALo(2,"async"),e.ALo(3,"async"),e.qZA()()}if(2&n){const t=i.ngIf,o=e.oxw(6);let c;e.xp6(1),e.Q6J("arrangements",t)("selected",e.lcZ(2,4,o.fromAccountId$))("selectedCounterPartyAccount",null==(c=e.lcZ(3,6,o.selectedToPayee$))?null:c.uuid)("config",o.config)}}function en(n,i){if(1&n&&(e.ynx(0),e.YNc(1,Xt,4,8,"div",7),e.ALo(2,"async"),e.BQk()),2&n){const t=e.oxw(5);e.xp6(1),e.Q6J("ngIf",e.lcZ(2,1,t.accounts$))}}function tn(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",18),e._UZ(1,"bb-icon-ui",19),e.TgZ(2,"div",20)(3,"span",21),e.SDv(4,22),e.qZA(),e._UZ(5,"br"),e.TgZ(6,"button",23),e.NdJ("click",function(){return e.CHM(t),e.oxw(5).getAccounts()}),e.SDv(7,24),e.qZA()()()}}function nn(n,i){if(1&n&&(e.ynx(0),e.YNc(1,en,3,3,"ng-container",7),e.YNc(2,tn,8,0,"div",16),e.BQk()),2&n){const t=e.oxw(3).ngIf,o=e.oxw();e.xp6(1),e.Q6J("ngIf",t.internal===o.loadingstate.LOADED),e.xp6(1),e.Q6J("ngIf",t.internal.error)}}function on(n,i){if(1&n&&(e.TgZ(0,"h3",26),e._UZ(1,"bb-icon-ui",27),e.TgZ(2,"span",28),e.SDv(3,29),e.qZA()()),2&n){const t=i.ngIf;e.xp6(3),e.pQV(t),e.QtT(3)}}function cn(n,i){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"bb-quick-transfer-accounts-ui",31),e.NdJ("select",function(c){return e.CHM(t),e.oxw(6).handleSelectFrom(c)}),e.ALo(2,"async"),e.ALo(3,"async"),e.qZA(),e.BQk()}if(2&n){const t=e.oxw(6);e.xp6(1),e.Q6J("arrangements",e.lcZ(2,3,t.extAccounts$))("selected",e.lcZ(3,5,t.fromAccountId$))("config",t.config)}}function an(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",18),e._UZ(1,"bb-icon-ui",19),e.TgZ(2,"div",20)(3,"span"),e.SDv(4,32),e.qZA(),e._UZ(5,"br"),e.TgZ(6,"button",23),e.NdJ("click",function(){return e.CHM(t),e.oxw(6).getExtAccounts()}),e.SDv(7,33),e.qZA()()()}}function rn(n,i){if(1&n&&(e.ynx(0),e.YNc(1,cn,4,7,"ng-container",15),e.YNc(2,an,8,0,"ng-template",null,30,e.W1O),e.BQk()),2&n){const t=e.MAs(3),o=e.oxw(4).ngIf,c=e.oxw();e.xp6(1),e.Q6J("ngIf",o.external===c.loadingstate.LOADED)("ngIfElse",t)}}function sn(n,i){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,on,4,1,"h3",25),e.YNc(2,rn,4,2,"ng-container",15),e.qZA()),2&n){const t=e.oxw(3).ngIf,o=e.oxw(),c=e.MAs(11);e.xp6(1),e.Q6J("ngIf",null==o.config||null==o.config.fields||null==o.config.fields.fromAccount?null:o.config.fields.fromAccount.connectedAccountsSubHeader),e.xp6(1),e.Q6J("ngIf",t.external!==o.loadingstate.LOADING)("ngIfElse",c)}}function _n(n,i){if(1&n&&(e.ynx(0),e.YNc(1,nn,3,2,"ng-container",15),e.YNc(2,sn,3,3,"div",7),e.ALo(3,"async"),e.BQk()),2&n){const t=e.oxw(2).ngIf,o=e.oxw(),c=e.MAs(11);let a;e.xp6(1),e.Q6J("ngIf",t.internal!==o.loadingstate.LOADING)("ngIfElse",c),e.xp6(1),e.Q6J("ngIf",!(t.external===o.loadingstate.LOADED&&(null==(a=e.lcZ(3,3,o.extAccounts$))||!a.length)))}}function ln(n,i){if(1&n&&(e.ynx(0)(1,10),e.YNc(2,jt,2,3,"ng-container",11),e.YNc(3,Vt,2,1,"ng-container",11),e.YNc(4,_n,4,5,"ng-container",12),e.BQk()()),2&n){const t=e.oxw().ngIf,o=e.oxw();e.xp6(1),e.Q6J("ngSwitch",!0),e.xp6(1),e.Q6J("ngSwitchCase",t.internal===o.loadingstate.LOADING&&t.external===o.loadingstate.LOADING),e.xp6(1),e.Q6J("ngSwitchCase",!!t.internal.error&&!!t.external.error)}}function un(n,i){if(1&n&&(e.ynx(0),e.YNc(1,ln,5,3,"ng-container",7),e.BQk()),2&n){const t=i.ngIf;e.xp6(1),e.Q6J("ngIf",t.internal&&t.external)}}function dn(n,i){if(1&n&&(e.TgZ(0,"div",34),e._UZ(1,"bb-loading-indicator-ui",35),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.Q6J("loaderSize",t||"sm")}}function fn(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",36)(1,"div",37),e._UZ(2,"bb-empty-state-ui",38),e.TgZ(3,"button",39),e.NdJ("click",function(){e.CHM(t);const c=e.oxw();return c.getAccounts(),c.getExtAccounts()}),e.SDv(4,40),e.qZA()()()}}const Je=function(n,i){return{internal:n,external:i}};function gn(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"bb-tab-group-ui",13),e.NdJ("select",function(c){return e.CHM(t),e.oxw().onTabSelect(c)}),e.TgZ(1,"bb-tab-ui",14),e.SDv(2,15),e.qZA(),e.TgZ(3,"bb-tab-ui",16),e.SDv(4,17),e.qZA()()}2&n&&e.Q6J("initialSelection",0)}function mn(n,i){1&n&&e.GkF(0)}function An(n,i){if(1&n&&(e.ynx(0),e.YNc(1,mn,1,0,"ng-container",23),e.BQk()),2&n){e.oxw(4);const t=e.MAs(16);e.xp6(1),e.Q6J("ngTemplateOutlet",t)("ngTemplateOutletContext",e.DdM(2,Re))}}function pn(n,i){1&n&&e.GkF(0)}function En(n,i){if(1&n&&(e.ynx(0),e.YNc(1,pn,1,0,"ng-container",24),e.BQk()),2&n){e.oxw(4);const t=e.MAs(18);e.xp6(1),e.Q6J("ngTemplateOutlet",t)}}function Sn(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"bb-quick-transfer-accounts-ui",27),e.NdJ("select",function(c){return e.CHM(t),e.oxw(7).pickPayee(c)}),e.ALo(2,"async"),e.ALo(3,"async"),e.qZA()()}if(2&n){const t=i.ngIf,o=e.oxw(7);let c;e.xp6(1),e.Q6J("arrangements",t)("selected",e.lcZ(2,4,o.selectedToPayeeId$))("selectedCounterPartyAccount",null==(c=e.lcZ(3,6,o.selectedFromAccount$))?null:c.uuid)("config",o.config)}}function bn(n,i){if(1&n&&(e.ynx(0),e.YNc(1,Sn,4,8,"div",19),e.ALo(2,"async"),e.BQk()),2&n){const t=e.oxw(6);e.xp6(1),e.Q6J("ngIf",e.lcZ(2,1,t.accounts$))}}function Cn(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",28),e._UZ(1,"bb-icon-ui",29),e.TgZ(2,"div",30)(3,"span",31),e.SDv(4,32),e.qZA(),e._UZ(5,"br"),e.TgZ(6,"button",33),e.NdJ("click",function(){return e.CHM(t),e.oxw(6).getAccounts()}),e.SDv(7,34),e.qZA()()()}}function Rn(n,i){if(1&n&&(e.ynx(0),e.YNc(1,bn,3,3,"ng-container",19),e.YNc(2,Cn,8,0,"div",26),e.BQk()),2&n){const t=e.oxw(3).ngIf,o=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.internal===o.loadingstate.LOADED),e.xp6(1),e.Q6J("ngIf",t.internal.error)}}function Tn(n,i){if(1&n&&(e.TgZ(0,"h3",36),e._UZ(1,"bb-icon-ui",37),e.TgZ(2,"span",38),e.SDv(3,39),e.qZA()()),2&n){const t=i.ngIf;e.xp6(3),e.pQV(t),e.QtT(3)}}function hn(n,i){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"bb-quick-transfer-accounts-ui",41),e.NdJ("select",function(c){return e.CHM(t),e.oxw(7).pickPayee(c)}),e.ALo(2,"async"),e.ALo(3,"async"),e.qZA(),e.BQk()}if(2&n){const t=e.oxw(7);e.xp6(1),e.Q6J("arrangements",e.lcZ(2,3,t.extAccounts$))("selected",e.lcZ(3,5,t.selectedToPayeeId$))("config",t.config)}}function Nn(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",28),e._UZ(1,"bb-icon-ui",29),e.TgZ(2,"div",30)(3,"span"),e.SDv(4,42),e.qZA(),e._UZ(5,"br"),e.TgZ(6,"button",33),e.NdJ("click",function(){return e.CHM(t),e.oxw(7).getExtAccounts()}),e.SDv(7,43),e.qZA()()()}}function vn(n,i){if(1&n&&(e.ynx(0),e.YNc(1,hn,4,7,"ng-container",25),e.YNc(2,Nn,8,0,"ng-template",null,40,e.W1O),e.BQk()),2&n){const t=e.MAs(3),o=e.oxw(4).ngIf,c=e.oxw(2);e.xp6(1),e.Q6J("ngIf",o.external===c.loadingstate.LOADED)("ngIfElse",t)}}function Mn(n,i){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,Tn,4,1,"h3",35),e.YNc(2,vn,4,2,"ng-container",25),e.qZA()),2&n){const t=e.oxw(3).ngIf,o=e.oxw(2),c=e.MAs(16);e.xp6(1),e.Q6J("ngIf",null==o.config||null==o.config.fields||null==o.config.fields.toAccount?null:o.config.fields.toAccount.connectedAccountsSubHeader),e.xp6(1),e.Q6J("ngIf",t.external!==o.loadingstate.LOADING)("ngIfElse",c)}}function In(n,i){if(1&n&&(e.ynx(0),e.YNc(1,Rn,3,2,"ng-container",25),e.YNc(2,Mn,3,3,"div",19),e.ALo(3,"async"),e.BQk()),2&n){const t=e.oxw(2).ngIf,o=e.oxw(2),c=e.MAs(16);let a;e.xp6(1),e.Q6J("ngIf",t.internal!==o.loadingstate.LOADING)("ngIfElse",c),e.xp6(1),e.Q6J("ngIf",!(t.external===o.loadingstate.LOADED&&(null==(a=e.lcZ(3,3,o.extAccounts$))||!a.length)))}}function On(n,i){if(1&n&&(e.ynx(0)(1,20),e.YNc(2,An,2,3,"ng-container",21),e.YNc(3,En,2,1,"ng-container",21),e.YNc(4,In,4,5,"ng-container",22),e.BQk()()),2&n){const t=e.oxw().ngIf,o=e.oxw(2);e.xp6(1),e.Q6J("ngSwitch",!0),e.xp6(1),e.Q6J("ngSwitchCase",t.internal===o.loadingstate.LOADING&&t.external===o.loadingstate.LOADING),e.xp6(1),e.Q6J("ngSwitchCase",!!t.internal.error&&!!t.external.error)}}function yn(n,i){if(1&n&&(e.ynx(0),e.YNc(1,On,5,3,"ng-container",19),e.BQk()),2&n){const t=i.ngIf;e.xp6(1),e.Q6J("ngIf",t.internal&&t.external)}}function Un(n,i){if(1&n&&(e.TgZ(0,"div",18),e.YNc(1,yn,2,1,"ng-container",19),e.ALo(2,"async"),e.ALo(3,"async"),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",e.WLB(5,Je,e.lcZ(2,1,t.accountsCallState$),e.lcZ(3,3,t.extAccountsCallState$)))}}function kn(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"bb-quick-transfer-accounts-ui",45),e.NdJ("select",function(c){return e.CHM(t),e.oxw(4).pickPayee(c)}),e.ALo(2,"async"),e.qZA()()}if(2&n){const t=i.ngIf,o=e.oxw(4);e.xp6(1),e.Q6J("arrangements",t)("selected",e.lcZ(2,3,o.selectedToPayeeId$))("config",o.config)}}function Dn(n,i){if(1&n&&(e.ynx(0),e.YNc(1,kn,3,5,"div",19),e.ALo(2,"async"),e.BQk()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",e.lcZ(2,1,t.contacts$))}}function Fn(n,i){1&n&&e.GkF(0)}function Bn(n,i){if(1&n&&(e.ynx(0),e.YNc(1,Fn,1,0,"ng-container",23),e.BQk()),2&n){e.oxw(3);const t=e.MAs(16);e.xp6(1),e.Q6J("ngTemplateOutlet",t)("ngTemplateOutletContext",e.DdM(2,Re))}}function Qn(n,i){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",46)(2,"div",47),e._UZ(3,"bb-empty-state-ui",48),e.TgZ(4,"button",49),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).getContacts()}),e.SDv(5,50),e.qZA()()(),e.BQk()}}function xn(n,i){if(1&n&&(e.ynx(0)(1,20),e.YNc(2,Dn,3,3,"ng-container",21),e.YNc(3,Bn,2,3,"ng-container",21),e.YNc(4,Qn,6,0,"ng-container",21),e.BQk()()),2&n){const t=i.ngIf,o=e.oxw(2);e.xp6(1),e.Q6J("ngSwitch",!0),e.xp6(1),e.Q6J("ngSwitchCase",t===o.loadingstate.LOADED),e.xp6(1),e.Q6J("ngSwitchCase",t===o.loadingstate.LOADING),e.xp6(1),e.Q6J("ngSwitchCase",!!t.error)}}function Kn(n,i){if(1&n&&(e.TgZ(0,"div",44),e.YNc(1,xn,5,4,"ng-container",19),e.ALo(2,"async"),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",e.lcZ(2,1,t.contactsCallState$))}}function Jn(n,i){if(1&n&&(e.TgZ(0,"div",51),e._UZ(1,"bb-loading-indicator-ui",52),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.Q6J("loaderSize",t||"sm")}}function Pn(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",46)(1,"div",53),e._UZ(2,"bb-empty-state-ui",54),e.TgZ(3,"button",49),e.NdJ("click",function(){e.CHM(t);const c=e.oxw();return c.getAccounts(),c.getExtAccounts()}),e.SDv(4,55),e.qZA()()()}}function Gn(n,i){if(1&n&&e._UZ(0,"bb-quick-transfer-form-ui",6),2&n){const t=e.oxw(2);e.Q6J("config",t.config)("@slideRight",void 0)}}function Ln(n,i){if(1&n&&e._UZ(0,"bb-quick-transfer-from-account-ui",6),2&n){const t=e.oxw(2);e.Q6J("config",t.config)("@slideLeft",void 0)}}function Yn(n,i){if(1&n&&e._UZ(0,"bb-quick-transfer-to-account-ui",6),2&n){const t=e.oxw(2);e.Q6J("config",t.config)("@slideLeft",void 0)}}function Zn(n,i){1&n&&e._UZ(0,"div",7),2&n&&e.Q6J("@fadeIn",void 0)}function $n(n,i){if(1&n&&e._UZ(0,"bb-quick-transfer-complete-ui",8),2&n){const t=e.oxw(2);e.Q6J("successImg",t.successImg)("successImgNoMotion",t.successImgNoMotion)("config",t.config)("@slideUp",void 0)}}function wn(n,i){if(1&n&&(e.TgZ(0,"div",1),e.YNc(1,Gn,1,2,"bb-quick-transfer-form-ui",2),e.YNc(2,Ln,1,2,"bb-quick-transfer-from-account-ui",2),e.YNc(3,Yn,1,2,"bb-quick-transfer-to-account-ui",2),e.YNc(4,Zn,1,1,"div",3),e.YNc(5,$n,1,4,"bb-quick-transfer-complete-ui",4),e._UZ(6,"bb-quick-transfer-confirmation-modal-ui",5),e.qZA()),2&n){const t=i.ngIf,o=e.oxw();e.xp6(1),e.Q6J("ngIf",t===o.viewState.FORM||t===o.viewState.COMPLETE),e.xp6(1),e.Q6J("ngIf",t===o.viewState.FROM),e.xp6(1),e.Q6J("ngIf",t===o.viewState.PAYEE),e.xp6(1),e.Q6J("ngIf",t===o.viewState.COMPLETE),e.xp6(1),e.Q6J("ngIf",t===o.viewState.COMPLETE),e.xp6(1),e.Q6J("paymentTypes",o.config.paymentTypes)("config",o.config)}}class Pe{}var b=(()=>{return(n=b||(b={})).INIT="INIT",n.LOADING="LOADING",n.LOADED="LOADED",b;var n})(),$=(()=>{return(n=$||($={})).CONFIRMATION_PENDING="CONFIRMATION_PENDING",n.USER_DECLINED="USER_DECLINED",n.SYSTEM_DECLINED="SYSTEM_DECLINED",n.PENDING_APPROVAL="PENDING_APPROVAL",n.SENDING="SENDING",n.ACCEPTED="ACCEPTED",n.REJECTED="REJECTED",n.PROCESSED="PROCESSED",n.NO_PROGRESS="NO_PROGRESS",$;var n})(),C=(()=>{return(n=C||(C={})).FORM="FORM",n.FROM="FROM",n.PAYEE="PAYEE",n.COMPLETE="COMPLETE",n.REVIEW="REVIEW",C;var n})(),Q=(()=>{return(n=Q||(Q={})).FROM="FROM",n.TO="TO",Q;var n})();const Te=(0,_.PH)("[Accounts API] fetching accounts"),he=(0,_.PH)("[Contacts API] fetching contacts"),Ne=(0,_.PH)("[Payments API] fetching external accounts"),Ge=(0,_.PH)("[Accounts API] accounts fetched success",(0,_.Ky)()),Le=(0,_.PH)("[Contacts API] contacts fetched success",(0,_.Ky)()),Ye=(0,_.PH)("[Payments API] external accounts fetched success",(0,_.Ky)()),Ze=(0,_.PH)("[Accounts API] accounts fetching error",(0,_.Ky)()),$e=(0,_.PH)("[Contacts API] contacts fetching error",(0,_.Ky)()),we=(0,_.PH)("[Payments API] external accounts fetching error",(0,_.Ky)()),ae=(0,_.PH)("[Quick Transfer Widget] current view changed",(0,_.Ky)()),ve=(0,_.PH)("[Quick Transfer Widget] payee account picked up",(0,_.Ky)()),Me=(0,_.PH)("[Quick Transfer Widget] From Account changed",(0,_.Ky)()),Ie=(0,_.PH)("[Payments Order API] send transfer order",(0,_.Ky)()),qe=(0,_.PH)("[Payments Order API] transfer order is successful"),Oe=(0,_.PH)("[Payments Order API] transfer order is failed",(0,_.Ky)()),He=(0,_.PH)("[Quick Transfer Widget] Transfer Amount Set",(0,_.Ky)()),We=(0,_.PH)("[Quick Transfer Widget] Confirmation Modal Open",(0,_.Ky)()),je=(0,_.PH)("[Quick Transfer Widget] Reset widget",(0,_.Ky)()),ze=(0,_.PH)("[Quick Transfer Widget] Reset Focus Element"),Ve=(0,_.PH)("[Quick Transfer Widget] Set Field Touched",(0,_.Ky)()),Xe=(0,_.PH)("[Quick Transfer Widget] Default Currency changed",(0,_.Ky)()),et="quick-transfer-store",qn={debitAccounts:void 0,creditAccounts:void 0,contacts:void 0,extAccounts:void 0,viewState:C.FORM,fromAccount:void 0,payeeTo:void 0,amount:void 0,defaultCurrency:"",accountsCallState:b.INIT,extAccountsCallState:b.INIT,contactsCallState:b.INIT,transferOrderCallState:b.INIT,isModalOpen:!1,touchedFields:[],focusElement:void 0},M=(0,_.ZF)(et),Hn=(0,_.P1)(M,n=>n.fromAccount),Wn=(0,_.P1)(M,n=>n.debitAccounts),jn=(0,_.P1)(M,n=>n.creditAccounts),zn=(0,_.P1)(M,n=>n.extAccounts),Vn=(0,_.P1)(M,n=>n.contacts),Xn=(0,_.P1)(M,n=>n.accountsCallState),eo=(0,_.P1)(M,n=>n.contactsCallState),to=(0,_.P1)(M,n=>n.extAccountsCallState),no=(0,_.P1)(M,n=>n.transferOrderCallState),oo=(0,_.P1)(M,n=>n.viewState),io=(0,_.P1)(M,n=>n.payeeTo),co=(0,_.P1)(M,n=>n.amount),ao=(0,_.P1)(M,n=>n.isModalOpen),ro=(0,_.P1)(M,n=>n.touchedFields),so=(0,_.P1)(M,n=>n.focusElement);let x=(()=>{class n{constructor(t){this.store=t,this.accountsCallState$=this.store.select(Xn),this.contactsCallState$=this.store.select(eo),this.extAccountsCallState$=this.store.select(to),this.currentView$=this.store.select(oo),this.debitAccounts$=this.store.select(Wn),this.creditAccounts$=this.store.select(jn),this.extAccounts$=this.store.select(zn),this.contacts$=this.store.select(Vn),this.fromAccount$=this.store.select(Hn),this.toPayee$=this.store.select(io),this.amount$=this.store.select(co),this.isModalOpen$=this.store.select(ao),this.touchedFields$=this.store.select(ro),this.focusElement$=this.store.select(so),this.paymentOrderCallState$=this.store.select(no)}fetchAccounts(){this.store.dispatch(Te())}fetchExtAccounts(){this.store.dispatch(Ne())}fetchContacts(){this.store.dispatch(he())}sendTranferOrder(t){this.store.dispatch(Ie({reqData:t}))}setView(t,o){this.store.dispatch(ae({view:t,focus:o}))}setPayee(t){this.store.dispatch(ve({id:t}))}selectFromAccount(t){this.store.dispatch(Me({accountId:t}))}setAmount({amount:t,defaultCurrency:o}){this.store.dispatch(He({amount:t,defaultCurrency:o}))}setModalOpen(t){this.store.dispatch(We({isOpen:t}))}setTouchedField(t){this.store.dispatch(Ve({fieldName:t}))}reset(t){this.store.dispatch(je({focus:t}))}resetFocus(){this.store.dispatch(ze())}updateDefaultCurrency(t){this.store.dispatch(Xe({currency:t}))}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(_.yh))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})(),ye=(()=>{class n{constructor(t){this.store=t,this.accountsCallState$=this.store.accountsCallState$,this.loadingstate=b,this.extAccountsCallState$=this.store.extAccountsCallState$}backToForm(t){this.store.setView(C.FORM,t)}getAccounts(){this.store.fetchAccounts()}getExtAccounts(){this.store.fetchExtAccounts()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(x))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],inputs:{config:"config"},decls:0,vars:0,template:function(t,o){},encapsulation:2}),n})(),Ue=(()=>{class n{constructor(){this.select=new e.vpe}pick(t){this.select.emit(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["bb-quick-transfer-accounts-ui"]],inputs:{arrangements:"arrangements",selected:"selected",selectedCounterPartyAccount:"selectedCounterPartyAccount",config:"config"},outputs:{select:"select"},decls:1,vars:1,consts:[["bbButton","","color","unstyled","class","bb-quick-transfer__product-item bb-stack",3,"bb-quick-transfer--selected-bg","disabled","click",4,"ngFor","ngForOf"],["bbButton","","color","unstyled",1,"bb-quick-transfer__product-item","bb-stack",3,"disabled","click"],[3,"highlight","title","amount","productNumber","currency","productNumberFormat","showCurrencySymbol","active"]],template:function(t,o){1&t&&e.YNc(0,Ot,2,13,"button",0),2&t&&e.Q6J("ngForOf",o.arrangements)},directives:[Z.mB,f.sg,A.Hq],encapsulation:2,changeDetection:0}),n})();const tt='[data-role="select-payee-button"] button',re='[data-role="select-from-button"] button';function se(n){let i=n.snapshot.params;if(i=Object.assign(Object.assign({},n.snapshot.queryParams),i),n.children)for(const t of n.children)i=Object.assign(Object.assign({},se(t)),i);return i}let nt=(()=>{class n{constructor(t){this.store=t,this.id=function lo(){return Math.floor(Math.random()*Date.now()).toString()}(),this.timestamp=(new Date).getTime(),this.amount$=this.store.amount$,this.toPayee$=this.store.toPayee$,this.paymentOrderCallState$=this.store.paymentOrderCallState$.pipe((0,m.U)(o=>{if(o.error){const c=o.error,a="Your Transfer Has Been Cancelled.",r="Oops, something went wrong!",S="rejected_by_user"===c.statusText?a:r;return{error:Object.assign(Object.assign({},c),{message:S})}}return o})),this.loadingstate=b}ngAfterViewInit(){this.doneButton.nativeElement.focus()}restart(){this.store.reset(re)}tryAgain(){this.store.setView(C.FORM,re)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(x))},n.\u0275cmp=e.Xpm({type:n,selectors:[["bb-quick-transfer-complete-ui"]],viewQuery:function(t,o){if(1&t&&e.Gf(yt,5),2&t){let c;e.iGM(c=e.CRH())&&(o.doneButton=c.first)}},inputs:{successImg:"successImg",successImgNoMotion:"successImgNoMotion",config:"config"},decls:5,vars:4,consts:function(){let i,t,o,c,a,r,g;return i="Transfer succeeded!",t="Well done!",o=" Done ",c="You just transferred ",a=" to ",r=" Try again ",g="Our system was unable to process your transfer at the moment.",[[1,"bb-quick-transfer__complete"],[4,"ngIf","ngIfElse"],["paymentOrderFail",""],["role","dialog"],[1,"bb-text-align-right","bb-block"],["bbButton","","color","unstyled","data-role","clear-icon-button","aria-label","close transfer","i18-aria-label","Close transfer|Text for close transfer@@quick-transfer.complete.close.button",1,"btn-unstyled--focusable",3,"click"],["name","clear","size","lg"],[1,"bb-text-align-center","flex-fill","bb-block","bb-block--lg"],["media","(prefers-reduced-motion: reduce)",3,"srcset"],["alt",i,"data-role","transfer-success-anim",1,"img-fluid",3,"id","srcset"],["headingClasses","bb-text-semi-bold h5","headingType","h3","heading",t,3,"id"],["class","bb-text-support bb-subtitle",3,"id",4,"ngIf"],[1,"bb-text-align-center","bb-block","bb-block--sm"],["bbButton","","color","secondary","data-role","transfer-done",3,"click"],["done",""],o,[1,"bb-text-support","bb-subtitle",3,"id"],c,[3,"currency","amount","mapCurrency","showPlusSign"],a,[4,"ngIf"],[1,"bb-text-align-right","bb-block","bb-block--xl"],["bbButton","","color","unstyled","data-role","clear-icon-button","aria-label","close transfer","i18-aria-label","Close transfer|Text for close transfer@@quick-transfer.complete.close.button",3,"click"],["class","bb-text-align-center flex-fill bb-block bb-block--xl","data-role","transfer-fail-message",4,"ngIf"],["bbButton","","color","secondary","data-role","transfer-try-again-button",3,"click"],r,["data-role","transfer-fail-message",1,"bb-text-align-center","flex-fill","bb-block","bb-block--xl"],["color","danger","name","error-outline","size","xxl","data-role","complete-error-outline",1,"bb-quick-transfer__fail-icon","bb-block","bb-block--md"],["headingClasses","bb-text-semi-bold h5","headingType","h3",3,"id","heading"],g]},template:function(t,o){if(1&t&&(e.TgZ(0,"div",0),e.YNc(1,Dt,16,10,"ng-container",1),e.ALo(2,"async"),e.qZA(),e.YNc(3,Bt,10,5,"ng-template",null,2,e.W1O)),2&t){const c=e.MAs(4);e.xp6(1),e.Q6J("ngIf",e.lcZ(2,2,o.paymentOrderCallState$)===o.loadingstate.LOADED)("ngIfElse",c)}},directives:[J.o,L.G,ee.G4,f.O5,A.Hq],pipes:[f.Ov],encapsulation:2,changeDetection:0}),n})();var E=(()=>{return(n=E||(E={})).currentAccount="Current Account",n.savingsAccount="Savings Account",n.creditCard="Credit Card",n.loanAccount="Loan",n.connectedAccounts="Connected Account",n.contacts="Contact",E;var n})();let ot=(()=>{class n{constructor(t){this.store=t,this.toPayee$=this.store.toPayee$,this.fromAccount$=this.store.fromAccount$,this.amount$=this.store.amount$,this.isOpen$=this.store.isModalOpen$,this.paymentOrderCallState$=this.store.paymentOrderCallState$,this.loadingstate=b,this.viewState=C}closeModal(){this.store.setModalOpen(!1)}handleConfirm(){this.subscriptions$=(0,l.a)([this.fromAccount$,this.toPayee$,this.amount$]).pipe((0,u.q)(1)).subscribe(([t,o,c])=>{if(t&&o&&c){const a=((n,i,t,o)=>{const{connectedAccounts:c,contacts:a}=E,g=n.productKindName===c?n:i,S=n.productKindName===c?O.Tg.DEBTOR:O.Tg.CREDITOR,me={identification:{identification:(n.productKindName===c?i:n).uuid,schemeName:O.B7.ID}},Ae={identification:g.productKindName===a?g.number:g.uuid,schemeName:function ge(){switch(g.productKindName){case c:return O.B7.EXTERNALID;case a:return O.B7.BBAN;default:return O.B7.ID}}()},pe={instructedAmount:{amount:t.amount,currencyCode:t.currency},counterparty:{name:g.name,role:S},counterpartyAccount:Object.assign({identification:Ae},g.productKindName===a&&{selectedContact:{contactId:g.uuid,accountId:""}})};return{originatorAccount:me,requestedExecutionDate:(new Date).toISOString().slice(0,10),paymentType:function R(){switch(g.productKindName){case c:return o.external;case a:return o.contact;default:return o.internal}}(),transferTransactionInformation:pe}})(t,o,c,this.paymentTypes||{});this.store.sendTranferOrder(a)}})}ngOnDestroy(){this.subscriptions$&&this.subscriptions$.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(x))},n.\u0275cmp=e.Xpm({type:n,selectors:[["bb-quick-transfer-confirmation-modal-ui"]],inputs:{paymentTypes:"paymentTypes",config:"config"},decls:7,vars:4,consts:function(){let i,t,o,c,a;return i="Amount",t="From",o="To",c=" Confirm transfer ",a="Cancel",[[1,"bb-quick-transfer__modal",3,"isOpen","cancel","confirm"],[3,"title"],["bbCustomModalBody",""],["bbCustomModalFooter",""],["class","bb-block bb-block--md","data-role","quick-transfer-review-amount",4,"ngIf"],[1,"bb-stack"],["class","bb-stack__item bb-stack__item--align-top bb-stack__item--spacing-lg bb-quick-transfer__modal-from bb-stack__item--fill",4,"ngIf"],["aria-hidden","true",1,"bb-stack__item","bb-stack__item--spacing-lg"],["name","arrow-forward","size","md"],["class","bb-stack__item bb-stack__item--align-top bb-stack__item--fill",4,"ngIf"],["data-role","quick-transfer-review-amount",1,"bb-block","bb-block--md"],[1,"bb-block","bb-block--xs","font-weight-normal","bb-text-support","bb-subtitle"],i,["data-role","confirmation-amount",1,"bb-highlight",3,"currency","amount","mapCurrency","showPlusSign"],[1,"bb-stack__item","bb-stack__item--align-top","bb-stack__item--spacing-lg","bb-quick-transfer__modal-from","bb-stack__item--fill"],[1,"bb-quick-transfer__modal-wrap"],[1,"bb-text-support","bb-subtitle","font-weight-normal","bb-block","bb-block--xs"],t,["data-role","confirmation-from-account",3,"title","productNumber","amount","currency","productNumberFormat","showCurrencySymbol","highlight","active"],[1,"bb-stack__item","bb-stack__item--align-top","bb-stack__item--fill"],o,["data-role","confirmation-to-account",3,"title","productNumber","amount","currency","productNumberFormat","showCurrencySymbol","highlight","active"],[1,"bb-button-bar"],["color","primary","data-role","modal-confirm-button",1,"bb-button-bar__button",3,"isLoading","click"],c,["bbButton","","data-role","cancel-button","color","link",1,"bb-button-bar__button",3,"disabled","click"],a]},template:function(t,o){1&t&&(e.TgZ(0,"bb-modal-ui",0),e.NdJ("cancel",function(){return o.closeModal()})("confirm",function(){return o.handleConfirm()}),e.ALo(1,"async"),e._UZ(2,"bb-modal-header-ui",1),e.TgZ(3,"bb-modal-body-ui"),e.YNc(4,Jt,9,9,"ng-template",2),e.qZA(),e.TgZ(5,"bb-modal-footer-ui"),e.YNc(6,Pt,8,6,"ng-template",3),e.qZA()()),2&t&&(e.Q6J("isOpen",!!e.lcZ(1,2,o.isOpen$)),e.xp6(2),e.Q6J("title",(null==o.config||null==o.config.titles?null:o.config.titles[o.viewState.FORM])||""))},directives:[P.zS,P.Rb,P.KF,ee.G4,Z.mB,J.o,P.YI,Se.K,P.Qd,f.O5,P.yk,A.Hq],pipes:[f.Ov],encapsulation:2,changeDetection:0}),n})(),it=(()=>{class n{constructor(t){this.parentFormControl=t,this.open=new e.vpe,this.touched=!1,this.onChange=o=>{},this.onTouched=()=>{},this.parentFormControl&&(this.parentFormControl.valueAccessor=this)}writeValue(t){}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}markAsTouched(){this.onTouched()}openAccountSelectorView(){this.open.emit(!0)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(U.a5,10))},n.\u0275cmp=e.Xpm({type:n,selectors:[["bb-custom-product-selector"]],inputs:{emptyLabel:"emptyLabel",account:"account",touched:"touched",ariaDescribedby:["aria-describedby","ariaDescribedby"]},outputs:{open:"open"},decls:5,vars:5,consts:[["bbButton","","color","unstyled",1,"bb-stack","form-control","bb-quick-transfer-selector-field",3,"click"],["data-role","custom-product-selector-account-name","class","bb-stack__item bb-stack__item--fill bb-text-semi-bold bb-ellipsis--single-line",4,"ngIf","ngIfElse"],["accountTemplate",""],["name","angle-right","cropped","",1,"bb-text-support","bb-stack__item"],["data-role","custom-product-selector-account-name",1,"bb-stack__item","bb-stack__item--fill","bb-text-semi-bold","bb-ellipsis--single-line"],[1,"bb-stack__item","bb-stack__item--fill","bb-text-support"]],template:function(t,o){if(1&t&&(e.TgZ(0,"button",0),e.NdJ("click",function(){return o.openAccountSelectorView()}),e.YNc(1,Gt,2,1,"span",1),e.YNc(2,Lt,2,1,"ng-template",null,2,e.W1O),e._UZ(4,"bb-icon-ui",3),e.qZA()),2&t){const c=e.MAs(3);e.ekj("border-danger",o.touched&&(null==o.parentFormControl?null:o.parentFormControl.invalid)),e.uIk("aria-describedby",o.ariaDescribedby),e.xp6(1),e.Q6J("ngIf",o.account)("ngIfElse",c)}},directives:[J.o,A.Hq,f.O5],encapsulation:2,changeDetection:0}),n})(),ct=(()=>{class n{ngOnInit(){this.requiredMessage=this.getValidationMessage("required")}getValidationMessage(t){var o;const c=null===(o=this.validationMessages)||void 0===o?void 0:o.find(a=>{var r,g;return!!(null===(g=null===(r=this.control)||void 0===r?void 0:r.errors)||void 0===g?void 0:g[t||a.name])});return(null==c?void 0:c.message)||""}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["bb-quick-transfer-validation-message"]],inputs:{control:"control",validationMessages:"validationMessages",id:"id"},decls:1,vars:1,consts:[["data-role","input-error",3,"showErrors",4,"ngIf"],["data-role","input-error",3,"showErrors"],[4,"ngIf","ngIfElse"],["invalidError",""],["data-role","required-error",4,"ngIf"],["data-role","required-error"]],template:function(t,o){1&t&&e.YNc(0,qt,4,4,"bb-input-validation-message-ui",0),2&t&&e.Q6J("ngIf",(null==o.control?null:o.control.touched)&&(null==o.control?null:o.control.invalid))},directives:[be.d,f.O5],encapsulation:2,data:{animation:[te.dF]}}),n})(),at=(()=>{class n{constructor(t,o,c){this.store=t,this.formBuilder=o,this.locale=c,this.toPayee$=this.store.toPayee$,this.fromAccount$=this.store.fromAccount$,this.amount$=this.store.amount$,this.touchedFields$=this.store.touchedFields$,this.form=new U.cw({}),this.viewState=C,this.id=(new Date).getTime(),this.currentView$=this.store.currentView$,this.destroy$=new p.x,this.decimalSeparator=(0,f.dv)(this.locale,f.wE.CurrencyDecimal),this.format={groupSeparator:"",decimalSeparator:this.decimalSeparator,groupSize:3}}get amountConfig(){var t;return null===(t=this.config)||void 0===t?void 0:t.fields.amount}ngOnInit(){var t,o;this.initializeForm(),null===(o=null===(t=this.form)||void 0===t?void 0:t.get("amountGroup.amount"))||void 0===o||o.valueChanges.pipe((0,y.x)(),(0,v.R)(this.destroy$)).subscribe(c=>{this.storeAmountValue(c)}),this.touchedFields$.pipe((0,u.q)(1)).subscribe(c=>{(null==c?void 0:c.length)&&c.forEach(a=>{var r,g;null===(g=null===(r=this.form)||void 0===r?void 0:r.get(a))||void 0===g||g.markAsTouched()})}),(0,l.a)([this.amount$.pipe((0,u.q)(1)),this.toPayee$.pipe((0,u.q)(1)),this.fromAccount$.pipe((0,y.x)())]).pipe((0,v.R)(this.destroy$)).subscribe(([c,a,r])=>{var g,S;const R=null==c?void 0:c.amount;null===(g=this.form)||void 0===g||g.patchValue({amountGroup:{amount:R?new Mt(R).toFormat(this.format):"",currency:(null==c?void 0:c.currency)||(null===(S=this.amountConfig)||void 0===S?void 0:S.initialCurrency)},toAccount:a,fromAccount:r})})}ngAfterViewInit(){this.store.focusElement$.pipe((0,y.x)(),(0,T.h)(Boolean),(0,v.R)(this.destroy$)).subscribe(t=>{const o=this.formEl.nativeElement.querySelector(t);o&&(o.focus({preventScroll:!0}),this.store.resetFocus())}),this.amount$.pipe((0,T.h)(t=>!t),(0,u.q)(1)).subscribe(()=>{var t,o,c;null===(o=null===(t=this.form)||void 0===t?void 0:t.get("amountGroup.amount"))||void 0===o||o.patchValue(" "),null===(c=this.form)||void 0===c||c.reset()})}ngOnDestroy(){this.destroy$.next(void 0),this.destroy$.complete()}openFromAccount(){this.store.setView(C.FROM),this.store.setTouchedField("fromAccount")}openPayeeAccount(){this.store.setView(C.PAYEE),this.store.setTouchedField("toAccount")}storeAmountValue(t){this.store.setAmount({amount:null==t?void 0:t.replace(this.decimalSeparator,".")})}openConfirmation(){var t;return(0,vt.mG)(this,void 0,void 0,function*(){(yield this.currentView$.pipe((0,Be.P)()).toPromise())===C.FORM&&(null===(t=this.form)||void 0===t?void 0:t.valid)?(this.storeAmountValue(this.form.value.amountGroup.amount),this.store.setModalOpen(!0)):(this.setTouched("amountGroup.amount"),this.setTouched("fromAccount"),this.setTouched("toAccount"))})}isFieldValid(t){var o;const c=null===(o=this.form)||void 0===o?void 0:o.get(t);return c&&(c.valid||c.untouched)}setTouched(t){var o;const c=null===(o=this.form)||void 0===o?void 0:o.get(t);c&&(c.markAsTouched(),this.store.setTouchedField(t))}initializeForm(){var t;const{fromAccount:o,toAccount:c,amount:a}=(null===(t=this.config)||void 0===t?void 0:t.fields)||{};this.form=this.formBuilder.group({amountGroup:this.formBuilder.group({amount:["",(null==a?void 0:a.validators)||[],(null==a?void 0:a.asyncValidators)||[]],currency:["",U.kI.required]}),fromAccount:["",(null==o?void 0:o.validators)||[],(null==o?void 0:o.asyncValidators)||[]],toAccount:["",(null==c?void 0:c.validators)||[],(null==c?void 0:c.asyncValidators)||[]]})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(x),e.Y36(U.qu),e.Y36(e.soG))},n.\u0275cmp=e.Xpm({type:n,selectors:[["bb-quick-transfer-form-ui"]],viewQuery:function(t,o){if(1&t&&e.Gf(Ht,5),2&t){let c;e.iGM(c=e.CRH())&&(o.formEl=c.first)}},inputs:{config:"config"},decls:31,vars:41,consts:function(){let i,t,o,c,a,r;return i=" Quick transfer Form ",t="Select your account",o="" + "\ufffd0\ufffd" + "",c="Select beneficiary",a="" + "\ufffd0\ufffd" + "",r=" Transfer Now ",[[1,"bb-quick-transfer__view","bb-quick-transfer__view--form"],[1,"bb-block","bb-quick-transfer__heading"],[1,"bb-stack"],["data-role","quick-transfer-header","headingType","h2","headingClasses","bb-block bb-block--lg",1,"bb-stack__item","bb-stack__item--fill",3,"heading"],["data-role","quick-transfer-form",1,"bb-quick-transfer__form",3,"formGroup","ngSubmit"],["formElement",""],[3,"disabled"],[1,"sr-only"],i,[1,"bb-block","bb-block--lg"],["data-role","from-label",1,"bb-label"],["formControlName","fromAccount","data-role","select-from-button","emptyLabel",t,3,"touched","account","aria-describedby","focusout","open"],["data-role","qt-form.from.validation-message",3,"id","control","validationMessages"],["data-role","payee-label",1,"bb-label"],o,["formControlName","toAccount","data-role","select-payee-button","emptyLabel",c,3,"touched","account","aria-describedby","focusout","open"],["data-role","qt-form.payee.validation-message",3,"id","control","validationMessages"],["formGroupName","amountGroup",1,"bb-block","bb-block--xl"],["data-role","quick-transfer.form.amount-label",1,"bb-label",3,"for"],a,["formControlName","amount","data-role","amount-input",3,"id","autoDecimal","wrapperClasses","mapCurrency","currency","required","aria-describedby","placeholder","focusout"],["data-role","qt-form.amount-input.validation-message",3,"id","control","validationMessages"],[1,"bb-block","bb-block--sm"],["bbButton","","color","primary","data-role","open-confirmation","type","submit",3,"block"],r]},template:function(t,o){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"bb-header-ui",3),e.qZA()(),e.TgZ(4,"form",4,5),e.NdJ("ngSubmit",function(){return o.openConfirmation()}),e.TgZ(6,"fieldset",6),e.ALo(7,"async"),e.TgZ(8,"legend",7),e.SDv(9,8),e.qZA(),e.TgZ(10,"div",9)(11,"label",10),e._uU(12),e.qZA(),e.TgZ(13,"bb-custom-product-selector",11),e.NdJ("focusout",function(){return o.setTouched("fromAccount")})("open",function(){return o.openFromAccount()}),e.ALo(14,"async"),e.qZA(),e._UZ(15,"bb-quick-transfer-validation-message",12),e.qZA(),e.TgZ(16,"div",9)(17,"label",13),e.SDv(18,14),e.qZA(),e.TgZ(19,"bb-custom-product-selector",15),e.NdJ("focusout",function(){return o.setTouched("toAccount")})("open",function(){return o.openPayeeAccount()}),e.ALo(20,"async"),e.qZA(),e._UZ(21,"bb-quick-transfer-validation-message",16),e.qZA(),e.TgZ(22,"div",17)(23,"label",18),e.SDv(24,19),e.qZA(),e.TgZ(25,"bb-amount-input-ui",20),e.NdJ("focusout",function(){return o.setTouched("amountGroup.amount")}),e.ALo(26,"async"),e.qZA(),e._UZ(27,"bb-quick-transfer-validation-message",21),e.qZA(),e.TgZ(28,"div",22)(29,"button",23),e.SDv(30,24),e.qZA()()()()()),2&t){let c;e.xp6(3),e.Q6J("heading",null==o.config||null==o.config.titles?null:o.config.titles[o.viewState.FORM]),e.xp6(1),e.Q6J("formGroup",o.form),e.xp6(2),e.Q6J("disabled",e.lcZ(7,33,o.currentView$)!==o.viewState.FORM),e.xp6(6),e.Oqu(null==o.config||null==o.config.fields||null==o.config.fields.fromAccount?null:o.config.fields.fromAccount.label),e.xp6(1),e.s9C("aria-describedby","fromAccount-errors-"+o.id),e.Q6J("touched",!o.isFieldValid("fromAccount"))("account",e.lcZ(14,35,o.fromAccount$)),e.xp6(2),e.s9C("id","fromAccount-errors-"+o.id),e.Q6J("control",null==o.form?null:o.form.get("fromAccount"))("validationMessages",null==o.config||null==o.config.fields||null==o.config.fields.fromAccount?null:o.config.fields.fromAccount.validationMessages),e.xp6(3),e.pQV(null==o.config||null==o.config.fields||null==o.config.fields.toAccount?null:o.config.fields.toAccount.label),e.QtT(18),e.xp6(1),e.s9C("aria-describedby","toAccount-errors-"+o.id),e.Q6J("touched",!o.isFieldValid("toAccount"))("account",e.lcZ(20,37,o.toPayee$)||void 0),e.xp6(2),e.s9C("id","toAccount-errors-"+o.id),e.Q6J("control",null==o.form?null:o.form.get("toAccount"))("validationMessages",null==o.config||null==o.config.fields||null==o.config.fields.toAccount?null:o.config.fields.toAccount.validationMessages),e.xp6(1),e.ekj("was-validated",!o.isFieldValid("amountGroup.amount")),e.xp6(1),e.s9C("for","amount-"+o.id),e.xp6(1),e.pQV(null==o.config||null==o.config.fields||null==o.config.fields.amount?null:o.config.fields.amount.label),e.QtT(24),e.xp6(1),e.s9C("aria-describedby","amount-errors-"+o.id),e.Q6J("id","amount-"+o.id)("autoDecimal",!(null==o.amountConfig||!o.amountConfig.autoDecimal))("wrapperClasses",(null==o.amountConfig?null:o.amountConfig.wrapperClasses)||"")("mapCurrency",!(null==o.config||null==o.config.uiComponentProps||!o.config.uiComponentProps.mapCurrency))("currency",(null==(c=e.lcZ(26,39,o.fromAccount$))?null:c.currency)||(null==o.amountConfig?null:o.amountConfig.initialCurrency))("required",!(null==o.amountConfig||!o.amountConfig.required))("placeholder",(null==o.amountConfig?null:o.amountConfig.placeholder)||""),e.xp6(2),e.s9C("id","amount-errors-"+o.id),e.Q6J("control",null==o.form?null:o.form.get("amountGroup.amount"))("validationMessages",null==o.amountConfig?null:o.amountConfig.validationMessages),e.xp6(2),e.Q6J("block",!0)}},directives:[L.G,it,ct,Ce.l,U._Y,U.JL,U.sg,U.JJ,U.u,U.x0,U.Q7,A.Hq],pipes:[f.Ov],encapsulation:2}),n})();const rt=(n,i)=>(n||[]).filter(o=>!i||i.includes(o.productKindName)),st=(n,i)=>(n||[]).filter(o=>!i||!i.length||i.every(({key:c,value:a})=>a.some(r=>o.defaultRecord&&r===o.defaultRecord[c]))),z=(n,i,t,o)=>{if(!n)return[];const c=t||[];c.push({from:E.connectedAccounts,to:E.connectedAccounts}),c.push({from:E.connectedAccounts,to:E.contacts});const a=c.filter(r=>o===Q.FROM?r.to===(null==i?void 0:i.productKindName):r.from===(null==i?void 0:i.productKindName)).map(r=>o===Q.FROM?r.from:r.to);return n.filter(r=>!a.includes(r.productKindName))};let _t=(()=>{class n extends ye{constructor(t){super(t),this.store=t,this.fromAccountId$=this.store.fromAccount$.pipe((0,T.h)(Boolean),(0,H.j)("uuid")),this.selectedToPayee$=this.store.toPayee$.pipe((0,u.q)(1)),this.fromAccountSelector=re,this.viewState=C}ngAfterViewInit(){this.backbutton.nativeElement.focus({preventScroll:!0})}handleSelectFrom(t){this.store.selectFromAccount(t)}ngOnInit(){const{fields:t,disabledCombinations:o}=this.config||{},{productKinds:c}=(null==t?void 0:t.fromAccount)||{};(0,l.a)([this.extAccountsCallState$,this.accountsCallState$]).pipe((0,u.q)(1)).subscribe(([a,r])=>{a===b.INIT&&(null==c?void 0:c.includes(E.connectedAccounts))&&this.getExtAccounts(),r===b.INIT&&this.getAccounts()}),this.accounts$=this.store.debitAccounts$.pipe((0,u.q)(1),(0,B.M)(this.selectedToPayee$.pipe((0,u.q)(1))),(0,m.U)(([a,r])=>z(a,r,o,Q.FROM)),(0,V.d)(1)),this.extAccounts$=this.store.extAccounts$.pipe((0,B.M)(this.selectedToPayee$.pipe((0,u.q)(1))),(0,m.U)(([a,r])=>z(a,r,o,Q.FROM)),(0,V.d)(1))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(x))},n.\u0275cmp=e.Xpm({type:n,selectors:[["bb-quick-transfer-from-account-ui"]],viewQuery:function(t,o){if(1&t&&e.Gf(Ke,5),2&t){let c;e.iGM(c=e.CRH())&&(o.backbutton=c.first)}},features:[e._Bn([x]),e.qOj],decls:14,vars:9,consts:function(){let i,t,o,c,a,r,g,S;return i=" We could not retrieve data for your internal accounts.",t=" Reload ",o=" " + "\ufffd0\ufffd" + " ",c=" We could not retrieve data for your external accounts.",a=" Reload ",r="No data retrieved",g="We could not retrieve data for your accounts.",S=" Reload ",[[1,"bb-quick-transfer__view"],["data-role","from-account-header",1,"bb-quick-transfer__heading","bb-stack","bb-quick-transfer__heading--border"],["bbButton","","aria-label","back to form","i18-aria-label","Back button|Quick transfer back button@@quick-transfer.fromaccount.back.button","color","unstyled",1,"bb-stack__item","btn-unstyled--focusable","bb-block","bb-block--lg",3,"click"],["back",""],["name","arrow-back"],["headingClasses","h3 bb-block bb-block--lg","headingType","h2",1,"bb-stack__item",3,"heading"],["data-role","from-account",1,"bb-quick-transfer__tabs-content","scrollable-box-content"],[4,"ngIf"],["loadingState",""],["errorCase",""],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngTemplateOutlet"],[4,"ngIf","ngIfElse"],["class","bb-quick-transfer__subheader bb-stack",4,"ngIf"],["data-role","internal-accounts",3,"arrangements","selected","selectedCounterPartyAccount","config","select"],[1,"bb-quick-transfer__subheader","bb-stack"],["name","error-outline","size","md",1,"bb-stack__item","bb-stack__item--align-top"],[1,"bb-subtitle"],["data-role","qt.from-view.internal-item-not-found-msg"],i,["bbButton","","color","link-text","data-role","reload-accounts",3,"click"],t,["class","bb-subheader bb-text-support bb-quick-transfer__subheader bb-block bb-block--no-margin bb-inline-stack h4",4,"ngIf"],[1,"bb-subheader","bb-text-support","bb-quick-transfer__subheader","bb-block","bb-block--no-margin","bb-inline-stack","h4"],["name","insert-link","cropped","",1,"bb-inline-stack__item--spacing-sm"],["data-role","external-accounts-header"],o,["errorState",""],["data-role","external-accounts",3,"arrangements","selected","config","select"],c,a,[1,"bb-loading-indicator"],[3,"loaderSize"],[1,"bb-quick-transfer__heading"],["data-role","double-error-state",1,"bb-state-container"],["title",r,"iconClasses","","iconSize","xxl","subtitle",g,"iconModifier","error-outline",1,"bb-block","bb-block--md"],["bbButton","","buttonSize","sm","color","primary","data-role","reload-accounts",3,"click"],S]},template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"button",2,3),e.NdJ("click",function(){return o.backToForm(o.fromAccountSelector)}),e._UZ(4,"bb-icon-ui",4),e.qZA(),e._UZ(5,"bb-header-ui",5),e.qZA(),e.TgZ(6,"div",6),e.YNc(7,un,2,1,"ng-container",7),e.ALo(8,"async"),e.ALo(9,"async"),e.qZA()(),e.YNc(10,dn,2,1,"ng-template",null,8,e.W1O),e.YNc(12,fn,5,0,"ng-template",null,9,e.W1O)),2&t&&(e.xp6(5),e.Q6J("heading",null==o.config||null==o.config.titles?null:o.config.titles[o.viewState.FROM]),e.xp6(2),e.Q6J("ngIf",e.WLB(6,Je,e.lcZ(8,2,o.accountsCallState$),e.lcZ(9,4,o.extAccountsCallState$))))},directives:[J.o,L.G,Ue,ne.Q,oe.s,A.Hq,f.O5,f.RF,f.n9,f.tP,f.ED],pipes:[f.Ov],encapsulation:2,changeDetection:0}),n})(),lt=(()=>{class n extends ye{constructor(t){super(t),this.store=t,this.selectedTab=0,this.contacts$=this.store.contacts$,this.selectedToPayeeId$=this.store.toPayee$.pipe((0,T.h)(Boolean),(0,H.j)("uuid")),this.selectedFromAccount$=this.store.fromAccount$.pipe((0,u.q)(1)),this.contactsCallState$=this.store.contactsCallState$,this.renderContacts$=this.selectedFromAccount$.pipe((0,m.U)(o=>{var c;const{toAccount:a}=(null===(c=this.config)||void 0===c?void 0:c.fields)||{},{connectedAccounts:r,contacts:g}=E,S=(null==o?void 0:o.productKindName)===r,R=!(null==a?void 0:a.productKinds)||(null==a?void 0:a.productKinds.includes(g));return!S&&R})),this.toAccountSelector=tt,this.viewState=C}ngOnInit(){const{fields:t,disabledCombinations:o}=this.config||{},{productKinds:c}=(null==t?void 0:t.toAccount)||{};(0,l.a)([this.extAccountsCallState$,this.accountsCallState$]).pipe((0,u.q)(1)).subscribe(([a,r])=>{a===b.INIT&&(null==c?void 0:c.includes(E.connectedAccounts))&&this.getExtAccounts(),r===b.INIT&&this.getAccounts()}),this.accounts$=this.store.creditAccounts$.pipe((0,u.q)(1),(0,B.M)(this.selectedFromAccount$),(0,m.U)(([a,r])=>z(a,r,o,Q.TO)),(0,V.d)(1)),this.extAccounts$=this.store.extAccounts$.pipe((0,B.M)(this.selectedFromAccount$),(0,m.U)(([a,r])=>z(a,r,o,Q.TO)),(0,V.d)(1))}ngAfterViewInit(){this.backbutton.nativeElement.focus({preventScroll:!0})}onTabSelect(t){this.selectedTab=t,1===t&&this.contactsCallState$.pipe((0,u.q)(1),(0,T.h)(o=>o===b.INIT)).subscribe(()=>{this.getContacts()})}pickPayee(t){this.store.setPayee(t)}getContacts(){this.store.fetchContacts()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(x))},n.\u0275cmp=e.Xpm({type:n,selectors:[["bb-quick-transfer-to-account-ui"]],viewQuery:function(t,o){if(1&t&&e.Gf(Ke,5),2&t){let c;e.iGM(c=e.CRH())&&(o.backbutton=c.first)}},features:[e.qOj],decls:19,vars:18,consts:function(){let i,t,o,c,a,r,g,S,R,ge,me,Ae,pe;return i="My Accounts",t="Contacts",o=" We could not retrieve data for your internal accounts.",c=" Reload ",a=" " + "\ufffd0\ufffd" + " ",r=" We could not retrieve data for your external accounts.",g=" Reload ",S="No data retrieved",R="We could not retrieve data for your contacts.",ge=" Reload ",me="No data retrieved",Ae="We could not retrieve data for your accounts.",pe=" Reload ",[[1,"bb-quick-transfer__view"],["data-role","to-account-header",1,"bb-quick-transfer__heading","bb-stack"],["bbButton","","data-role","qt.payee-list.back-icon-button","aria-label","back to form","i18-aria-label","Back button|Quick transfer back button@@quick-transfer.to-account.back.button","color","unstyled",1,"bb-stack__item","btn-unstyled--focusable","bb-block","bb-block--xs",3,"click"],["back",""],["name","arrow-back"],["headingType","h2",1,"bb-stack__item",3,"headingClasses","heading"],[1,"bb-quick-transfer__tabs-container"],[3,"initialSelection","select",4,"ngIf"],[1,"bb-quick-transfer__tabs-content","scrollable-box-content"],["data-role","quick-transfer-accounts-tab",4,"ngIf"],["data-role","quick-transfer-contacts-tab",4,"ngIf"],["loadingState",""],["errorCase",""],[3,"initialSelection","select"],["data-role","account-tab-header"],i,["data-role","contacts-tab-header"],t,["data-role","quick-transfer-accounts-tab"],[4,"ngIf"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngTemplateOutlet"],[4,"ngIf","ngIfElse"],["class","bb-quick-transfer__subheader bb-stack",4,"ngIf"],["data-role","internal-accounts",3,"arrangements","selected","selectedCounterPartyAccount","config","select"],[1,"bb-quick-transfer__subheader","bb-stack"],["name","error-outline","size","md",1,"bb-stack__item","bb-stack__item--align-top"],[1,"bb-subtitle"],["data-role","qt.to-view.internal-item-not-found-msg"],o,["bbButton","","color","link-text","data-role","reload-accounts",3,"click"],c,["class","bb-subheader bb-text-support bb-quick-transfer__subheader bb-block bb-block--no-margin bb-inline-stack",4,"ngIf"],[1,"bb-subheader","bb-text-support","bb-quick-transfer__subheader","bb-block","bb-block--no-margin","bb-inline-stack"],["name","insert-link","cropped","",1,"bb-inline-stack__item--spacing-sm"],["data-role","external-accounts-header"],a,["errorState",""],["data-role","external-accounts",3,"arrangements","selected","config","select"],r,g,["data-role","quick-transfer-contacts-tab"],[3,"arrangements","selected","config","select"],[1,"bb-quick-transfer__heading"],["data-role","contacts-error-state",1,"bb-state-container"],["title",S,"iconClasses","","iconSize","xxl","subtitle",R,"iconModifier","error-outline",1,"bb-block","bb-block--md"],["bbButton","","buttonSize","sm","color","primary","data-role","reload-accounts",3,"click"],ge,[1,"bb-loading-indicator"],[3,"loaderSize"],["data-role","double-error-state",1,"bb-state-container"],["title",me,"iconClasses","","subtitle",Ae,"iconModifier","error-outline",1,"bb-block","bb-block--md"],pe]},template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e.ALo(2,"async"),e.TgZ(3,"button",2,3),e.NdJ("click",function(){return o.backToForm(o.toAccountSelector)}),e.ALo(5,"async"),e._UZ(6,"bb-icon-ui",4),e.qZA(),e._UZ(7,"bb-header-ui",5),e.ALo(8,"async"),e.qZA(),e.TgZ(9,"div",6),e.YNc(10,gn,5,1,"bb-tab-group-ui",7),e.ALo(11,"async"),e.TgZ(12,"div",8),e.YNc(13,Un,4,8,"div",9),e.YNc(14,Kn,3,3,"div",10),e.qZA()()(),e.YNc(15,Jn,2,1,"ng-template",null,11,e.W1O),e.YNc(17,Pn,5,0,"ng-template",null,12,e.W1O)),2&t&&(e.xp6(1),e.ekj("bb-quick-transfer__heading--border",!e.lcZ(2,10,o.renderContacts$)),e.xp6(2),e.ekj("bb-stack__item--align-top",!e.lcZ(5,12,o.renderContacts$)),e.xp6(4),e.MGl("headingClasses","bb-block bb-block--",e.lcZ(8,14,o.renderContacts$)?"sm":"lg"," h3"),e.Q6J("heading",null==o.config||null==o.config.titles?null:o.config.titles[o.viewState.PAYEE]),e.xp6(3),e.Q6J("ngIf",e.lcZ(11,16,o.renderContacts$)),e.xp6(2),e.Q6J("@tabsAnimation",o.selectedTab),e.xp6(1),e.Q6J("ngIf",0===o.selectedTab),e.xp6(1),e.Q6J("ngIf",1===o.selectedTab))},directives:[J.o,L.G,ie.QW,ie.id,Ue,oe.s,ne.Q,A.Hq,f.O5,f.RF,f.n9,f.tP,f.ED],pipes:[f.Ov],encapsulation:2,data:{animation:[te.oL]},changeDetection:0}),n})();const ut=(0,F.oQ)([(0,F.oB)({position:"absolute",height:"100%",width:"100%",transform:"{{from}}",display:"block",top:0}),(0,F.jt)("200ms ease-in",(0,F.oB)({transform:"{{to}}"}))]);function ke(n,i){return[(0,F.eR)(":enter",[(0,F._7)(ut,{params:{from:n,to:i}})]),(0,F.eR)(":leave",[(0,F._7)(ut,{params:{from:i,to:n}})])]}const mo=(0,F.X$)("slideLeft",ke("translateX(100%)","translateX(0%)")),Ao=(0,F.X$)("slideRight",ke("translateX(-100%)","translateX(0%)")),dt=((0,F.X$)("slideUp",ke("translateY(100%)","translateY(0%)")),{fields:{fromAccount:{productKinds:[E.savingsAccount,E.currentAccount,E.creditCard,E.loanAccount,E.connectedAccounts],label:"From",mapItems:n=>n.filter(i=>["EUR","AED","USD"].includes((null==i?void 0:i.currency)||"")),connectedAccountsSubHeader:"Connected Accounts",validators:[U.kI.required],validationMessages:[{name:"required",message:"Account is required"}]},toAccount:{productKinds:[E.savingsAccount,E.currentAccount,E.creditCard,E.loanAccount,E.connectedAccounts,E.contacts],label:"To",mapContacts:n=>n.filter(i=>!!i.number),connectedAccountsSubHeader:"Connected Accounts",validators:[U.kI.required],validationMessages:[{name:"required",message:"Beneficiary is required"}]},amount:{initialCurrency:"USD",autoDecimal:!0,placeholder:"0.00",wrapperClasses:"bb-amount-input__field--large",label:"Amount",validationMessages:[{name:"nonZero",message:"Transfer amount is required"}],validators:[function _o(n){return!n.value||Number(n.value)<=0?{nonZero:!0}:null}]}},businessFunction:"A2A Transfer",titles:{[C.FORM]:"Quick Transfer",[C.FROM]:"Transfer from",[C.PAYEE]:"Transfer to",[C.REVIEW]:"Quick Transfer"},paymentTypes:{internal:"INTERNAL_TRANSFER",external:"EXTERNAL_A2A",contact:"INTRABANK_TRANSFER"},disabledCombinations:[{from:E.loanAccount,to:E.loanAccount},{from:E.creditCard,to:E.creditCard}],uiComponentProps:{mapCurrency:!0,accountNumberFormat:{segments:0,length:0,maskRange:[0,0]}}}),bo=new e.OlP("QuickTransferJourneyConfigurationToken injection token");let _e=(()=>{class n{constructor(t){this.config=t,this._config=Object.assign(Object.assign({},dt),this.config||{})}get defaults(){return dt}get fields(){return this._config.fields}get businessFunction(){return this._config.businessFunction}get paymentTypes(){return this._config.paymentTypes}get disabledCombinations(){return this._config.disabledCombinations}get productSummaryQueryParameters(){return this._config.productSummaryQueryParameters}get uiComponentProps(){return this._config.uiComponentProps}get titles(){return this._config.titles}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(bo,8))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})(),ft=(()=>{class n{constructor(t,o,c,a){this.store=t,this.router=o,this.activatedRoute=c,this.config=a,this.subscription$=new Rt.w0,this.viewState=C,this.currentView$=this.store.currentView$,this.successImg="./assets/quick-transfer-journey-ang/succeed.svg",this.successImgNoMotion="./assets/quick-transfer-journey-ang/no-motion.svg"}ngOnInit(){var t,o;this.subscription$=this.router.events.pipe((0,T.h)(c=>c instanceof d.m2),(0,Tt.O)(se(this.activatedRoute.root)),(0,B.M)(this.store.touchedFields$,this.store.accountsCallState$),(0,m.U)(([c,a,r])=>(r===b.INIT&&this.store.fetchAccounts(),!(null==a?void 0:a.includes("fromAccount")))),(0,T.h)(Boolean),(0,ht.b)(()=>this.applyDisabledCombination(se(this.activatedRoute.root).selectedAccount))).subscribe(()=>{const c=se(this.activatedRoute.root).selectedAccount;this.store.selectFromAccount(c)}),this.store.updateDefaultCurrency(null===(o=null===(t=this.config.fields)||void 0===t?void 0:t.amount)||void 0===o?void 0:o.initialCurrency)}ngOnDestroy(){this.store.reset(),this.subscription$.unsubscribe()}applyDisabledCombination(t){const{disabledCombinations:o}=this.config||{};return this.store.debitAccounts$.pipe((0,T.h)(Boolean),(0,u.q)(1),(0,B.M)(this.store.toPayee$),(0,m.U)(([c,a])=>z(c,a,o,Q.FROM).some(g=>g.uuid===t)),(0,T.h)(Boolean))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(x),e.Y36(d.F0),e.Y36(d.gz),e.Y36(_e))},n.\u0275cmp=e.Xpm({type:n,selectors:[["bb-quick-transfer-journey"]],features:[e._Bn([_e,x])],decls:2,vars:3,consts:[["class","bb-quick-transfer",4,"ngIf"],[1,"bb-quick-transfer"],[3,"config",4,"ngIf"],["class","bb-quick-transfer__success-overlay",4,"ngIf"],[3,"successImg","successImgNoMotion","config",4,"ngIf"],[3,"paymentTypes","config"],[3,"config"],[1,"bb-quick-transfer__success-overlay"],[3,"successImg","successImgNoMotion","config"]],template:function(t,o){1&t&&(e.YNc(0,wn,7,7,"div",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,o.currentView$))},directives:[at,_t,lt,nt,ot,f.O5],pipes:[f.Ov],encapsulation:2,data:{animation:[Ao,mo,te.BX,te.VG]}}),n})();const gt=n=>null==n?void 0:n.map(i=>{let t;switch(i.productKindName){case"Term Deposit":t=i.principalAmount;break;case"Investment Account":t=i.currentInvestmentValue;break;default:t=i.bookedBalance}return{uuid:i.id,balance:t||0,name:i.displayName,currency:i.currency,number:i.IBAN||i.BBAN||i.BIC||i.number,externalTransferAllowed:i.externalTransferAllowed,productKindName:i.productKindName,defaultRecord:i}});let mt=(()=>{class n{constructor(t,o,c,a,r,g){this.productSummaryDataHttpService=t,this.contactService=o,this.paymentA2AService=c,this.paymentOrderService=a,this.transactionSigningHelper=r,this.configService=g,this.destroy$=new p.x,this.productSummaryParameters={resourceName:"Payments",privilege:"create",from:0,size:100,businessFunction:"A2A Transfer"};const{productSummaryQueryParameters:S,businessFunction:R}=this.configService||{};this.productSummaryParameters=Object.assign(Object.assign(Object.assign({},this.productSummaryParameters),S),R?{businessFunction:R}:void 0)}getDebitAccounts(){const{fields:t}=this.configService||{},{productKinds:o,mapItems:c,otherFilters:a}=(null==t?void 0:t.fromAccount)||{};return this.productSummaryDataHttpService.getArrangementsByBusinessFunction(Object.assign(Object.assign({},this.productSummaryParameters),{debitAccount:!0})).pipe((0,m.U)(r=>gt(r)),(0,m.U)(r=>rt(r,o)),(0,m.U)(r=>st(r,a)),(0,m.U)(r=>c&&(null==r?void 0:r.length)?c(r):r))}getCreditAccounts(){const{fields:t}=this.configService||{},{productKinds:o,mapItems:c,otherFilters:a}=(null==t?void 0:t.toAccount)||{};return this.productSummaryDataHttpService.getArrangementsByBusinessFunction(Object.assign(Object.assign({},this.productSummaryParameters),{creditAccount:!0})).pipe((0,m.U)(r=>gt(r)),(0,m.U)(r=>rt(r,o)),(0,m.U)(r=>st(r,a)),(0,m.U)(r=>c&&(null==r?void 0:r.length)?c(r):r))}getContacts(){const t=this.configService.fields.toAccount.mapContacts;return this.contactService.getContacts({}).pipe((0,m.U)(o=>null==o?void 0:o.map(c=>({uuid:c.id,name:c.name,number:c.accounts[0].accountNumber||c.accounts[0].IBAN,productKindName:E.contacts,defaultRecord:c}))),(0,m.U)(o=>t&&(null==o?void 0:o.length)?t(o):o))}getExternalAccounts(){return this.paymentA2AService.getAll().pipe((0,m.U)(t=>{var o;return null===(o=null==t?void 0:t.accounts)||void 0===o?void 0:o.filter(({status:c})=>"Active"===c).map(({externalAccountId:c,accountNickName:a,accountNumber:r,bankName:g})=>({uuid:c,name:a||g,number:r,productKindName:E.connectedAccounts}))}))}sendPaymentOrder(t){return this.paymentOrderService.postPaymentOrders({paymentOrdersPost:t}).pipe((0,W.z)(o=>{var c;return(null===(c=this.transactionSigningHelper)||void 0===c?void 0:c.isTransactionSigningResponse(o))?(this.paymentOrderResponse$=new Nt.t(1),this.handleTransactionSigning(o),this.paymentOrderResponse$.asObservable().pipe((0,u.q)(1))):(0,j.of)(o)}))}getPaymentProgressStatus(t){return this.paymentOrderService.getProgressStatusByPaymentOrderId({paymentOrderId:(null==t?void 0:t["payment-order-id"])||""},"body").pipe((0,H.j)("progressStatus"))}ngOnDestroy(){this.destroy$.next(void 0),this.destroy$.complete()}isPaymentConfirmed(t){return!!t&&t!==$.CONFIRMATION_PENDING&&t!==$.SENDING}handleTransactionSigning(t){if(!this.transactionSigningHelper)return;const o=t["payment-order-id"];o&&this.transactionSigningHelper.getTransactionInfo({data:t,asyncPollingOptions:{pollInterval:1e3,maxRetries:3,pollUntilFn:this.isPaymentConfirmed,complete$:this.destroy$},fetchFn:this.getPaymentProgressStatus.bind(this),onSuccess:this.onTransactionSigningSuccess.bind(this,o),onRejected:this.onTransactionFail.bind(this,o),onDeclined:this.onTransactionFail.bind(this),onError:this.onTransactionFail.bind(this)})}onTransactionSigningSuccess(t){this.paymentOrderService.getPaymentOrderById({paymentOrderId:t},"body").pipe((0,v.R)(this.destroy$)).subscribe(o=>{var c;null===(c=this.paymentOrderResponse$)||void 0===c||c.next(o)})}onTransactionFail(){var t;null===(t=this.paymentOrderResponse$)||void 0===t||t.next(void 0)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(N.IK),e.LFG(Y.Eq),e.LFG(h.Px),e.LFG(O.k4),e.LFG(It.YA,8),e.LFG(_e))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})(),At=(()=>{class n{constructor(t,o,c){this.actions$=t,this.httpService=o,this.communicationService=c,this.fetchAccounts=(0,k.GW)(()=>this.actions$.pipe((0,k.l4)(Te),(0,W.z)(()=>(0,l.a)([this.httpService.getCreditAccounts(),this.httpService.getDebitAccounts()]).pipe((0,m.U)(([a,r])=>Ge({debitAccounts:r,creditAccounts:a})),(0,X.K)(a=>(0,j.of)(Ze({error:new ce.UA({error:a||"Accounts Fetch Error"})}))))))),this.fetchContacts=(0,k.GW)(()=>this.actions$.pipe((0,k.l4)(he),(0,W.z)(()=>this.httpService.getContacts().pipe((0,m.U)(a=>Le({contacts:a})),(0,X.K)(a=>(0,j.of)($e({error:new ce.UA({error:a||"Contacts Fetch Error"})}))))))),this.fetchExtAccounts=(0,k.GW)(()=>this.actions$.pipe((0,k.l4)(Ne),(0,W.z)(()=>this.httpService.getExternalAccounts().pipe((0,m.U)(a=>Ye({extAccounts:a})),(0,X.K)(a=>(0,j.of)(we({error:new ce.UA({error:a||"External Accounts Fetch Error"})}))))))),this.sendTransferOrder=(0,k.GW)(()=>this.actions$.pipe((0,k.l4)(Ie),(0,W.z)(a=>this.httpService.sendPaymentOrder(a.reqData).pipe((0,m.U)(r=>(null==r?void 0:r.id)&&r.status!==$.REJECTED?(this.communicationService&&this.communicationService.transferSucceeded(),qe()):Oe({error:new ce.UA({error:"Transfer Order Post Error"})})),(0,X.K)(r=>(0,j.of)(Oe({error:r}))))))),this.setPayeeAccount=(0,k.GW)(()=>this.actions$.pipe((0,k.l4)(ve),(0,m.U)(()=>ae({view:C.FORM,focus:tt})))),this.pickFromAccount=(0,k.GW)(()=>this.actions$.pipe((0,k.l4)(Me),(0,m.U)(()=>ae({view:C.FORM,focus:re}))))}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(k.eX),e.LFG(mt),e.LFG(Pe,8))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();function No(n,i,t){return t.indexOf(n)===i}const vo=(0,_.Lq)(qn,(0,_.on)(Te,n=>Object.assign(Object.assign({},n),{accountsCallState:b.LOADING})),(0,_.on)(Ze,(n,{error:i})=>Object.assign(Object.assign({},n),{accountsCallState:{error:i}})),(0,_.on)(Ge,(n,{debitAccounts:i,creditAccounts:t})=>Object.assign(Object.assign({},n),{debitAccounts:i,creditAccounts:t,accountsCallState:b.LOADED})),(0,_.on)(he,n=>Object.assign(Object.assign({},n),{contactsCallState:b.LOADING})),(0,_.on)($e,(n,{error:i})=>Object.assign(Object.assign({},n),{contactsCallState:{error:i}})),(0,_.on)(Le,(n,{contacts:i})=>Object.assign(Object.assign({},n),{contacts:i,contactsCallState:b.LOADED})),(0,_.on)(Ne,n=>Object.assign(Object.assign({},n),{extAccountsCallState:b.LOADING})),(0,_.on)(Ye,(n,{extAccounts:i})=>Object.assign(Object.assign({},n),{extAccounts:i,extAccountsCallState:b.LOADED})),(0,_.on)(we,(n,{error:i})=>Object.assign(Object.assign({},n),{extAccountsCallState:{error:i}})),(0,_.on)(Me,(n,{accountId:i})=>{var t;const c=[...n.extAccounts||[],...n.debitAccounts||[]].find(r=>r.uuid===i)||{},a=(null==c?void 0:c.currency)||n.defaultCurrency;return Object.assign(Object.assign({},n),{fromAccount:c,amount:{amount:(null===(t=n.amount)||void 0===t?void 0:t.amount)||"",currency:a}})}),(0,_.on)(ve,(n,{id:i})=>{const o=[...n.extAccounts||[],...n.creditAccounts||[],...n.contacts||[]].find(c=>c.uuid===i);return Object.assign(Object.assign({},n),{payeeTo:o})}),(0,_.on)(We,(n,{isOpen:i})=>Object.assign(Object.assign({},n),{isModalOpen:i})),(0,_.on)(He,(n,{amount:i,defaultCurrency:t})=>{var o;const c={amount:i,currency:(null===(o=n.amount)||void 0===o?void 0:o.currency)?n.amount.currency:t};return Object.assign(Object.assign({},n),{amount:c})}),(0,_.on)(ae,(n,{view:i,focus:t})=>Object.assign(Object.assign({},n),{viewState:i,focusElement:t})),(0,_.on)(ze,n=>Object.assign(Object.assign({},n),{focusElement:void 0})),(0,_.on)(Ie,n=>Object.assign(Object.assign({},n),{transferOrderCallState:b.LOADING})),(0,_.on)(qe,n=>Object.assign(Object.assign({},n),{transferOrderCallState:b.LOADED,isModalOpen:!1,viewState:C.COMPLETE})),(0,_.on)(Oe,(n,{error:i})=>Object.assign(Object.assign({},n),{transferOrderCallState:{error:i},isModalOpen:!1,viewState:C.COMPLETE})),(0,_.on)(je,(n,{focus:i})=>Object.assign(Object.assign({},n),{transferOrderCallState:b.INIT,viewState:C.FORM,payeeTo:void 0,amount:void 0,fromAccount:void 0,touchedFields:[],focusElement:i||void 0})),(0,_.on)(Ve,(n,{fieldName:i})=>Object.assign(Object.assign({},n),{touchedFields:[...n.touchedFields,i].filter(No)})),(0,_.on)(Xe,(n,{currency:i})=>Object.assign(Object.assign({},n),{defaultCurrency:i})));let pt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[At],imports:[[_.Aw.forFeature(et,vo),k.sQ.forFeature([At])]]}),n})();const Mo=[be.w,A.hJ,L.O,J.Q,Qe.v,xe.z,Z.gn,ie.IQ,ne.p,P.zk,Se.C,oe.P,ee.i7,Ce.P];let Io=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[mt,_e,N.IK,Y.Eq,h.Px,O.k4],imports:[[f.ez,U.UX,pt,...Mo],pt,be.w,A.hJ,L.O,J.Q,Qe.v,xe.z,Z.gn,ie.IQ,ne.p,P.zk,Se.C,oe.P,ee.i7,Ce.P]}),n})();var Oo=s(314),yo=s(1135),Uo=s(8505),ko=s(4326),le=s(6476);const Et=new e.OlP("CampaignSpaceConfiguration injection token"),Do={portalName:"backbase-wc3",locale:"en-US",designMode:!1};let ue=(()=>{class n{constructor(t){this._config=Object.assign(Object.assign({},Do),t)}get portalName(){return this._config.portalName}get locale(){return this._config.locale}get designMode(){return this._config.designMode}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(Et,8))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})(),De=(()=>{class n{constructor(t,o){this.selectCampaignService=t,this.config=o}selectCampaign(t,o,c){return this.selectCampaignService.selectBanner({locale:this.config.locale,dimensions:o,spaceId:`${this.config.portalName}.${c}.${t}`})}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(le.Ml),e.LFG(ue))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();var Fo=s(9158),de=(()=>{return(n=de||(de={})).SELF="self",n.BLANK="blank",de;var n})(),fe=(()=>{return(n=fe||(fe={})).self="_self",n.blank="_blank",fe;var n})();(0,Fo.Ov)([{urlPattern:"gateway/api/engagement/client-api/v1/engagements/banner",method:"GET",responses:[{status:200,body:{targetUrl:"../../../../",targetUrlDisplayMode:de.BLANK,creative:{uuid:"34793c5e-bc0b-454b-b97a-994159d01904",dimensions:"300x250",entryAsset:"./index.html",basePath:"../../assets/creatives/"}},type:"json"}]}]);const Ko=["iframeRef"];function Jo(n,i){if(1&n&&(e.TgZ(0,"div",3)(1,"div",4)(2,"span"),e._uU(3),e.qZA()()()),2&n){const t=e.oxw(2);e.Q6J("ngStyle",t.widgetStyles),e.xp6(1),e.Q6J("ngStyle",t.widgetStyles),e.xp6(2),e.Oqu(t.placeholderTitle)}}function Po(n,i){if(1&n&&(e.ynx(0),e.YNc(1,Jo,4,3,"div",2),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.widgetStyles)}}function Go(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",3),e._UZ(1,"a",5),e.TgZ(2,"iframe",6,7),e.NdJ("load",function(){return e.CHM(t),e.oxw(2).iframeLoad()}),e.qZA()()}if(2&n){const t=e.oxw(2);e.Q6J("ngStyle",t.widgetStyles),e.xp6(1),e.Q6J("href",t.targetUrl,e.LSH)("ngStyle",t.widgetStyles)("target",t.targetMode),e.xp6(1),e.Q6J("ngStyle",t.widgetStyles)}}function Lo(n,i){if(1&n&&e.YNc(0,Go,4,5,"div",2),2&n){const t=e.oxw();e.Q6J("ngIf",t.widgetStyles&&t.campaign)}}let Yo=(()=>{class n{constructor(t,o,c,a,r){this.campaignService=t,this.config=o,this.renderer=c,this.cdr=a,this.basePath=r,this.name="",this.dimensions="300x250",this.pageName="index",this.responsive=!1,this.title="Campaign Space",this.placeholderTitle="",this.iframeContext=new yo.X(void 0),this.destroy$=new p.x,this.designMode=this.config.designMode}ngOnInit(){this.widgetStyles=this.getWidgetStyles(),this.designMode?this.initDesignMode():this.initLiveMode()}iframeLoad(){this.cdr.detectChanges();const t=this.iframeRef.nativeElement;this.renderer.setStyle(t,"width","100%"),this.renderer.setStyle(t,"border","0"),this.renderer.setStyle(t,"margin","0"),this.iframeContext.pipe((0,T.h)(Boolean),(0,Uo.b)(()=>{var o;return null===(o=t.contentWindow)||void 0===o?void 0:o.document.write(this.content)}),(0,ko.g)(300),(0,v.R)(this.destroy$)).subscribe(()=>{var o,c,a,r;let g=(null===(c=null===(o=t.contentWindow)||void 0===o?void 0:o.document)||void 0===c?void 0:c.body.scrollHeight)||0,S=0,R=0;do{this.renderer.setStyle(t,"height",`${g}px`),S=g,g=(null===(r=null===(a=t.contentWindow)||void 0===a?void 0:a.document)||void 0===r?void 0:r.body.scrollHeight)||0,R++}while(S!==g&&R<5);this.cdr.detectChanges()})}ngOnDestroy(){this.destroy$.next()}initDesignMode(){this.placeholderTitle=this.getPlaceholderTitle()}initLiveMode(){this.campaignService.selectCampaign(this.name,this.dimensions,this.pageName).pipe((0,v.R)(this.destroy$)).subscribe(t=>{!t||this.setLiveMode(t)})}setLiveMode(t){this.campaign=t,this.setTargetUrl(),this.content=function xo(n){return decodeURIComponent(atob(n).split("").map(function(i){return"%"+("00"+i.charCodeAt(0).toString(16)).slice(-2)}).join(""))}(t.creative.content),this.iframeContext.next(this.content),this.targetMode=fe[t.targetUrlDisplayMode||"self"],this.cdr.detectChanges()}setTargetUrl(){var t,o;const c=this.basePath.endsWith("/")?this.basePath.slice(0,-1):this.basePath,a=(null===(t=this.campaign)||void 0===t?void 0:t.targetUrl.startsWith("/"))?this.campaign.targetUrl.slice(1):null===(o=this.campaign)||void 0===o?void 0:o.targetUrl;this.targetUrl=`${c}/${a}`}getWidgetStyles(){const[t,o]=this.getDimensions(this.dimensions),c={width:this.responsive?"100%":this.toPx(t),height:this.toPx(o)};return this.responsive&&(c.maxWidth=this.toPx(t)),c}getPlaceholderTitle(){const[t,o]=this.getDimensions(this.dimensions);let c=`${this.title}`;return c+=this.responsive?` - Responsive Max-width: ${t}, Height: ${o}`:` - ${this.dimensions}`,c}toPx(t){return t+"px"}getDimensions(t){return t.split("x")}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(De),e.Y36(ue),e.Y36(e.Qsj),e.Y36(e.sBO),e.Y36(le.Km,8))},n.\u0275cmp=e.Xpm({type:n,selectors:[["bb-campaign-space-ang"]],viewQuery:function(t,o){if(1&t&&e.Gf(Ko,5),2&t){let c;e.iGM(c=e.CRH())&&(o.iframeRef=c.first)}},inputs:{name:"name",dimensions:"dimensions",pageName:"pageName",responsive:"responsive",title:"title"},features:[e._Bn([De])],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["campaignWithoutDesign",""],["class","bb-campaign-space-widget",3,"ngStyle",4,"ngIf"],[1,"bb-campaign-space-widget",3,"ngStyle"],[1,"bb-campaign-space-widget__placeholder",3,"ngStyle"],[1,"bb-campaign-space-widget__overlay",3,"href","ngStyle","target"],["sandbox","allow-same-origin","title","iframe-box",1,"bb-campaign-space-widget__iframe",3,"ngStyle","load"],["iframeRef",""]],template:function(t,o){if(1&t&&(e.YNc(0,Po,2,1,"ng-container",0),e.YNc(1,Lo,1,1,"ng-template",null,1,e.W1O)),2&t){const c=e.MAs(2);e.Q6J("ngIf",o.designMode)("ngIfElse",c)}},directives:[f.O5,f.PC],styles:["[_nghost-%COMP%]{position:relative}.bb-campaign-space-widget[_ngcontent-%COMP%]{position:relative;left:50%;transform:translate(-50%)}.bb-campaign-space-widget__overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0;z-index:1}.bb-campaign-space-widget__iframe[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0;z-index:0}.bb-campaign-space-widget__placeholder[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;position:relative;background-color:#0000001a;border:1px solid #bfbfbf;text-align:center}"]}),n})(),St=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[De,ue],imports:[[f.ez]]}),n})(),bt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[ue,le.Ml],imports:[[f.ez,St],St]}),n})();var Ct=s(570);let Zo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[{provide:le.Km,useExisting:Ct.iQ},{provide:Et,useValue:{portalName:"backbase-wc3:backbase-wc3:0",locale:"en-US",designMode:!1}}],imports:[[bt],bt]}),n})();var q=s(7448);function $o(n,i){1&n&&e.GkF(0)}const Fe=function(n){return{$implicit:n}};function wo(n,i){if(1&n&&(e.ynx(0),e.YNc(1,$o,1,0,"ng-container",8),e.BQk()),2&n){const t=i.$implicit;e.oxw();const o=e.MAs(6),c=e.MAs(8);e.xp6(1),e.Q6J("ngTemplateOutlet",t.permission?o:c)("ngTemplateOutletContext",e.VKq(2,Fe,t))}}function qo(n,i){1&n&&e.GkF(0)}function Ho(n,i){if(1&n&&(e.TgZ(0,"li",10),e.YNc(1,qo,1,0,"ng-container",8),e.qZA()),2&n){const t=e.oxw().$implicit;e.oxw();const o=e.MAs(10);e.xp6(1),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(2,Fe,t))}}function Wo(n,i){1&n&&e.YNc(0,Ho,2,4,"li",9),2&n&&e.Q6J("bbIfEntitlements",i.$implicit.permission)}function jo(n,i){1&n&&e.GkF(0)}function zo(n,i){if(1&n&&(e.TgZ(0,"li",10),e.YNc(1,jo,1,0,"ng-container",8),e.qZA()),2&n){const t=i.$implicit;e.oxw();const o=e.MAs(10);e.xp6(1),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(2,Fe,t))}}function Vo(n,i){if(1&n&&(e.TgZ(0,"a",11),e._UZ(1,"bb-icon-ui",12),e.TgZ(2,"span",13),e._uU(3),e.qZA()()),2&n){const t=i.$implicit;e.Q6J("routerLink",t.url),e.uIk("aria-label",t.title),e.xp6(1),e.Q6J("name",t.menuIcon),e.xp6(2),e.Oqu(t.title)}}let Xo=(()=>{class n{constructor(){this.links=[]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["bb-quick-actions"]],inputs:{links:"links"},decls:11,vars:1,consts:function(){let i;return i="Quick Actions",[[1,"card","d-block","p-2"],[1,"bb-block--sm","bb-heading-widget","heading-widget","pb-0","pt-3","px-3"],["heading",i,"data-role","quick-actions-header","headingType","h2","headingClasses","bb-heading-widget__heading"],[1,"bb-navigation","bb-navigation--link"],[4,"ngFor","ngForOf"],["linkBoxWithPermission",""],["linkBox",""],["linkElement",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","bb-navigation-item",4,"bbIfEntitlements"],[1,"bb-navigation-item"],[1,"bb-inline-stack","bb-navigation-item__link",3,"routerLink"],["size","md",1,"bb-inline-stack__item","bb-navigation-item__icon",3,"name"],[1,"bb-inline-stack__item","bb-navigation-item__title"]]},template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"bb-header-ui",2),e.qZA(),e.TgZ(3,"ul",3),e.YNc(4,wo,2,4,"ng-container",4),e.qZA()(),e.YNc(5,Wo,1,1,"ng-template",null,5,e.W1O),e.YNc(7,zo,2,4,"ng-template",null,6,e.W1O),e.YNc(9,Vo,4,4,"ng-template",null,7,e.W1O)),2&t&&(e.xp6(4),e.Q6J("ngForOf",o.links))},directives:[L.G,f.sg,f.tP,I.BE,d.yS,J.o],encapsulation:2}),n})(),ei=(()=>{class n{constructor(){this.quickActionLinks=[{menuIcon:"settings",title:"Manage Accounts",url:"/my-accounts/manage",permission:q._I.canViewMyAccounts},{menuIcon:"flight",title:"Set Travel Notice",url:"/self-service/manage-cards/travel-notice",permission:q._I.canViewManageCards},{menuIcon:"receipt",title:"Pay a Bill",url:"/billpay/pay-bills",permission:q._I.canViewPayABill},{menuIcon:"description",title:"Download Statements",url:"/self-service/download-statements",permission:q._I.canViewAccountStatements},{menuIcon:"notifications-active",title:"Manage Notifications",url:"/self-service/product-list/manage-notifications",permission:q._I.canViewManageNotifications},{menuIcon:"room",title:"Find Branches and ATMS",url:"/more/find-us",permission:q._I.canViewPlaces}]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["bb-accounts-transactions-journey-wrapper"]],decls:11,vars:1,consts:[[1,"container"],[1,"row"],[1,"col-md-8"],[1,"col-md-4","pt-5"],[1,"mb-4","mt-5"],["name","bb-campaign-space-ang-0"],[1,"card","bb-block--xl"],[1,"card"],[3,"links"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"router-outlet"),e.qZA(),e.TgZ(4,"div",3)(5,"div",4),e._UZ(6,"bb-campaign-space-ang",5),e.qZA(),e.TgZ(7,"div",6),e._UZ(8,"bb-quick-transfer-journey"),e.qZA(),e.TgZ(9,"div",7),e._UZ(10,"bb-quick-actions",8),e.qZA()()()()),2&t&&(e.xp6(10),e.Q6J("links",o.quickActionLinks))},directives:[d.lC,Yo,ft,Xo],encapsulation:2}),n})();var ti=s(400);const ni=[{path:"",component:ei,children:[{path:"",loadChildren:()=>Promise.all([s.e(4376),s.e(9565),s.e(4003),s.e(5612),s.e(3109),s.e(1156),s.e(1362),s.e(4978),s.e(6313),s.e(7223),s.e(9176)]).then(s.bind(s,6759)).then(n=>n.AccountsTransactionsJourneyBundleModule)}]}];let oi=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[{provide:Pe,useExisting:Oo.K},{provide:ti.Bn,useExisting:Ct.ao}],imports:[[Io,d.Bz.forChild(ni),f.ez,Zo,I.Gl]]}),n})()},314:(Ee,K,s)=>{"use strict";s.d(K,{K:()=>d});var f=s(5e3);let d=(()=>{class I{setupAccountsState(N){this.accountsState=N}refreshAccounts(){var N;null===(N=this.accountsState)||void 0===N||N.refreshAccounts()}transferSucceeded(){this.refreshAccounts()}}return I.\u0275fac=function(N){return new(N||I)},I.\u0275prov=f.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})()},4292:()=>{},2658:(Ee,K,s)=>{"use strict";s.d(K,{P:()=>Z,l:()=>_});var f=s(9808),d=s(5e3),I=s(3075),G=s(9144),N=s(9774),Y=s(682);const h=["amountInput"];function O(A,m){if(1&A&&(d.TgZ(0,"label",5),d._uU(1),d.qZA()),2&A){const l=d.oxw();d.s9C("for",l.id),d.xp6(1),d.hij(" ",l.label," ")}}function e(A,m){if(1&A&&(d.TgZ(0,"span",6)(1,"span",7),d.SDv(2,8),d.qZA(),d._uU(3),d.qZA()),2&A){const l=d.oxw();d.Q6J("id",l.componentUniqueId),d.xp6(3),d.hij(" ",l.currency," ")}}let _=(()=>{class A extends G.rA{constructor(l,u,p){super(l),this.locale=u,this.renderer=p,this.inputClass="bb-amount-input",this.componentUniqueId=`${this.id}-currency`,this.idListAttr=Y.hQ,this.placeholder="",this.wrapperClasses="",this.mapCurrency=!0,this._currency="",this._decimals=2,this.autoDecimal=!1,this.groupSeparator=(0,f.dv)(this.locale,f.wE.CurrencyGroup),this.decimalSeparator=(0,f.dv)(this.locale,f.wE.CurrencyDecimal),this.nonNumbersAndDecimalSeparatorRegex=new RegExp(`[^${this.decimalSeparator}\\d]`,"g"),this.endWithDecimal=new RegExp(`[${this.decimalSeparator}]$`,"g"),this.format={groupSeparator:this.groupSeparator,decimalSeparator:this.decimalSeparator,groupSize:3}}set currency(l){l&&(this._currency=this.mapCurrency?(0,f.jK)(l,"wide",this.locale):l,this._decimals=(0,f.E5)(l))}get currency(){return this._currency}writeValue(l){const u=null!=l?l:"";if("string"==typeof u){const p=u.replace(this.nonNumbersAndDecimalSeparatorRegex,"").slice(0,this.maxLength)||"";this.renderer.setProperty(this.amountEl.nativeElement,"value",this.formatAmount(p))}}formatAmount(l){if(l){if(l.includes(this.decimalSeparator)){const[u,p]=l.split(this.decimalSeparator);return new N(u||0).toFormat(this.format)+this.decimalSeparator+p.slice(0,this._decimals)}return new N(l).toFormat(this.format)}return l}updateAmountInput(){var l;const u=this.amountEl.nativeElement,p=(null===(l=u.value)||void 0===l?void 0:l.replace(this.nonNumbersAndDecimalSeparatorRegex,"").slice(0,this.maxLength))||"";this.renderer.setProperty(u,"value",this.formatAmount(p))}setSelection(l,u){const p=this.amountEl.nativeElement;this.renderer.setProperty(p,"selectionStart",l),this.renderer.setProperty(p,"selectionEnd",u)}correctInputValue(){var l;this.onBlur();const u=null===(l=this.amountEl)||void 0===l?void 0:l.nativeElement;if(u.value){const p=u.value.replace(this.endWithDecimal,"");this.renderer.setProperty(u,"value",p),this.updateOutputValue(p.replace(this.nonNumbersAndDecimalSeparatorRegex,""))}}onBackspace(l){this.autoDecimal&&l.selectionStart&&l.value[l.selectionStart-1]===this.groupSeparator&&this.setSelection(l.selectionStart-1,l.selectionStart-1)}onPress(l){const u=l.key,p=this.amountEl.nativeElement,y=p.value;if(y){const v=y.includes(this.decimalSeparator)&&u===this.decimalSeparator,H=new RegExp(`^[\\d${this.groupSeparator}]*[${this.decimalSeparator}]?\\d{0,${this._decimals}}$`,"g").test(y);if(v||!H){const B=p.selectionStart;y.indexOf(this.decimalSeparator)===B&&this.setSelection(B+1,B+1),l.preventDefault()}}}onInput(){const l=this.amountEl.nativeElement,u=l.value.trim(),p=l.selectionStart||0,y=u.length-p;this.updateAmountInput();const v=l.value.replace(this.nonNumbersAndDecimalSeparatorRegex,"").replace(this.endWithDecimal,"");if(v)if(1===u.length&&u!==this.decimalSeparator){const T=this.autoDecimal?u+this.decimalSeparator+"0".repeat(this._decimals):u;this.renderer.setProperty(l,"value",T),this.setSelection(1,1)}else{let T=l.value.length-y;u.includes(this.decimalSeparator)&&p>u.indexOf(this.decimalSeparator)&&T++,this.setSelection(T,T)}this.updateOutputValue(v)}updateOutputValue(l){this.onValueChange(l.replace(this.decimalSeparator,"."))}}return A.\u0275fac=function(l){return new(l||A)(d.Y36(d.sBO),d.Y36(d.soG),d.Y36(d.Qsj))},A.\u0275cmp=d.Xpm({type:A,selectors:[["bb-amount-input-ui"]],viewQuery:function(l,u){if(1&l&&d.Gf(h,7),2&l){let p;d.iGM(p=d.CRH())&&(u.amountEl=p.first)}},hostVars:2,hostBindings:function(l,u){2&l&&d.Tol(u.inputClass)},inputs:{placeholder:"placeholder",maxLength:"maxLength",wrapperClasses:"wrapperClasses",mapCurrency:"mapCurrency",currency:"currency",autoDecimal:"autoDecimal"},features:[d._Bn([{provide:I.JU,useExisting:(0,d.Gpc)(()=>A),multi:!0}]),d.qOj],decls:5,vars:12,consts:function(){let m;return m="Currency",[[3,"for",4,"ngIf"],[1,"bb-amount-input__field",3,"ngClass"],["type","text","autocomplete","off","autocorrect","off","autocapitalize","off","spellcheck","false","data-role","bb-amount-input-ui",1,"form-control","bb-text-align-end",3,"id","readOnly","disabled","required","placeholder","keydown","keydown.backspace","blur","input"],["amountInput",""],["data-role","bb-amount-input-currency","class","bb-amount-input__symbol",3,"id",4,"ngIf"],[3,"for"],["data-role","bb-amount-input-currency",1,"bb-amount-input__symbol",3,"id"],[1,"sr-only"],m]},template:function(l,u){if(1&l){const p=d.EpF();d.YNc(0,O,2,2,"label",0),d.TgZ(1,"div",1)(2,"input",2,3),d.NdJ("keydown",function(v){return u.onPress(v)})("keydown.backspace",function(){d.CHM(p);const v=d.MAs(3);return u.onBackspace(v)})("blur",function(){return u.correctInputValue()})("input",function(){return u.onInput()}),d.qZA(),d.YNc(4,e,4,2,"span",4),d.qZA()}2&l&&(d.Q6J("ngIf",u.label),d.xp6(1),d.Q6J("ngClass",u.wrapperClasses),d.xp6(1),d.s9C("id",u.id),d.Q6J("readOnly",u.readonly)("disabled",u.disabled)("required",u.required)("placeholder",u.placeholder),d.uIk("maxlength",u.maxLength)("aria-describedby",u.idListAttr(u.ariaDescribedby,u.componentUniqueId))("aria-invalid",u.ariaInvalid)("aria-labelledby",u.ariaLabelledby),d.xp6(2),d.Q6J("ngIf",u.currency))},directives:[f.O5,f.mk],encapsulation:2,changeDetection:0}),A})(),Z=(()=>{class A{}return A.\u0275fac=function(l){return new(l||A)},A.\u0275mod=d.oAB({type:A}),A.\u0275inj=d.cJS({imports:[[f.ez,I.u5,G.$B]]}),A})()},3823:(Ee,K,s)=>{"use strict";s.d(K,{Z:()=>N,_:()=>Y});var f=s(5e3),d=s(9808);let N=(()=>{class h{constructor(e,_){this.renderer=e,this.elementRef=_,this.negativeClass="bb-amount--negative",this.positiveClass="bb-amount--positive",this.amountValue=0,this.highlightValue=!0}set amount(e){this.amountValue="number"==typeof e?e:parseFloat(e)}set bbHighlight(e){this.highlightValue=""===e||e}get isPositive(){return this.amountValue>=0}ngOnChanges(e){e.negativeClass&&this.renderer.removeClass(this.elementRef.nativeElement,e.negativeClass.previousValue),e.positiveClass&&this.renderer.removeClass(this.elementRef.nativeElement,e.positiveClass.previousValue),(e.amount||e.highlight||e.bbHighlight)&&(this.renderer.removeClass(this.elementRef.nativeElement,this.negativeClass),this.renderer.removeClass(this.elementRef.nativeElement,this.positiveClass)),this.highlightValue&&this.renderer.addClass(this.elementRef.nativeElement,this.isPositive?this.positiveClass:this.negativeClass)}}return h.\u0275fac=function(e){return new(e||h)(f.Y36(f.Qsj),f.Y36(f.SBq))},h.\u0275dir=f.lG2({type:h,selectors:[["","bbHighlight",""]],inputs:{amount:"amount",bbHighlight:"bbHighlight",negativeClass:"negativeClass",positiveClass:"positiveClass"},features:[f.TTD]}),h})(),Y=(()=>{class h{}return h.\u0275fac=function(e){return new(e||h)},h.\u0275mod=f.oAB({type:h}),h.\u0275inj=f.cJS({imports:[[d.ez]]}),h})()}}]);