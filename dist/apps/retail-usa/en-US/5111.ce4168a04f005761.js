(self.webpackChunkretail_usa=self.webpackChunkretail_usa||[]).push([[5111],{6691:()=>{},2637:(J,L,i)=>{"use strict";i.d(L,{HE:()=>f,cf:()=>V,ck:()=>Ze,rp:()=>W});var e=i(5e3),m=i(9808),N=i(5357),u=i(6556),R=(i(6691),i(6305)),b=i(4004),r=i(8505),g=i(262),A=i(9646),M=i(7579),E=i(9841),p=i(2722),c=i(3900),S=i(4782),B=i(2843),y=i(5460),P=i(9287),K=i(3533),F=i(7555),Y=i(194),w=i(4951),k=i(5622),te=i(5556),x=i(6888),Z=i(7605),D=i(429);function ne(t,a){1&t&&e._UZ(0,"bb-badge-ui",7)}function ae(t,a){1&t&&e._UZ(0,"bb-badge-ui",8)}function oe(t,a){1&t&&e._UZ(0,"bb-badge-ui",9)}function ie(t,a){1&t&&e._UZ(0,"bb-badge-ui",10)}function le(t,a){1&t&&e._UZ(0,"bb-badge-ui",11)}function Ee(t,a){1&t&&e._UZ(0,"bb-badge-ui",12)}function se(t,a){if(1&t&&(e.TgZ(0,"div",11)(1,"div",12),e._UZ(2,"bb-icon-ui",13),e.qZA(),e.TgZ(3,"div",14),e.SDv(4,15),e.qZA()()),2&t){const _=e.oxw(2);e.xp6(4),e.pQV(_.payment.frequency),e.QtT(4)}}function Ae(t,a){if(1&t&&(e.TgZ(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7),e._uU(4),e.qZA(),e.YNc(5,se,5,1,"div",8),e.qZA(),e._UZ(6,"div",9)(7,"bb-billpay-payment-status-badge",10),e.qZA()()),2&t){const _=e.oxw();e.xp6(4),e.hij(" ",_.payment.payeeNickName||_.payment.payeeName," "),e.xp6(1),e.Q6J("ngIf",_.payment.recurring),e.xp6(2),e.Q6J("status",_.payment.status)}}function re(t,a){if(1&t&&(e.ynx(0),e.SDv(1,5),e.BQk()),2&t){const _=a.ngIf;e.xp6(1),e.pQV(_),e.QtT(1)}}function ce(t,a){if(1&t&&(e._uU(0),e.ALo(1,"bbDate")),2&t){const _=e.oxw();e.Oqu(e.xi3(1,1,null==_.paymentsGroup?null:_.paymentsGroup.date,"MMMM d"))}}function me(t,a){if(1&t){const _=e.EpF();e.TgZ(0,"li",6)(1,"bb-billpay-payment-card",7),e.NdJ("click",function(){const l=e.CHM(_).$implicit;return e.oxw().navigateToPayment(l.id,l.recurring)})("keydown.enter",function(){const l=e.CHM(_).$implicit;return e.oxw().navigateToPayment(l.id,l.recurring)}),e.qZA()()}if(2&t){const _=a.$implicit;e.xp6(1),e.Q6J("payment",_)}}function pe(t,a){if(1&t&&(e.TgZ(0,"li",8),e._UZ(1,"bb-billpay-payments-group",9),e.qZA()),2&t){const _=a.$implicit;e.xp6(1),e.Q6J("paymentsGroup",_)}}function ue(t,a){if(1&t&&(e.ynx(0),e.TgZ(1,"section")(2,"ul",6),e.YNc(3,pe,2,1,"li",7),e.qZA()(),e.BQk()),2&t){const _=e.oxw(3);e.xp6(3),e.Q6J("ngForOf",_.paymentsByDate)}}function Se(t,a){if(1&t&&(e.ynx(0),e.YNc(1,ue,4,1,"ng-container",2),e.BQk()),2&t){const _=e.oxw().ngIf;e.oxw();const n=e.MAs(9);e.xp6(1),e.Q6J("ngIf",_.length)("ngIfElse",n)}}function ye(t,a){if(1&t&&(e.ynx(0),e.YNc(1,Se,2,2,"ng-container",2),e.BQk()),2&t){const _=e.oxw(),n=e.MAs(7);e.xp6(1),e.Q6J("ngIf",!_.hasLoadingError)("ngIfElse",n)}}function de(t,a){1&t&&(e.TgZ(0,"div",10)(1,"div",11),e._UZ(2,"bb-loading-indicator-ui",12),e.qZA()())}function Me(t,a){1&t&&(e.TgZ(0,"div",10)(1,"div",11)(2,"div",13),e._UZ(3,"bb-empty-state-ui",14),e.qZA()()())}function Ne(t,a){1&t&&(e.TgZ(0,"div",10)(1,"div",11)(2,"div",13),e._UZ(3,"bb-empty-state-ui",15),e.qZA()()())}function ge(t,a){if(1&t&&(e.TgZ(0,"div")(1,"div",5),e._UZ(2,"bb-icon-ui",15),e.TgZ(3,"span",16),e._uU(4),e.qZA()()()),2&t){const _=e.oxw();e.Gre("bb-block ",null!=_.payment&&_.payment.recurring?"bb-block--sm":"bb-block--lg",""),e.xp6(4),e.Oqu(null==_.payment||null==_.payment.paymentAccount?null:_.payment.paymentAccount.accountNickName)}}function Be(t,a){if(1&t&&(e.TgZ(0,"div",5),e._UZ(1,"bb-icon-ui",18),e.TgZ(2,"span",19),e.SDv(3,20),e.qZA()()),2&t){const _=e.oxw(2);e.xp6(3),e.pQV(null==_.payment?null:_.payment.frequency),e.QtT(3)}}function be(t,a){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,Be,4,1,"div",17),e.qZA()),2&t){const _=e.oxw();e.Tol((null==_.payment?null:_.payment.status)===_.paymentStatus.INPROCESS||(null==_.payment?null:_.payment.status)===_.paymentStatus.PENDING?"bb-block bb-block--lg":""),e.xp6(1),e.Q6J("ngIf",null==_.payment?null:_.payment.frequency)}}function Pe(t,a){1&t&&(e.TgZ(0,"div"),e._UZ(1,"bb-alert-ui",21),e.qZA())}function Re(t,a){if(1&t){const _=e.EpF();e.TgZ(0,"div",22)(1,"button",23),e.NdJ("click",function(){e.CHM(_);const o=e.oxw();return o.editPayment(o.payment)}),e.SDv(2,24),e.qZA(),e.TgZ(3,"button",25),e.NdJ("click",function(){return e.CHM(_),e.oxw().cancelPayment()}),e.SDv(4,26),e.qZA()()}}function De(t,a){if(1&t&&(e.TgZ(0,"div",1)(1,"div",2),e._UZ(2,"bb-header-ui",27),e.qZA(),e._UZ(3,"bb-billpay-payment-review-card",28),e.qZA()),2&t){const _=e.oxw();e.xp6(3),e.Q6J("paymentReview",_.parseToReview(_.payment,_.payee))("accountNumberMask",_.accountNumberMasked)}}function fe(t,a){1&t&&e._UZ(0,"bb-header-ui",4)}function Te(t,a){1&t&&(e.TgZ(0,"span",5),e.SDv(1,6),e.qZA())}function Le(t,a){if(1&t){const _=e.EpF();e.TgZ(0,"div",7)(1,"button",8),e.NdJ("click",function(){return e.CHM(_),e.oxw().resolveModal(!0)}),e.SDv(2,9),e.qZA(),e.TgZ(3,"button",10),e.NdJ("click",function(){return e.CHM(_),e.oxw().resolveModal(!1)}),e.SDv(4,11),e.qZA()()}}const Oe=["notificationHeader"],Ie=["notificationMessage"];function Ce(t,a){if(1&t){const _=e.EpF();e.TgZ(0,"bb-billpay-payment-details",9),e.NdJ("paymentCancelling",function(){return e.CHM(_),e.oxw(3).onPaymentDeleteFlowStarted()})("paymentEditing",function(o){return e.CHM(_),e.oxw(3).onEditPayment(o)}),e.qZA()}if(2&t){const _=e.oxw().ngIf,n=e.oxw(2);e.Q6J("payment",null==_?null:_.payment)("payee",null==_?null:_.payee)("accountNumberMasked",n.config.accountNumberMasked)}}function Ue(t,a){if(1&t&&(e.TgZ(0,"span",10),e.SDv(1,11),e.qZA()),2&t){const _=e.oxw().ngIf;e.xp6(1),e.pQV((null==_.payment?null:_.payment.payeeNickName)&&(null==_.payment?null:_.payment.payeeNickName)+" ("+(null==_.payment?null:_.payment.payeeName)+")"||(null==_.payment?null:_.payment.payeeName)),e.QtT(1)}}function Ge(t,a){if(1&t&&(e.ynx(0),e.TgZ(1,"section"),e.YNc(2,Ce,1,3,"bb-billpay-payment-details",7),e.qZA(),e.YNc(3,Ue,2,1,"ng-template",null,8,e.W1O),e.BQk()),2&t){const _=a.ngIf;e.xp6(2),e.Q6J("ngIf",_.payment&&_.payee)}}const ve=function(t,a){return{payment:t,payee:a}};function Ye(t,a){if(1&t&&(e.ynx(0),e.YNc(1,Ge,5,1,"ng-container",2),e.ALo(2,"async"),e.ALo(3,"async"),e.BQk()),2&t){const _=e.oxw(),n=e.MAs(10);e.xp6(1),e.Q6J("ngIf",e.WLB(6,ve,e.lcZ(2,2,_.payment$),e.lcZ(3,4,_.payee$)))("ngIfElse",n)}}function he(t,a){if(1&t){const _=e.EpF();e.TgZ(0,"bb-billpay-payments-delete-modal",12),e.NdJ("resolve",function(o){return e.CHM(_),e.oxw().onModalResolve(o)}),e.qZA()}}function Je(t,a){1&t&&(e.TgZ(0,"span",13),e.SDv(1,14),e.qZA())}function Ke(t,a){1&t&&(e.TgZ(0,"div",15)(1,"div",16)(2,"div",17),e._UZ(3,"bb-empty-state-ui",18),e.qZA()()())}function Fe(t,a){1&t&&(e.TgZ(0,"div",15)(1,"div",16),e._UZ(2,"bb-loading-indicator-ui",19),e.qZA()())}const W=new e.OlP("ManageBillPaymentsJourneyJourneyConfiguration injection token");var f=(()=>{return(t=f||(f={})).PENDING="PENDING",t.HISTORICAL="HISTORICAL",t.ALL="ALL",f;var t})();const H={notificationDismissTime:5e3,pageSize:0,pageFilter:f.PENDING,accountNumberMasked:!1,pageTitle:"Pending payments"};let C=(()=>{class t{constructor(_){_=_||{},this._config=Object.assign(Object.assign({},H),_)}get defaults(){return H}get notificationDismissTime(){return this._config.notificationDismissTime}get pageSize(){return this._config.pageSize}get pageFilter(){return this._config.pageFilter}get accountNumberMasked(){return this._config.accountNumberMasked}get pageTitle(){return this._config.pageTitle}}return t.\u0275fac=function(_){return new(_||t)(e.LFG(W,8))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),t})();class V{}let U=(()=>{class t{constructor(_,n,o){this.router=_,this.route=n,this.communicationService=o}navigateToPayment(_,n=!1){this.router.navigate([_],{queryParams:{type:n?u.Oq:u.N$},relativeTo:this.route})}navigateToPaymentsList(_){this.communicationService?_===f.HISTORICAL?this.communicationService.navigateToPaymentsHistory():this.communicationService.navigateToPaymentsList():this.router.navigate(["./"])}navigateToEditRecurringPayment(_){var n;null===(n=this.communicationService)||void 0===n||n.navigateToEditRecurringPayment(_)}navigateToEditOneOffPayment(_){var n;null===(n=this.communicationService)||void 0===n||n.navigateToEditOneOffPayment(_)}}return t.\u0275fac=function(_){return new(_||t)(e.LFG(N.F0),e.LFG(N.gz),e.LFG(V,8))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),t})();var I=(()=>{return(t=I||(I={})).PENDING="PENDING",t.INPROCESS="INPROCESS",t.PROCESSED="PROCESSED",t.FAILED="FAILED",t.CANCELED="CANCELED",t.UNAPPROVED="UNAPPROVED",I;var t})(),G=(()=>{return(t=G||(G={})).PENDING="PENDING",t.HISTORICAL="HISTORICAL",t.ALL="ALL",G;var t})();let v=(()=>{class t{constructor(_,n){this.paymentsData=_,this.payeesData=n}getPayments(_,n){return this.paymentsData.getBillPayPayments(Object.assign({status:n,direction:(l=n,l===G.PENDING?u.Nm.ASC:u.Nm.DESC)},_&&{size:_}));var l}getPayment(_,n=u.N$){return n===u.N$?this.paymentsData.getPaymentById({id:_}):this.paymentsData.getRecurringPaymentById({id:_})}getPayee(_){return this.payeesData.getPayeeById({id:_})}deletePayment(_,n=u.N$){return n===u.N$?this.paymentsData.deletePaymentById({id:_}):this.paymentsData.deleteRecurringPaymentById({id:_})}}return t.\u0275fac=function(_){return new(_||t)(e.LFG(R.D6),e.LFG(R.cE))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),t})(),h=(()=>{class t{constructor(){this.paymentStatus=I}}return t.\u0275fac=function(_){return new(_||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["bb-billpay-payment-status-badge"]],inputs:{status:"status"},decls:7,vars:7,consts:function(){let a,_,n,o,l,d;return a="In progress",_="Pending",n="Failed",o="Canceled",l="Unapproved",d="Processed",[[3,"ngSwitch"],["text",a,4,"ngSwitchCase"],["color","warning","text",_,4,"ngSwitchCase"],["color","danger","text",n,4,"ngSwitchCase"],["color","danger","text",o,4,"ngSwitchCase"],["color","danger","text",l,4,"ngSwitchCase"],["color","success","text",d,4,"ngSwitchCase"],["text",a],["color","warning","text",_],["color","danger","text",n],["color","danger","text",o],["color","danger","text",l],["color","success","text",d]]},template:function(_,n){1&_&&(e.ynx(0,0),e.YNc(1,ne,1,0,"bb-badge-ui",1),e.YNc(2,ae,1,0,"bb-badge-ui",2),e.YNc(3,oe,1,0,"bb-badge-ui",3),e.YNc(4,ie,1,0,"bb-badge-ui",4),e.YNc(5,le,1,0,"bb-badge-ui",5),e.YNc(6,Ee,1,0,"bb-badge-ui",6),e.BQk()),2&_&&(e.Q6J("ngSwitch",n.status),e.xp6(1),e.Q6J("ngSwitchCase",n.paymentStatus.INPROCESS),e.xp6(1),e.Q6J("ngSwitchCase",n.paymentStatus.PENDING),e.xp6(1),e.Q6J("ngSwitchCase",n.paymentStatus.FAILED),e.xp6(1),e.Q6J("ngSwitchCase",n.paymentStatus.CANCELED),e.xp6(1),e.Q6J("ngSwitchCase",n.paymentStatus.UNAPPROVED),e.xp6(1),e.Q6J("ngSwitchCase",n.paymentStatus.PROCESSED))},directives:[K.F,m.RF,m.n9],encapsulation:2,changeDetection:0}),t})(),$=(()=>{class t{constructor(){this.isNegativeAmount=!1}getFormattedAmount(_){return`${this.isNegativeAmount?"-":""}${_}`}}return t.\u0275fac=function(_){return new(_||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["bb-billpay-payment-card"]],inputs:{payment:"payment",isNegativeAmount:"isNegativeAmount"},decls:4,vars:2,consts:function(){let a,_;return a="{VAR_SELECT, select, WEEKLY {weekly} EVERY_2_WEEKS {every 2 weeks} EVERY_4_WEEKS {every 4\n            weeks} TWICE_A_MONTH {twice a month} MONTHLY {monthly} EVERY_2_MONTHS {every 2 months} EVERY_3_MONTHS {every\n            3 months} EVERY_4_MONTHS {every 4 months} EVERY_6_MONTHS {every 6 months} ANNUALLY {annually}}",a=e.Zx4(a,{VAR_SELECT:"\ufffd0\ufffd"}),_=" Recurring " + a + " ",[[1,"bb-stack"],["class","bb-stack__item bb-stack__item--fill","data-role","payment-item",4,"ngIf"],["data-role","payment-item-amount",1,"col-4","col-md-3","col-lg-2","bb-stack__item","bb-text-align-right"],["data-role","amount",1,"bb-text-bold",3,"amount"],["data-role","payment-item",1,"bb-stack__item","bb-stack__item--fill"],[1,"bb-stack","bb-stack--wrap"],[1,"bb-stack__item","bb-stack__item--fill"],["data-role","payment-item-title",1,"bb-text-bold"],["class","bb-stack bb-stack--align-top",4,"ngIf"],[1,"bb-stack__break","bb-stack__break--sm-down"],["data-role","payment-item-badge",1,"bb-stack__item","bb-text-align-right","bb-text-align-left--sm-down",3,"status"],[1,"bb-stack","bb-stack--align-top"],[1,"bb-stack__item","bb-stack__item--spacing-sm"],["data-role","payment-item-recurring-icon","size","sm","name","repeat","color","secondary"],["data-role","payment-item-recurring-label",1,"bb-stack__item","bb-subtitle","bb-text-support"],_]},template:function(_,n){1&_&&(e.TgZ(0,"div",0),e.YNc(1,Ae,8,3,"div",1),e.TgZ(2,"div",2),e._UZ(3,"bb-amount-ui",3),e.qZA()()),2&_&&(e.xp6(1),e.Q6J("ngIf",n.payment),e.xp6(2),e.Q6J("amount",n.payment&&n.getFormattedAmount(n.payment.amount.amount)))},directives:[P.o,h,F.G4,m.O5],encapsulation:2}),t})();var T=(()=>{return(t=T||(T={})).yesterday="yesterday",t.today="today",t.tomorrow="tomorrow",T;var t})();let Q=(()=>{class t{constructor(_){this.router=_}getDateLabel(_){const o=(new Date).setHours(0,0,0,0),l=new Date(_).setHours(0,0,0,0);switch(Math.round((l-o)/864e5)){case-1:return T.yesterday;case 0:return T.today;case 1:return T.tomorrow;default:return}}navigateToPayment(_,n){this.router.navigateToPayment(_,n)}}return t.\u0275fac=function(_){return new(_||t)(e.Y36(U))},t.\u0275cmp=e.Xpm({type:t,selectors:[["bb-billpay-payments-group"]],inputs:{paymentsGroup:"paymentsGroup"},decls:7,vars:5,consts:function(){let a,_;return a="{VAR_SELECT, select, yesterday {Yesterday} today {Today} tomorrow {Tomorrow}}",a=e.Zx4(a,{VAR_SELECT:"\ufffd0\ufffd"}),_=" " + a + " ",[["role","heading","aria-level","2","data-role","date-label",1,"bb-text-support","bb-subheader","bb-block","bb-block--lg"],[4,"ngIf","ngIfElse"],["formattedDate",""],[1,"bb-list"],["class","bb-list__item bb-list__item--no-separator",4,"ngFor","ngForOf"],_,[1,"bb-list__item","bb-list__item--no-separator"],["tabindex","0","role","button","isNegativeAmount","true",3,"payment","click","keydown.enter"]]},template:function(_,n){if(1&_&&(e.TgZ(0,"section")(1,"div",0),e.YNc(2,re,2,1,"ng-container",1),e.YNc(3,ce,2,4,"ng-template",null,2,e.W1O),e.qZA(),e.TgZ(5,"ul",3),e.YNc(6,me,2,1,"li",4),e.qZA()()),2&_){const o=e.MAs(4);e.xp6(1),e.Q2q("id","payments-group-heading-",null==n.paymentsGroup||null==n.paymentsGroup.payments[0]?null:n.paymentsGroup.payments[0].id,""),e.xp6(1),e.Q6J("ngIf",n.getDateLabel(null==n.paymentsGroup?null:n.paymentsGroup.date))("ngIfElse",o),e.xp6(3),e.Q2q("aria-labelledby","payments-group-heading-",null==n.paymentsGroup||null==n.paymentsGroup.payments[0]?null:n.paymentsGroup.payments[0].id,""),e.xp6(1),e.Q6J("ngForOf",null==n.paymentsGroup?null:n.paymentsGroup.payments)}},directives:[$,m.O5,m.sg],pipes:[Y.y],encapsulation:2}),t})(),z=(()=>{class t{constructor(_,n){this.dataService=_,this.config=n,this.hasLoadingError=!1,this.paymentsByDate=[]}ngOnInit(){this.payments$=this.dataService.getPayments(this.config.pageSize,this.config.pageFilter).pipe((0,b.U)(({payments:_})=>_),(0,r.b)(_=>{this.paymentsByDate=this.groupPaymentsByDate(_)}),(0,g.K)(()=>(this.hasLoadingError=!0,(0,A.of)([]))))}groupPaymentsByDate(_){return _.reduce((o,l)=>{const d=o[o.length-1],{paymentDate:s}=l;return d&&this.isSameDay(d.date,s)?d.payments.push(l):o.push({date:s,payments:[l]}),o},[])}isSameDay(_,n){return new Date(_).setHours(0,0,0,0)===new Date(n).setHours(0,0,0,0)}}return t.\u0275fac=function(_){return new(_||t)(e.Y36(v),e.Y36(C))},t.\u0275cmp=e.Xpm({type:t,selectors:[["bb-billpay-list-view"]],decls:10,vars:5,consts:function(){let a,_,n,o;return a="Payments list is not loading",_="Try to reload the page or contact support",n="No bill payments",o="You don't have any bill payments to display",[[1,"bb-block","bb-block--lg"],["headingType","h1",3,"heading"],[4,"ngIf","ngIfElse"],["loadingState",""],["errorState",""],["emptyState",""],[1,"card","card-lg","bb-list"],["class","card-section",4,"ngFor","ngForOf"],[1,"card-section"],[3,"paymentsGroup"],[1,"card","card-lg"],[1,"card-body"],["loaderSize","lg"],[1,"bb-state-container"],["data-role","error-state","iconSize","xxl","iconModifier","error-outline","title",a,"subtitle",_],["data-role","empty-state","iconSize","xxl","iconModifier","payments","title",n,"subtitle",o]]},template:function(_,n){if(1&_&&(e.TgZ(0,"div",0),e._UZ(1,"bb-header-ui",1),e.qZA(),e.YNc(2,ye,2,2,"ng-container",2),e.ALo(3,"async"),e.YNc(4,de,3,0,"ng-template",null,3,e.W1O),e.YNc(6,Me,4,0,"ng-template",null,4,e.W1O),e.YNc(8,Ne,4,0,"ng-template",null,5,e.W1O)),2&_){const o=e.MAs(5);e.xp6(1),e.Q6J("heading",n.config.pageTitle),e.xp6(1),e.Q6J("ngIf",e.lcZ(3,3,n.payments$))("ngIfElse",o)}},directives:[y.G,Q,w.Q,k.s,m.O5,m.sg],pipes:[m.Ov],encapsulation:2}),t})(),q=(()=>{class t{constructor(_){this.paymentParserService=_,this.accountNumberMasked=!0,this.paymentCancelling=new e.vpe,this.paymentEditing=new e.vpe,this.paymentStatus=I}parseToReview(_,n){return this.paymentParserService.paymentAndPayeeResponsesToReview(_,n)}cancelPayment(){this.paymentCancelling.emit()}editPayment(_){this.paymentEditing.next({id:_.id,recurring:_.recurring})}}return t.\u0275fac=function(_){return new(_||t)(e.Y36(u.$c))},t.\u0275cmp=e.Xpm({type:t,selectors:[["bb-billpay-payment-details"]],inputs:{payment:"payment",payee:"payee",accountNumberMasked:"accountNumberMasked"},outputs:{paymentCancelling:"paymentCancelling",paymentEditing:"paymentEditing"},decls:20,vars:15,consts:function(){let a,_,n,o,l,d;return a="{VAR_SELECT, select, WEEKLY {weekly} EVERY_2_WEEKS {every 2 weeks} EVERY_4_WEEKS {every 4\n          weeks} TWICE_A_MONTH {twice a month} MONTHLY {monthly} EVERY_2_MONTHS {every 2 months} EVERY_3_MONTHS {every 3\n          months} EVERY_4_MONTHS {every 4 months} EVERY_6_MONTHS {every 6 months} ANNUALLY {annually}}",a=e.Zx4(a,{VAR_SELECT:"\ufffd0\ufffd"}),_="Recurring " + a + " ",n="Payment in progress, it cannot be edited or canceled",o=" Edit payment ",l=" Cancel payment ",d="Full details",[[1,"card","card-lg"],[1,"card-section"],[1,"bb-block","bb-block--md"],["data-role","payee-name","headingType","h2",3,"heading"],[1,"bb-block","bb-block--xl"],[1,"bb-stack"],["data-role","payment-amount",1,"bb-stack__item","bb-text-bold",3,"amount"],[1,"bb-stack__item"],["data-role","payment-status",3,"status"],["name","calendar-today","color","muted",1,"bb-stack__item","bb-stack__item--spacing-sm"],["data-role","payment-date",1,"bb-stack__item"],[3,"class",4,"ngIf"],[4,"ngIf"],["data-role","payment-buttons","class","bb-stack",4,"ngIf"],["class","card-section",4,"ngIf"],["name","savings-accounts","color","muted",1,"bb-stack__item","bb-stack__item--spacing-sm"],["data-role","payment-account-nickname",1,"bb-stack__item"],["class","bb-stack",4,"ngIf"],["name","repeat","color","muted",1,"bb-stack__item","bb-stack__item--spacing-sm"],["data-role","payment-recurring-label",1,"bb-stack__item"],_,["modifier","info","title",n,"data-role","alert-message"],["data-role","payment-buttons",1,"bb-stack"],["bbButton","","data-role","edit-payment-button","color","secondary",1,"bb-stack__item",3,"click"],o,["bbButton","","data-role","cancel-payment-button","color","danger",1,"bb-stack__item",3,"click"],l,["headingType","h2","heading",d],[3,"paymentReview","accountNumberMask"]]},template:function(_,n){1&_&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"bb-header-ui",3),e.qZA(),e.TgZ(4,"div",4)(5,"div",5),e._UZ(6,"bb-amount-ui",6),e.TgZ(7,"div",7),e._UZ(8,"bb-billpay-payment-status-badge",8),e.qZA()()(),e.TgZ(9,"div")(10,"div",5),e._UZ(11,"bb-icon-ui",9),e.TgZ(12,"span",10),e._uU(13),e.ALo(14,"bbDate"),e.qZA()()(),e.YNc(15,ge,5,4,"div",11),e.YNc(16,be,2,4,"div",11),e.YNc(17,Pe,2,0,"div",12),e.YNc(18,Re,5,0,"div",13),e.qZA(),e.YNc(19,De,4,2,"div",14),e.qZA()),2&_&&(e.xp6(3),e.s9C("heading",(null==n.payment?null:n.payment.payeeNickName)&&(null==n.payment?null:n.payment.payeeNickName)+" ("+(null==n.payment?null:n.payment.payeeName)+")"||(null==n.payment?null:n.payment.payeeName)),e.xp6(3),e.Q6J("amount",-(null==n.payment||null==n.payment.amount?null:n.payment.amount.amount)),e.xp6(2),e.Q6J("status",null==n.payment?null:n.payment.status),e.xp6(1),e.Gre("bb-block ",null!=n.payment&&n.payment.recurring||null!=n.payment&&null!=n.payment.paymentAccount&&n.payment.paymentAccount.accountNickName?"bb-block--sm":"bb-block--lg",""),e.xp6(4),e.Oqu(e.xi3(14,12,null==n.payment?null:n.payment.paymentDate,"fullDate")),e.xp6(2),e.Q6J("ngIf",null==n.payment||null==n.payment.paymentAccount?null:n.payment.paymentAccount.accountNickName),e.xp6(1),e.Q6J("ngIf",n.payment&&(null==n.payment?null:n.payment.recurring)&&(null==n.payment?null:n.payment.frequency)),e.xp6(1),e.Q6J("ngIf",(null==n.payment?null:n.payment.status)===n.paymentStatus.INPROCESS),e.xp6(1),e.Q6J("ngIf",n.payment&&n.payment.status===n.paymentStatus.PENDING),e.xp6(1),e.Q6J("ngIf",n.payment&&n.payee))},directives:[y.G,F.G4,h,P.o,x.w,u.nL,m.O5,Z.Hq],pipes:[Y.y],encapsulation:2,changeDetection:0}),t})(),j=(()=>{class t{constructor(){this.resolve=new e.vpe}resolveModal(_){this.resolve.emit(_)}}return t.\u0275fac=function(_){return new(_||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["bb-billpay-payments-delete-modal"]],outputs:{resolve:"resolve"},decls:7,vars:1,consts:function(){let a,_,n,o;return a="Cancel payment?",_="Are you sure you want to cancel this payment? This action can not be undone.",n=" Cancel payment ",o=" Keep payment ",[["data-role","delete-payment-modal",3,"isOpen","cancel"],["bbCustomModalHeader",""],["bbCustomModalBody",""],["bbCustomModalFooter",""],["data-role","delete-payment-modal-header","headingType","h2","heading",a],["data-role","delete-payment-modal-body"],_,[1,"d-flex","flex-wrap","flex-row-reverse","w-100"],["bbButton","","color","danger","data-role","confirm-cancelling-button",1,"col-sm-auto","col-xs-12",3,"click"],n,["bbButton","","color","secondary","data-role","keep-payment-button",1,"mt-2","mt-sm-0","mr-sm-3","col-sm-auto","col-xs-12",3,"click"],o]},template:function(_,n){1&_&&(e.TgZ(0,"bb-modal-ui",0),e.NdJ("cancel",function(){return n.resolveModal(!1)}),e.TgZ(1,"bb-modal-header-ui"),e.YNc(2,fe,1,0,"ng-template",1),e.qZA(),e.TgZ(3,"bb-modal-body-ui"),e.YNc(4,Te,2,0,"ng-template",2),e.qZA(),e.TgZ(5,"bb-modal-footer-ui"),e.YNc(6,Le,5,0,"ng-template",3),e.qZA()()),2&_&&e.Q6J("isOpen",!0)},directives:[D.zS,D.Rb,y.G,D.KF,D.YI,D.cA,D.Qd,D.yk,Z.Hq],encapsulation:2}),t})(),X=(()=>{class t{constructor(_,n,o,l,d){this.config=_,this.dataService=n,this.route=o,this.routerService=l,this.notificationService=d,this.notificationHeaderTemplate="",this.notificationMessageTemplate="",this.hasLoadingError=!1,this.isDeleteModalOpened=!1,this.id$=this.route.paramMap.pipe((0,b.U)(s=>s.get("id")||"")),this.paymentType$=this.route.queryParamMap.pipe((0,b.U)(s=>s.get("type")||u.N$)),this.destroy$=new M.x,this.payment$=(0,E.a)([this.id$,this.paymentType$]).pipe((0,p.R)(this.destroy$),(0,c.w)(([s,We])=>this.dataService.getPayment(s,We)),(0,b.U)(({payment:s})=>s),(0,S.d)(1),(0,g.K)(()=>(this.hasLoadingError=!0,(0,A.of)(void 0)))),this.payee$=this.payment$.pipe((0,c.w)(s=>s&&!s.payeeElectronic&&s.payeeID?this.dataService.getPayee(s.payeeID):(0,B._)("Payee can't be retrieved")),(0,b.U)(({payee:s})=>s),(0,g.K)(()=>(0,A.of)({})))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onPaymentDeleteFlowStarted(){this.isDeleteModalOpened=!0}onEditPayment(_){_.recurring?this.routerService.navigateToEditRecurringPayment(_.id):this.routerService.navigateToEditOneOffPayment(_.id)}onModalResolve(_){const n=this.deletePayment().pipe((0,r.b)(()=>{this.routerService.navigateToPaymentsList(this.config.pageFilter),this.notificationService.showNotification({header:this.notificationHeaderTemplate,message:this.notificationMessageTemplate,modifier:"success",ttl:this.dismissTimeout})}));(_?n:(0,A.of)()).subscribe({complete:()=>this.isDeleteModalOpened=!1})}deletePayment(){return(0,E.a)([this.id$,this.paymentType$]).pipe((0,p.R)(this.destroy$),(0,c.w)(([_,n])=>this.dataService.deletePayment(_,n)))}get dismissTimeout(){if(void 0===this.config.notificationDismissTime)throw new Error("Dismiss timeout value not found");return this.config.notificationDismissTime}}return t.\u0275fac=function(_){return new(_||t)(e.Y36(C),e.Y36(v),e.Y36(N.gz),e.Y36(U),e.Y36(te.gq))},t.\u0275cmp=e.Xpm({type:t,selectors:[["bb-billpay-payment-details-view"]],viewQuery:function(_,n){if(1&_&&(e.Gf(Oe,5),e.Gf(Ie,5)),2&_){let o;e.iGM(o=e.CRH())&&(n.notificationHeaderTemplate=o.first),e.iGM(o=e.CRH())&&(n.notificationMessageTemplate=o.first)}},decls:11,vars:4,consts:function(){let a,_,n,o;return a="Payment to " + "\ufffd0\ufffd" + " has been canceled successfully",_="Payment canceled",n="Payment is not loading",o="Try to reload the page or contact support",[[1,"bb-block","bb-block--lg"],["headingType","h1",3,"heading"],[4,"ngIf","ngIfElse"],[3,"resolve",4,"ngIf"],["notificationHeader",""],["errorState",""],["loadingState",""],[3,"payment","payee","accountNumberMasked","paymentCancelling","paymentEditing",4,"ngIf"],["notificationMessage",""],[3,"payment","payee","accountNumberMasked","paymentCancelling","paymentEditing"],["data-role","notification-message"],a,[3,"resolve"],[1,"text-dark"],_,[1,"card","card-lg"],[1,"card-body"],[1,"bb-state-container"],["data-role","error-state","iconSize","xxl","iconModifier","error-outline","title",n,"subtitle",o],["loaderSize","lg"]]},template:function(_,n){if(1&_&&(e.TgZ(0,"div")(1,"div",0),e._UZ(2,"bb-header-ui",1),e.qZA(),e.YNc(3,Ye,4,9,"ng-container",2),e.qZA(),e.YNc(4,he,1,0,"bb-billpay-payments-delete-modal",3),e.YNc(5,Je,2,0,"ng-template",null,4,e.W1O),e.YNc(7,Ke,4,0,"ng-template",null,5,e.W1O),e.YNc(9,Fe,3,0,"ng-template",null,6,e.W1O)),2&_){const o=e.MAs(8);e.xp6(2),e.Q6J("heading",n.config.pageTitle),e.xp6(1),e.Q6J("ngIf",!n.hasLoadingError)("ngIfElse",o),e.xp6(1),e.Q6J("ngIf",n.isDeleteModalOpened)}},directives:[y.G,q,j,k.s,w.Q,m.O5],pipes:[m.Ov],encapsulation:2}),t})(),ee=(()=>{class t{constructor(_){this.config=_}}return t.\u0275fac=function(_){return new(_||t)(e.Y36(C))},t.\u0275cmp=e.Xpm({type:t,selectors:[["bb-billpay-enrolment-view"]],decls:4,vars:1,consts:function(){let a;return a="Pending Payments",[[1,"bb-block","bb-block--lg"],["headingType","h1","heading",a],[3,"notificationDismissTime"]]},template:function(_,n){1&_&&(e.TgZ(0,"div")(1,"div",0),e._UZ(2,"bb-header-ui",1),e.qZA(),e._UZ(3,"bb-billpay-enrolment",2),e.qZA()),2&_&&(e.xp6(3),e.Q6J("notificationDismissTime",null==n.config?null:n.config.notificationDismissTime))},directives:[y.G,u.KH],encapsulation:2}),t})();const we=[P.Q,x.n,K.T,Y.G],ke=[U,v,R.D6,R.cE],xe={path:"",component:(()=>{class t{}return t.\u0275fac=function(_){return new(_||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["bb-manage-bill-payments-journey"]],features:[e._Bn([C,v,U])],decls:1,vars:0,template:function(_,n){1&_&&e._UZ(0,"router-outlet")},directives:[N.lC],encapsulation:2}),t})(),children:[{path:"enrolment",component:ee},{path:"",canActivate:[u.tc],children:[{path:"",component:z,pathMatch:"full"},{path:":id",component:X}]}]};let Ze=(()=>{class t{static forRoot(_={route:xe}){return{ngModule:t,providers:[(0,N.co)([_.route])]}}}return t.\u0275fac=function(_){return new(_||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({providers:[...ke],imports:[[m.ez,N.Bz,u.Op,...we]]}),t})()},4747:(J,L,i)=>{"use strict";i.d(L,{Le:()=>O,cY:()=>b,kU:()=>R});var e=i(5e3),m=i(682);const N={segments:4},u=new e.OlP("ACCOUNTS_DISPLAYING_FORMAT_TOKEN");let O=(()=>{class r{constructor(A){this.accountsDisplayingFormat=A}getDefaultFormat(A,M){var E,p;return"cardNumber"===A?this.getCardNumberFormat(M):null!==(p=null===(E=this.accountsDisplayingFormat)||void 0===E?void 0:E[A])&&void 0!==p?p:N}getCardNumberFormat(A){var M;const E=null===(M=this.accountsDisplayingFormat)||void 0===M?void 0:M.cardNumber,p=Object.entries((null==E?void 0:E.cardProviders)||{}).reduce((c,S)=>Object.assign(Object.assign({},c),{[S[0].toLowerCase()]:S[1]}),{});return A&&p[A.toLowerCase()]?p[A.toLowerCase()]:null!=E?E:N}}return r.\u0275fac=function(A){return new(A||r)(e.LFG(u,8))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),R=(()=>{class r{constructor(A){this.accountsDisplayingFormatService=A}transform(A,M,E){const p=A.toString(),c="object"==typeof M?M:this.accountsDisplayingFormatService.getDefaultFormat(M,E);return(0,m.EX)(p,c.segments)}}return r.\u0275fac=function(A){return new(A||r)(e.Y36(O,16))},r.\u0275pipe=e.Yjl({name:"bbAccountNumber",type:r,pure:!0}),r})(),b=(()=>{class r{}return r.\u0275fac=function(A){return new(A||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({}),r})()},9633:(J,L,i)=>{"use strict";i.d(L,{So:()=>O,V9:()=>A,nj:()=>M});var e=i(9808),m=i(5e3),N=i(682),u=i(4747);const O={length:16,maskRange:[0,12],segments:4},b=new m.OlP("Enables accounts masking synchronization with backend",{providedIn:"root",factory:()=>!1});let A=(()=>{class E{constructor(c,S){this.accountsDisplayingFormatService=c,this.synchronizeNumberMasking=S,this.defaultFormat=this.accountsDisplayingFormatService.getDefaultFormat("cardNumber")}transform(c,S,B="\u2022"){const y=null!=S?S:this.defaultFormat;let P=c.toString();return S&&!this.synchronizeNumberMasking&&(P=function r(E,p,c="0",S=!0){const B=Math.max(p-E.length,0),y=c.repeat(B);return S?y+E:E+y}(P,S.length,B),P=function g(E,[p,c],S="*"){let B="";if(c<0){const y=E.slice(c);B=S.repeat(E.length-y.length)+y}else{const y=S.repeat(c-p);B=E.substring(0,p)+y+E.substring(c)}return B}(P,S.maskRange,B)),(0,N.EX)(P,y.segments)}}return E.\u0275fac=function(c){return new(c||E)(m.Y36(u.Le,16),m.Y36(b,24))},E.\u0275pipe=m.Yjl({name:"paymentCardNumber",type:E,pure:!0}),E})(),M=(()=>{class E{}return E.\u0275fac=function(c){return new(c||E)},E.\u0275mod=m.oAB({type:E}),E.\u0275inj=m.cJS({imports:[[e.ez]]}),E})()}}]);