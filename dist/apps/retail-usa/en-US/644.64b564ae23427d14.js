"use strict";(self.webpackChunkretail_usa=self.webpackChunkretail_usa||[]).push([[644],{9589:(W,G,r)=>{r.r(G),r.d(G,{AuthorizedUsersJourneyBundleModule:()=>so});var d=r(9808),e=r(5e3),A=r(5357),L=r(1989),v=r(4544),H=r(4846),K=r(5460),S=r(3075),M=r(6888),u=r(7605),D=r(1089),l=r(5622),h=r(9287),b=r(4619),m=r(230),N=r(4291),c=r(3759),C=r(8639),B=r(7287),x=r(4951),p=r(429),I=r(9633),a=r(3623),R=r(8451),J=r(3922),E=r(655),O=r(9646),U=r(590),z=r(3900),Y=r(262),P=r(4004),q=r(9841),k=r(1135),He=r(4707),ye=r(6451),ge=r(8505),tt=r(727),nt=r(5577),ot=r(520),Re=r(5556),he=r(3533),se=r(4058),be=r(7656),fe=r(6858);function _t(o,_){if(1&o&&(e.TgZ(0,"th",7)(1,"strong",8),e._UZ(2,"bb-icon-ui",9),e.TgZ(3,"span",10),e._uU(4),e.qZA()()()),2&o){const t=_.$implicit;e.xp6(2),e.Q6J("name",t.icon),e.xp6(2),e.hij(" ",t.title," ")}}function st(o,_){if(1&o&&(e.TgZ(0,"div",15),e._uU(1),e.ALo(2,"paymentCardNumber"),e.qZA()),2&o){const t=e.oxw().$implicit,n=e.oxw();e.xp6(1),e.hij(" ",e.xi3(2,1,t.account.displayNumber.slice(t.account.displayNumber.length-9,t.account.displayNumber.length),n.productNumberFormat)," ")}}function it(o,_){1&o&&e.GkF(0)}function rt(o,_){1&o&&e.GkF(0)}function at(o,_){if(1&o){const t=e.EpF();e.TgZ(0,"bb-icon-ui",19),e.NdJ("click",function(){e.CHM(t);const s=e.oxw().$implicit,i=e.oxw(2).$implicit;return e.oxw().changeAccountLevel(i,s.value)}),e.qZA()}if(2&o){const t=e.oxw().$implicit,n=e.oxw(2).$implicit;e.Q6J("name",n.level===t.value?"radio-button-checked":"radio-button-unchecked")("color",n.level===t.value?"primary":"inactive"),e.uIk("data-role","user-permissions-edit-table-"+t.value+(n.level===t.value?"-checked":"-unchecked"))("aria-checked",n.level===t.value)}}function lt(o,_){1&o&&(e._UZ(0,"bb-icon-ui",20),e.TgZ(1,"span",1),e.SDv(2,21),e.qZA())}function ut(o,_){if(1&o&&(e.ynx(0),e.TgZ(1,"td",16),e.YNc(2,rt,1,0,"ng-container",12),e.YNc(3,at,1,4,"ng-template",null,17,e.W1O),e.YNc(5,lt,3,0,"ng-template",null,18,e.W1O),e.qZA(),e.BQk()),2&o){const t=_.$implicit,n=e.MAs(4),s=e.MAs(6),i=e.oxw(3);e.xp6(2),e.Q6J("ngIf",i.useEditableCell(t.value))("ngIfThen",n)("ngIfElse",s)}}function ct(o,_){if(1&o&&(e.YNc(0,ut,7,3,"ng-container",6),e.ALo(1,"keyvalue")),2&o){const t=e.oxw(2);e.Q6J("ngForOf",e.xi3(1,1,t.authorizedPermissionLevel,t.sortKeepOriginalOrder))}}function Et(o,_){1&o&&(e.TgZ(0,"span",1),e.SDv(1,24),e.qZA())}function dt(o,_){1&o&&(e.TgZ(0,"span",1),e.SDv(1,25),e.qZA())}function At(o,_){if(1&o&&(e.ynx(0),e.TgZ(1,"td",16),e._UZ(2,"bb-icon-ui",22),e.YNc(3,Et,2,0,"span",23),e.YNc(4,dt,2,0,"span",23),e.qZA(),e.BQk()),2&o){const t=_.$implicit,n=e.oxw(2).$implicit;e.xp6(2),e.Q6J("name",n.level===t.value?"check":"remove")("color",n.level===t.value?"success":"muted"),e.uIk("data-role","user-permissions-view-table-"+t.value+(n.level===t.value?"-checked":"-unchecked")),e.xp6(1),e.Q6J("ngIf",n.level===t.value),e.xp6(1),e.Q6J("ngIf",n.level!==t.value)}}function St(o,_){if(1&o&&(e.YNc(0,At,5,5,"ng-container",6),e.ALo(1,"keyvalue")),2&o){const t=e.oxw(2);e.Q6J("ngForOf",e.xi3(1,1,t.authorizedPermissionLevel,t.sortKeepOriginalOrder))}}function pt(o,_){if(1&o&&(e.ynx(0),e.TgZ(1,"tr")(2,"td")(3,"div"),e._uU(4),e.qZA(),e.YNc(5,st,3,4,"div",11),e.qZA(),e.YNc(6,it,1,0,"ng-container",12),e.qZA(),e.YNc(7,ct,2,4,"ng-template",null,13,e.W1O),e.YNc(9,St,2,4,"ng-template",null,14,e.W1O),e.BQk()),2&o){const t=_.$implicit,n=e.MAs(8),s=e.MAs(10),i=e.oxw();e.xp6(4),e.hij(" ",t.account.name," "),e.xp6(1),e.Q6J("ngIf",t.account.displayNumber),e.xp6(1),e.Q6J("ngIf",i.isEditing)("ngIfThen",n)("ngIfElse",s)}}const mt=["*"];function Ut(o,_){if(1&o){const t=e.EpF();e.TgZ(0,"h2",5),e.SDv(1,6),e.qZA(),e.TgZ(2,"div")(3,"button",7),e.NdJ("click",function(){return e.CHM(t),e.oxw().onClose()}),e._UZ(4,"bb-icon-ui",8),e.qZA()()}}function gt(o,_){1&o&&(e.TgZ(0,"span",9),e.SDv(1,10),e.qZA())}function Rt(o,_){if(1&o){const t=e.EpF();e.TgZ(0,"button",11),e.NdJ("click",function(){return e.CHM(t),e.oxw().onClose()}),e.TgZ(1,"span"),e.SDv(2,12),e.qZA()(),e.TgZ(3,"button",13),e.NdJ("click",function(){return e.CHM(t),e.oxw().onConfirm()}),e.TgZ(4,"span"),e.SDv(5,14),e.qZA()()}}function ht(o,_){if(1&o&&(e.ynx(0),e._UZ(1,"bb-authorized-users-stepper",7),e.ALo(2,"async"),e.BQk()),2&o){const t=e.oxw(3);let n;e.xp6(1),e.Q6J("currentStep",null!==(n=e.lcZ(2,1,t.currentStep$))&&void 0!==n?n:1)}}function bt(o,_){if(1&o&&(e._UZ(0,"bb-authorized-users-edit-stepper",8),e.ALo(1,"async")),2&o){const t=e.oxw(3);let n;e.Q6J("currentStep",null!==(n=e.lcZ(1,1,t.currentStep$))&&void 0!==n?n:1)}}function ft(o,_){if(1&o&&(e.ynx(0),e.TgZ(1,"div",4)(2,"div",5),e.YNc(3,ht,3,3,"ng-container",0),e.qZA()(),e.YNc(4,bt,2,3,"ng-template",null,6,e.W1O),e.TgZ(6,"bb-authorized-users-create-container"),e._UZ(7,"router-outlet"),e.qZA(),e.BQk()),2&o){const t=e.MAs(5),n=e.oxw(2);e.xp6(3),e.Q6J("ngIf",!n.editMode)("ngIfElse",t)}}function Ct(o,_){if(1&o&&(e.ynx(0),e.YNc(1,ft,8,2,"ng-container",0),e.BQk()),2&o){const t=_.ngIf;e.oxw();const n=e.MAs(7);e.xp6(1),e.Q6J("ngIf",(null==t.accounts||null==t.accounts.items?null:t.accounts.items.length)>0&&t.termsAndConditions)("ngIfElse",n)}}function Ot(o,_){1&o&&(e.TgZ(0,"div",9),e._UZ(1,"bb-loading-indicator-ui",10),e.qZA())}function Dt(o,_){1&o&&(e.TgZ(0,"div",9)(1,"div",11),e._UZ(2,"bb-empty-state-ui",12),e.qZA()())}function Nt(o,_){1&o&&(e.ynx(0),e.TgZ(1,"span",29),e.SDv(2,30),e.qZA(),e.BQk())}function Mt(o,_){1&o&&(e.TgZ(0,"span"),e.SDv(1,34),e.qZA())}function Tt(o,_){1&o&&(e.TgZ(0,"span"),e.SDv(1,35),e.qZA())}function It(o,_){if(1&o&&(e.ynx(0,32),e.YNc(1,Mt,2,0,"span",33),e.YNc(2,Tt,2,0,"span",33),e.BQk()),2&o){const t=e.oxw().$implicit;e.Q6J("ngSwitch",t.key),e.xp6(1),e.Q6J("ngSwitchCase","required"),e.xp6(1),e.Q6J("ngSwitchCase","email")}}function vt(o,_){if(1&o&&(e.ynx(0),e.YNc(1,It,3,3,"ng-container",31),e.BQk()),2&o){const t=_.first;e.xp6(1),e.Q6J("ngIf",t)}}function Bt(o,_){1&o&&(e.TgZ(0,"span"),e.SDv(1,36),e.qZA())}function zt(o,_){1&o&&(e.TgZ(0,"span"),e.SDv(1,37),e.qZA())}function Jt(o,_){1&o&&(e.TgZ(0,"span"),e.SDv(1,38),e.qZA())}function Lt(o,_){if(1&o&&(e.ynx(0,32),e.YNc(1,Bt,2,0,"span",33),e.YNc(2,zt,2,0,"span",33),e.YNc(3,Jt,2,0,"span",33),e.BQk()),2&o){const t=e.oxw().$implicit;e.Q6J("ngSwitch",t.key),e.xp6(1),e.Q6J("ngSwitchCase","required"),e.xp6(1),e.Q6J("ngSwitchCase","email"),e.xp6(1),e.Q6J("ngSwitchCase","validateMailConfirmation")}}function Zt(o,_){if(1&o&&(e.ynx(0),e.YNc(1,Lt,4,4,"ng-container",31),e.BQk()),2&o){const t=_.first;e.xp6(1),e.Q6J("ngIf",t)}}function Pt(o,_){if(1&o){const t=e.EpF();e.TgZ(0,"bb-alert-ui",18),e.NdJ("closed",function(){return e.CHM(t),e.oxw().closeError()}),e.qZA()}2&o&&e.Q6J("dismissible",!0)}function Ht(o,_){if(1&o&&(e.TgZ(0,"span",23),e._uU(1),e.ALo(2,"paymentCardNumber"),e.qZA()),2&o){const t=e.oxw().$implicit,n=e.oxw();e.xp6(1),e.hij(" ",e.xi3(2,1,t.displayNumber.slice(t.displayNumber.length-9,t.displayNumber.length),n.productNumberFormat)," ")}}function yt(o,_){if(1&o){const t=e.EpF();e.TgZ(0,"li",19)(1,"bb-input-checkbox-ui",20),e.NdJ("ngModelChange",function(s){const g=e.CHM(t).$implicit;return e.oxw().model[g.id]=s}),e.TgZ(2,"span",21),e._uU(3),e.qZA(),e.YNc(4,Ht,3,4,"span",22),e.qZA()()}if(2&o){const t=_.$implicit,n=e.oxw();e.xp6(1),e.s9C("name",t.id),e.Q6J("ngModel",n.model[t.id]),e.xp6(2),e.Oqu(t.name),e.xp6(1),e.Q6J("ngIf",t.displayNumber)}}function Gt(o,_){if(1&o){const t=e.EpF();e.TgZ(0,"button",24),e.NdJ("click",function(){return e.CHM(t),e.oxw().goBack()}),e.SDv(1,25),e.qZA()}}function Kt(o,_){if(1&o&&(e.TgZ(0,"li",12),e._UZ(1,"bb-icon-ui",13),e.TgZ(2,"span",14),e._uU(3),e.qZA()()),2&o){const t=_.$implicit;e.xp6(1),e.Q6J("color",t.value?"success":"danger")("name",t.value?"check":"clear"),e.xp6(2),e.Oqu(t.name)}}function xt(o,_){1&o&&(e.TgZ(0,"div",15),e.SDv(1,16),e.qZA())}const Yt=function(o,_){return{"bb-authorized-users-permission-card--selected":o,"bb-authorized-users-permission-card--disabled":_}};function Ft(o,_){if(1&o){const t=e.EpF();e.TgZ(0,"bb-authorized-users-permissions-card",23),e.NdJ("click",function(){const i=e.CHM(t).$implicit,g=e.oxw();return!g.disableCard(i)&&g.setGeneralLevel(i.level)}),e.qZA()}if(2&o){const t=_.$implicit,n=e.oxw();e.Q6J("title",t.title)("icon",t.icon)("name",t.level)("currentName",n.generalLevel)("disabled",n.disableCard(t))("permissionsConfig",null==n.permissionsConfig?null:n.permissionsConfig.permissions)("permissionsAssigned",t.permissionsAssigned)}}function wt(o,_){1&o&&(e.TgZ(0,"div",24),e.SDv(1,25),e.qZA())}function kt(o,_){if(1&o){const t=e.EpF();e.TgZ(0,"bb-authorized-users-permissions-levels-table",26),e.NdJ("updateAccount",function(s){return e.CHM(t),e.oxw().updateAccount(s)}),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("isEditing",!0)("enableAccountLevelFullAccessPermission",t.enableAccountLevelFullAccessPermission)("selectedAccounts",t.authorizedUser.permissions)("levelsConfig",t.levelsConfig)}}function Wt(o,_){if(1&o){const t=e.EpF();e.TgZ(0,"bb-alert-ui",25),e.NdJ("closed",function(){return e.CHM(t),e.oxw().closeError()}),e.qZA()}2&o&&e.Q6J("dismissible",!0)}function Qt(o,_){1&o&&e.GkF(0)}function $t(o,_){1&o&&(e.TgZ(0,"span",26),e.SDv(1,27),e.qZA())}function qt(o,_){if(1&o&&e._UZ(0,"div",28),2&o){const t=e.oxw();e.Q6J("innerHTML",t.termsConditions,e.oJD)}}function Vt(o,_){if(1&o){const t=e.EpF();e.TgZ(0,"div",5)(1,"div",6)(2,"button",7),e.NdJ("click",function(){return e.CHM(t),e.oxw().onClose()}),e._UZ(3,"bb-icon-ui",8),e.qZA()()()}}function jt(o,_){if(1&o&&(e.ynx(0),e.TgZ(1,"h2",12),e.SDv(2,13),e.qZA(),e.TgZ(3,"span",14)(4,"span"),e._uU(5),e.qZA(),e.TgZ(6,"span"),e.SDv(7,15),e.qZA()(),e.BQk()),2&o){const t=e.oxw(2);e.xp6(5),e.Oqu((null==t.authorizedUser?null:t.authorizedUser.firstName)+" "+(null==t.authorizedUser?null:t.authorizedUser.lastName)+" ")}}function Xt(o,_){if(1&o&&(e.ynx(0),e.TgZ(1,"h2",16),e.SDv(2,17),e.qZA(),e.TgZ(3,"span",18)(4,"span"),e._uU(5),e.qZA(),e.TgZ(6,"span"),e.SDv(7,19),e.qZA()(),e.BQk()),2&o){const t=e.oxw(2);e.xp6(5),e.Oqu((null==t.authorizedUser?null:t.authorizedUser.firstName)+" "+(null==t.authorizedUser?null:t.authorizedUser.lastName)+" ")}}function en(o,_){if(1&o&&(e.TgZ(0,"div",9),e._UZ(1,"img",10),e.YNc(2,jt,8,1,"ng-container",11),e.YNc(3,Xt,8,1,"ng-container",11),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.s9C("src",t.successImg+"?"+t.timestamp,e.LSH),e.xp6(1),e.Q6J("ngIf","create"===t.succeedStatus),e.xp6(1),e.Q6J("ngIf","edit"===t.succeedStatus)}}function tn(o,_){if(1&o){const t=e.EpF();e.TgZ(0,"div",20)(1,"button",21),e.NdJ("click",function(){return e.CHM(t),e.oxw().onConfirm()}),e.SDv(2,22),e.qZA()()}}function An(o,_){1&o&&(e.ynx(0),e._UZ(1,"bb-badge-ui",2),e.BQk())}function Sn(o,_){1&o&&(e.ynx(0),e._UZ(1,"bb-badge-ui",3),e.BQk())}function pn(o,_){1&o&&(e.ynx(0),e._UZ(1,"bb-badge-ui",4),e.BQk())}function mn(o,_){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"a",31),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).pauseUser()}),e.TgZ(2,"span",21),e._UZ(3,"bb-icon-ui",32),e.TgZ(4,"span",23),e.SDv(5,33),e.qZA()()(),e.BQk()}}function Un(o,_){if(1&o){const t=e.EpF();e.TgZ(0,"a",34),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).resumeUser()}),e.TgZ(1,"span",21),e._UZ(2,"bb-icon-ui",35),e.TgZ(3,"span",23),e.SDv(4,36),e.qZA()()()}}function gn(o,_){if(1&o){const t=e.EpF();e.TgZ(0,"a",20),e.NdJ("click",function(){return e.CHM(t),e.oxw().editPermissions()}),e.TgZ(1,"span",21),e._UZ(2,"bb-icon-ui",22),e.TgZ(3,"span",23),e.SDv(4,24),e.qZA()()(),e.YNc(5,mn,6,0,"ng-container",25),e.YNc(6,Un,5,0,"ng-template",null,26,e.W1O),e.TgZ(8,"a",27),e.NdJ("click",function(){return e.CHM(t),e.oxw().removeUser()}),e.TgZ(9,"span",21),e._UZ(10,"bb-icon-ui",28),e.TgZ(11,"span",29),e.SDv(12,30),e.qZA()()()}if(2&o){const t=e.MAs(7),n=e.oxw();e.xp6(5),e.Q6J("ngIf",(null==n.authorizedUsersItem?null:n.authorizedUsersItem.status)!==n.authorizedUserStatus.PAUSED)("ngIfElse",t)}}function Rn(o,_){if(1&o&&(e.TgZ(0,"div",37)(1,"span",38),e.SDv(2,39),e.qZA(),e.TgZ(3,"span",40),e._uU(4),e.qZA()()),2&o){const t=e.oxw();e.xp6(4),e.Oqu(null==t.authorizedUsersItem?null:t.authorizedUsersItem.username)}}function hn(o,_){1&o&&(e.TgZ(0,"span"),e.SDv(1,41),e.qZA())}function bn(o,_){1&o&&(e.TgZ(0,"span"),e.SDv(1,42),e.qZA())}function fn(o,_){if(1&o){const t=e.EpF();e.TgZ(0,"div",6)(1,"div",7)(2,"bb-authorized-users-list-item",8),e.NdJ("edit",function(s){return e.CHM(t),e.oxw().editPermissions(s)})("remove",function(s){return e.CHM(t),e.oxw().removeUser(s)})("paused",function(s){return e.CHM(t),e.oxw().pauseUser(s)})("resumed",function(s){return e.CHM(t),e.oxw().resumeUser(s)}),e.qZA()()()}if(2&o){const t=_.$implicit,n=e.oxw();e.xp6(2),e.Q6J("authorizedUsersItem",t)("levelsConfig",n.levelsConfig)}}function Cn(o,_){if(1&o&&e._UZ(0,"img",11),2&o){const t=e.oxw();e.Q6J("src",t.imageUrl,e.LSH)}}function On(o,_){if(1&o){const t=e.EpF();e.TgZ(0,"h2",5),e.SDv(1,6),e.qZA(),e.TgZ(2,"div")(3,"button",7),e.NdJ("click",function(){return e.CHM(t),e.oxw().onClose()}),e._UZ(4,"bb-icon-ui",8),e.qZA()()}}function Dn(o,_){1&o&&(e.TgZ(0,"span",9),e.SDv(1,10),e.qZA())}function Nn(o,_){if(1&o){const t=e.EpF();e.TgZ(0,"button",11),e.NdJ("click",function(){return e.CHM(t),e.oxw().onClose()}),e.TgZ(1,"span"),e.SDv(2,12),e.qZA()(),e.TgZ(3,"button",13),e.NdJ("click",function(){return e.CHM(t),e.oxw().onConfirm()}),e.TgZ(4,"span"),e.SDv(5,14),e.qZA()()}}function Mn(o,_){if(1&o){const t=e.EpF();e.TgZ(0,"h2",5),e.SDv(1,6),e.qZA(),e.TgZ(2,"div")(3,"button",7),e.NdJ("click",function(){return e.CHM(t),e.oxw().onClose()}),e._UZ(4,"bb-icon-ui",8),e.qZA()()}}function Tn(o,_){1&o&&(e.TgZ(0,"span",9),e.SDv(1,10),e.qZA())}function In(o,_){if(1&o){const t=e.EpF();e.TgZ(0,"button",11),e.NdJ("click",function(){return e.CHM(t),e.oxw().onClose()}),e.TgZ(1,"span"),e.SDv(2,12),e.qZA()(),e.TgZ(3,"button",13),e.NdJ("click",function(){return e.CHM(t),e.oxw().onConfirm()}),e.TgZ(4,"span"),e.SDv(5,14),e.qZA()()}}function vn(o,_){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"bb-authorized-users-list",6),e.NdJ("edit",function(s){return e.CHM(t),e.oxw(4).editPermissions(s)})("remove",function(s){return e.CHM(t),e.oxw(4).setCurrentUser(s,"remove")})("paused",function(s){return e.CHM(t),e.oxw(4).setCurrentUser(s,"pause")})("resumed",function(s){return e.CHM(t),e.oxw(4).updateUserStatus(s)})("createAuthorizedUser",function(){return e.CHM(t),e.oxw(4).goToAuthorizedUser()}),e.qZA(),e.BQk()}if(2&o){const t=e.oxw(2).ngIf,n=e.oxw(2);e.xp6(1),e.Q6J("authorizedUsersList",t.items)("levelsConfig",n.levelsConfig)}}function Bn(o,_){if(1&o&&(e.ynx(0),e.YNc(1,vn,2,2,"ng-container",0),e.BQk()),2&o){const t=e.oxw().ngIf;e.oxw(2);const n=e.MAs(2);e.xp6(1),e.Q6J("ngIf",t.items.length)("ngIfElse",n)}}function zn(o,_){if(1&o&&(e.ynx(0),e.YNc(1,Bn,2,2,"ng-container",0),e.ALo(2,"async"),e.BQk()),2&o){const t=e.oxw(2),n=e.MAs(4);e.xp6(1),e.Q6J("ngIf",!1===e.lcZ(2,2,t.showLoadingIndicator))("ngIfElse",n)}}function Jn(o,_){if(1&o&&(e.ynx(0),e.YNc(1,zn,3,4,"ng-container",5),e.ALo(2,"async"),e.BQk()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",e.lcZ(2,1,t.authorizedUsersList))}}function Ln(o,_){if(1&o){const t=e.EpF();e.TgZ(0,"bb-authorized-users-empty-list",7),e.NdJ("createAuthorizedUser",function(){return e.CHM(t),e.oxw().goToAuthorizedUser()}),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("imageUrl",t.emptyStateImage)}}function Zn(o,_){1&o&&(e.TgZ(0,"div",8),e._UZ(1,"bb-loading-indicator-ui",9),e.qZA())}function Pn(o,_){1&o&&(e.TgZ(0,"div",8)(1,"div",10),e._UZ(2,"bb-empty-state-ui",11),e.TgZ(3,"div",12)(4,"button",13),e.SDv(5,14),e.qZA()()()())}function Hn(o,_){if(1&o){const t=e.EpF();e.TgZ(0,"bb-authorized-users-confirmation-complete",2),e.NdJ("confirm",function(){return e.CHM(t),e.oxw().confirm()})("closed",function(){return e.CHM(t),e.oxw().confirm()}),e.ALo(1,"async"),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("dialogOpen",t.succeedStatus)("succeedStatus",t.succeedStatus)("authorizedUser",e.lcZ(1,4,t.authorizedUser))("successImg",t.successImg)}}var ie,re,y=(()=>{return(o=y||(y={})).VIEW_ONLY="viewOnly",o.MONEY_MOVEMENT="moneyMovement",o.FULL_ACCESS="fullAccess",y;var o})(),V=(()=>{return(o=V||(V={})).PAUSED="PAUSED",o.AWAITING_REGISTRATION="AWAITING_REGISTRATION",o.ACTIVE="ACTIVE",V;var o})();!function(o){function n(s,i){return s.map(g=>{const{accountId:f}=g,Z=(0,E._T)(g,["accountId"]);return Object.assign({account:i.items.find(T=>T.id===f)},Z)}).filter(g=>!!g.account)}o.buildHttpResponse=function _(s){return i=>i?(Array.isArray(i)?i:[i]).map(f=>{var{id:Z,said:T,firstName:F,lastName:$,email:te,mobileNumber:Ae,username:Se,status:pe,permissions:me}=f,Ue=(0,E._T)(f,["id","said","firstName","lastName","email","mobileNumber","username","status","permissions"]);return Object.assign({id:Z,said:T,firstName:F,lastName:$,email:te,mobileNumber:Ae,username:Se,status:pe,permissions:me.map(w=>{var{accountId:io,level:ro}=w,ao=(0,E._T)(w,["accountId","level"]);return Object.assign({accountId:io,level:s.fromStringToPermissionLevel(ro||"")},ao)})},Ue)}):[]},o.mapData=function t(s,i){return{items:s.map(f=>{const{permissions:Z}=f,T=(0,E._T)(f,["permissions"]);return Object.assign({permissions:n(Z,i)},T)})}}}(ie||(ie={})),(re||(re={})).buildHttpRequest=function _(t){const n=s=>{var{account:i,level:g}=s,f=(0,E._T)(s,["account","level"]);return Object.assign({accountId:i.id,level:t.fromPermissionLevelToString(g)},f)};return{post(s){const{email:i="",firstName:g="",lastName:f="",mobileNumber:Z="",permissions:T=[]}=s,F=(0,E._T)(s,["email","firstName","lastName","mobileNumber","permissions"]);return Object.assign({email:i,firstName:g,lastName:f,mobileNumber:Z,permissions:T.map(n)},F)},put:s=>({permissions:s.map(n)})}};const Ge={length:9,maskRange:[0,length-4],segments:0},Ce={levels:[{icon:"visibility",title:"View Only",permissionsAssigned:[!0,!0,!1,!1,!1]},{icon:"attach-money",title:"Money Movement",permissionsAssigned:[!0,!0,!0,!1,!1]},{icon:"vpn-key",title:"Full Access",permissionsAssigned:[!0,!0,!0,!0,!0]}]},Oe={permissions:["Balances, Transactions and Statements","Cashflow and Spending Analysis","Transfers and Bill Payments","Check Deposits","Other User Features"]};let Q=(()=>{class o{constructor(t){this.element=t,t.nativeElement.tabIndex=0}eventListener(t){this.element.nativeElement.click(t)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.SBq))},o.\u0275dir=e.lG2({type:o,selectors:[["","bbAuthorizedUsersAccessibilityKeyboard",""]],hostBindings:function(t,n){1&t&&e.NdJ("keydown.enter",function(i){return n.eventListener(i)})("keydown.space",function(i){return n.eventListener(i)})}}),o})(),ae=(()=>{class o{constructor(){this.isEditing=!1,this.updateAccount=new e.vpe,this.productNumberFormat=Ge,this.authorizedPermissionLevel=y,this.sortKeepOriginalOrder=(...t)=>0}changeAccountLevel(t,n){this.updateAccount.emit(Object.assign(Object.assign({},t),{level:n}))}useEditableCell(t){const n=t===this.authorizedPermissionLevel.FULL_ACCESS;return n&&this.enableAccountLevelFullAccessPermission||!n}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["bb-authorized-users-permissions-levels-table"]],inputs:{selectedAccounts:"selectedAccounts",isEditing:"isEditing",enableAccountLevelFullAccessPermission:"enableAccountLevelFullAccessPermission",levelsConfig:"levelsConfig"},outputs:{updateAccount:"updateAccount"},decls:12,vars:2,consts:function(){let _,t,n,s,i;return _=" Permission Management ",t=" Accounts and Permissions ",n=" Full access can only be assigned to all accounts at once, individual account-level full access permission cannot be assigned. ",s=" Checked ",i=" Unchecked ",[[1,"table","table-striped","bb-authorized-users-common-permission-table"],[1,"sr-only"],_,["scope","col"],t,["scope","col","class","text-center",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["scope","col",1,"text-center"],[1,"bb-inline-stack"],["size","sm",1,"bb-inline-stack__item",3,"name"],[1,"bb-inline-stack__item"],["class","bb-text-support",4,"ngIf"],[4,"ngIf","ngIfThen","ngIfElse"],["editMode",""],["viewMode",""],[1,"bb-text-support"],[1,"text-center"],["editableTemplate",""],["mutedTemplate",""],["bbAuthorizedUsersAccessibilityKeyboard","",3,"name","color","click"],["name","remove","color","muted","data-role","user-permissions-edit-table-fullAccess-muted"],n,[3,"name","color"],["class","sr-only",4,"ngIf"],s,i]},template:function(t,n){1&t&&(e.TgZ(0,"table",0)(1,"caption",1),e.SDv(2,2),e.qZA(),e.TgZ(3,"thead")(4,"tr")(5,"th",3)(6,"strong")(7,"span"),e.SDv(8,4),e.qZA()()(),e.YNc(9,_t,5,2,"th",5),e.qZA()(),e.TgZ(10,"tbody"),e.YNc(11,pt,11,5,"ng-container",6),e.qZA()()),2&t&&(e.xp6(9),e.Q6J("ngForOf",n.levelsConfig),e.xp6(2),e.Q6J("ngForOf",n.selectedAccounts))},directives:[h.o,d.sg,d.O5,Q],pipes:[I.V9,d.Nd],encapsulation:2}),o})();var De,Ne;(De||(De={})).fromHttpResponse=function _(t){return{items:t.map(n=>({id:n.id,name:n.name,alias:n.bankAlias,IBAN:n.IBAN,BBAN:n.BBAN,number:n.number,currency:n.currency,displayNumber:n.IBAN||n.BBAN||n.number}))}},function(o){o.toHttpRequest=function _(n){return{state:n}},o.fromHttpResponse=function t(n){return n.body}}(Ne||(Ne={}));class Me{fromStringToPermissionLevel(_){return"view only"===_.toLocaleLowerCase()?y.VIEW_ONLY:"money movement"===_.toLocaleLowerCase()?y.MONEY_MOVEMENT:"full access"===_.toLocaleLowerCase()?y.FULL_ACCESS:y.VIEW_ONLY}fromPermissionLevelToString(_){switch(_){case y.VIEW_ONLY:return"View Only";case y.MONEY_MOVEMENT:return"Money Movement";case y.FULL_ACCESS:return"Full Access";default:return"View Only"}}}const ne=new e.OlP("AUTHORIZED_USERS_ASSETS_PATH_TOKEN"),Ke=new e.OlP("level injection token");let j=(()=>{class o{constructor(t,n,s){var i,g,f,Z,T;this.levelsConfig=t,this.http=n,this.assetsPath=s,this.authorizedPermissionLevel=[y.VIEW_ONLY,y.MONEY_MOVEMENT,y.FULL_ACCESS],this.fetchFile=$=>this.http.get($,{responseType:"text"}),this.statusMapping=(null===(i=null==this?void 0:this.levelsConfig)||void 0===i?void 0:i.mappings)?this.levelsConfig.mappings:new Me;const F=($,te)=>Object.assign(Object.assign({},$),{level:this.authorizedPermissionLevel[te],validate(){return this.level!==y.FULL_ACCESS}});this.uiLevelsConfig=(null===(f=null===(g=null==this?void 0:this.levelsConfig)||void 0===g?void 0:g.uiConfig)||void 0===f?void 0:f.levels)?this.levelsConfig.uiConfig.levels.map(F):Ce.levels.map(F),this.uiPermissionsConfig=(null===(T=null===(Z=null==this?void 0:this.levelsConfig)||void 0===Z?void 0:Z.uiConfig)||void 0===T?void 0:T.permissions)?{permissions:this.levelsConfig.uiConfig.permissions}:Oe}get uiLevelsConfigValue(){return this.uiLevelsConfig}get uiPermissionsConfigValue(){return this.uiPermissionsConfig}get statusMappingValue(){return this.statusMapping}get termsConditionsUrl(){return(0,O.of)(this.assetsPath+"terms-and-conditions.txt")}termsConditionsContent(){return this.termsConditionsUrl.pipe((0,U.P)(),(0,z.w)(this.fetchFile),(0,Y.K)(()=>(console.warn("No terms and conditions file was found"),(0,O.of)(""))))}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(Ke,8),e.LFG(ot.eN),e.LFG(ne))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})(),oe=(()=>{class o{constructor(t,n,s,i){this.accessGroupDataHttpService=t,this.userDataHttpService=n,this.productSummaryDataHttpService=s,this.usersUIService=i,this.statusMapping=this.usersUIService.statusMappingValue,this.accounts=this.productSummaryDataHttpService.getArrangementsByBusinessFunction({businessFunction:"Product Summary",resourceName:"Product Summary",privilege:"view",size:1e6}).pipe((0,P.U)(De.fromHttpResponse)),this.authorizedUsersList=this.userDataHttpService.getAuthorizedUsers().pipe((0,P.U)(ie.buildHttpResponse(this.statusMapping)))}setStatusForServiceAgreements(t,n){return this.accessGroupDataHttpService.putServiceAgreementState({serviceAgreementId:t,serviceAgreementStatePut:Ne.toHttpRequest(n)})}updateAuthorizedUserStatus(t,n){return this.userDataHttpService.updateStatusForAuthorizedUser({authorizedUserId:t,updateAuthorizedUserStatus:{enabled:n===L.qb.ENABLED}})}addAuthorizedUser(t){return this.userDataHttpService.createAuthorizedUser({postAuthorizedUser:re.buildHttpRequest(this.statusMapping).post(t)})}retrieveAuthorizedUser(){return(0,q.a)([this.authorizedUsersList,this.accounts]).pipe((0,P.U)(([t,n])=>ie.mapData(t,n)))}getAllArrangements(){return this.accounts}updateAuthorizedUser(t,n){return this.userDataHttpService.updatePermissionsForAuthorizedUser({authorizedUserId:t,putAuthorizedUserPermissions:re.buildHttpRequest(this.statusMapping).put(n)})}removeAuthorizedUser(t){return this.userDataHttpService.deleteAuthorizedUser({authorizedUserId:t})}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(L.e0),e.LFG(H.Xy),e.LFG(v.IK),e.LFG(j))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})();const Kn=[h.Q,J.U$,I.nj];let le=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[oe,j],imports:[[d.ez,...Kn],h.Q,J.U$,I.nj]}),o})(),X=(()=>{class o{constructor(t,n){this.userService=t,this.usersUIService=n,this.currentStep=1,this.selectedUser="",this.isAborting=!1,this.currentStep$$=new k.X(this.currentStep),this.loadingData$$=new k.X(void 0),this.currentUserStore=new k.X({}),this.changesStore=new k.X({}),this.isAborting$$=new k.X(!1),this.selectedEditUserStore=new He.t,this.authorizedUser=this.currentUserStore.asObservable(),(0,ye.T)(this.changesStore,this.selectedEditUserStore).subscribe(this.currentUserStore)}get currentStep$(){return this.currentStep$$.asObservable()}get isAborting$(){return this.isAborting$$.asObservable()}get loadingData$(){return this.loadingData$$.asObservable()}get editMode(){return!!this.selectedUser}setCurrentStep(t){this.currentStep=t,this.currentStep$$.next(t)}setCurrentUserValue(t){this.changesStore.next(Object.assign(Object.assign({},this.currentUserStore.value),t))}getAllAccounts(){return this.userService.getAllArrangements().pipe((0,Y.K)(this.handleAccountError))}handleAccountError(){return(0,O.of)({items:[]})}handleUserError(){return(0,O.of)({items:[]})}next(t){this.setCurrentUserValue(t),this.setCurrentStep(this.currentStep+1)}back(){this.setCurrentStep(this.currentStep-1)}saveOnly(t){this.setCurrentUserValue(t)}setAbortingDialog(t){this.isAborting$$.next(t)}init(t){this.selectedUser=t,t?(this.userService.retrieveAuthorizedUser().pipe((0,Y.K)(this.handleUserError),(0,P.U)(n=>n.items.find(s=>s.id===this.selectedUser)),(0,ge.b)(n=>n&&this.selectedEditUserStore.next(n))).subscribe(),this.accounts=this.selectedEditUserStore.pipe((0,z.w)(n=>n?this.getAllAccounts():this.handleAccountError()))):this.accounts=this.getAllAccounts(),this.termsConditionsContent=this.usersUIService.termsConditionsContent(),(0,q.a)([this.accounts,this.termsConditionsContent]).pipe((0,P.U)(([n,s])=>({accounts:n,termsAndConditions:s}))).subscribe(n=>{this.loadingData$$.next(n)})}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(oe),e.LFG(j))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})(),ee=(()=>{class o{constructor(t){this.router=t}navigateToList(t={}){this.router.navigate(["../list"],t)}navigateToUserDetails(t={}){this.router.navigate(["../user-details"],t)}navigateToAccounts(t={}){this.router.navigate(["../accounts"],t)}navigateToPermissions(t={}){this.router.navigate(["../permissions"],t)}navigateToConfirmation(t={}){this.router.navigate(["../confirmation"],t)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(A.F0))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})(),Te=(()=>{class o{constructor(){this.currentStep=1}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["bb-authorized-users-stepper"]],inputs:{currentStep:"currentStep"},decls:5,vars:7,consts:function(){let _,t,n,s,i,g,f,Z;return _="User details",t="Step 1 out of 4",n="Accounts",s="Step 2 out of 4",i="Permissions",g="Step 3 out of 4",f="Confirmation",Z="Step 4 out of 4",[["label",_,"ariaLabel",t,1,"bb-stack__item",3,"isChecked","isActive"],["label",n,"ariaLabel",s,1,"bb-stack__item",3,"isChecked","isActive"],["label",i,"ariaLabel",g,1,"bb-stack__item",3,"isActive","isChecked"],["label",f,"ariaLabel",Z,1,"bb-stack__item",3,"isActive"]]},template:function(t,n){1&t&&(e.TgZ(0,"bb-stepper-ui"),e._UZ(1,"bb-stepper-step-ui",0)(2,"bb-stepper-step-ui",1)(3,"bb-stepper-step-ui",2)(4,"bb-stepper-step-ui",3),e.qZA()),2&t&&(e.xp6(1),e.Q6J("isChecked",n.currentStep>1)("isActive",n.currentStep>=1),e.xp6(1),e.Q6J("isChecked",n.currentStep>2)("isActive",n.currentStep>=2),e.xp6(1),e.Q6J("isActive",n.currentStep>=3)("isChecked",n.currentStep>3),e.xp6(1),e.Q6J("isActive",n.currentStep>=4))},directives:[a.vO,a.Ml],encapsulation:2}),o})(),Ie=(()=>{class o{constructor(){this.currentStep=1}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["bb-authorized-users-edit-stepper"]],inputs:{currentStep:"currentStep"},decls:5,vars:6,consts:function(){let _,t,n,s,i,g;return _="Accounts",t="Step 1 out of 3",n="Permissions",s="Step 2 out of 3",i="Confirmation",g="Step 3 out of 3",[[1,"bb-authorized-users-stepper"],[1,"col-8"],["label",_,"ariaLabel",t,1,"bb-stack__item",3,"isChecked","isActive"],["label",n,"ariaLabel",s,1,"bb-stack__item",3,"isChecked","isActive"],["label",i,"ariaLabel",g,1,"bb-stack__item",3,"isActive","isChecked"]]},template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"bb-stepper-ui",1),e._UZ(2,"bb-stepper-step-ui",2)(3,"bb-stepper-step-ui",3)(4,"bb-stepper-step-ui",4),e.qZA()()),2&t&&(e.xp6(2),e.Q6J("isChecked",n.currentStep>1)("isActive",n.currentStep>=1),e.xp6(1),e.Q6J("isChecked",n.currentStep>2)("isActive",n.currentStep>=2),e.xp6(1),e.Q6J("isActive",n.currentStep>=3)("isChecked",n.currentStep>3))},directives:[a.vO,a.Ml],encapsulation:2}),o})(),ue=(()=>{class o{constructor(){this.nextStep=1}nextStepIndex(){return this.nextStep++}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["bb-authorized-users-create-container"]],ngContentSelectors:mt,decls:3,vars:0,consts:[[1,"card"],[1,"card-body","modal-body"]],template:function(t,n){1&t&&(e.F$t(),e.TgZ(0,"div",0)(1,"div",1),e.Hsn(2),e.qZA()())},encapsulation:2}),o})(),ce=(()=>{class o{constructor(){this.dialogOpen=!1,this.confirm=new e.vpe,this.closed=new e.vpe,this.onClose=()=>{this.closed.emit()}}onConfirm(){this.confirm.emit()}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275dir=e.lG2({type:o,inputs:{dialogOpen:"dialogOpen"},outputs:{confirm:"confirm",closed:"closed"}}),o})(),ve=(()=>{class o extends ce{}return o.\u0275fac=function(){let _;return function(n){return(_||(_=e.n5z(o)))(n||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["bb-authorized-users-cancel-creation"]],features:[e.qOj],decls:8,vars:1,consts:function(){let _,t,n,s;return _=" Discard New Authorized User? ",t=" All entered information for this authorized user will be permanently lost. ",n=" Keep It ",s=" Discard Authorized User ",[["data-role","cancel-modal",3,"isOpen","cancel"],["bbCustomModalHeader",""],["bbCustomModalBody",""],["footerRef",""],["bbCustomModalFooter",""],["data-role","cancel-modal-header"],_,["bbButton","","data-role","cancel-modal-close-button","color","unstyled","aria-label","Close Creation Modal","i18-aria-label","Close Create User|Button for close creation of authorized user@@authorized-users.cancel.modal.closed.button",3,"click"],["color","muted","name","clear"],["data-role","cancel-modal-subHeader"],t,["bbButton","","data-role","cancel-modal-keep-button","color","link",3,"click"],n,["bbButton","","data-role","cancel-modal-discard-button","color","danger",3,"click"],s]},template:function(t,n){1&t&&(e.TgZ(0,"bb-modal-ui",0),e.NdJ("cancel",function(){return n.onClose()}),e.TgZ(1,"bb-modal-header-ui"),e.YNc(2,Ut,5,0,"ng-template",1),e.qZA(),e.TgZ(3,"bb-modal-body-ui"),e.YNc(4,gt,2,0,"ng-template",2),e.qZA(),e.TgZ(5,"bb-modal-footer-ui",null,3),e.YNc(7,Rt,6,0,"ng-template",4),e.qZA()()),2&t&&e.Q6J("isOpen",n.dialogOpen)},directives:[p.zS,p.Rb,h.o,p.KF,p.YI,p.cA,u.Hq,p.Qd,p.yk],encapsulation:2}),o})(),xe=(()=>{class o{constructor(t,n,s){this.data=t,this.navigation=n,this.route=s,this.isAborting=this.data.isAborting$,this.loadingData$=this.data.loadingData$,this.currentStep$=this.data.currentStep$,this.authorizedUser$=this.data.authorizedUser}get editMode(){return this.data.editMode}goToAuthorizedUsersList(){this.abortingDialog(!1),this.navigation.navigateToList({relativeTo:this.route})}abortingDialog(t){this.data.setAbortingDialog(t)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(X),e.Y36(ee),e.Y36(A.gz))},o.\u0275cmp=e.Xpm({type:o,selectors:[["bb-authorized-users-container-wrapper"]],decls:8,vars:7,consts:function(){let _,t,n;return _="Loading...",t="Something went wrong",n="Try to reload the page or contact the system administrator.",[[4,"ngIf","ngIfElse"],[3,"dialogOpen","confirm","closed"],["loadingState",""],["errorState",""],[1,"bb-block","bb-block--lg"],[1,"row","bb-stack","bb-stack--center"],["editModeStepper",""],[1,"col-12","col-md-10","col-lg-8",3,"currentStep"],[1,"col-12","col-md-10",3,"currentStep"],[1,"card"],["loaderSize","lg","text",_],[1,"card-body","bb-state-container"],["iconModifier","error-outline","iconColor","dark","title",t,"subtitle",n]]},template:function(t,n){if(1&t&&(e.YNc(0,Ct,2,2,"ng-container",0),e.ALo(1,"async"),e.TgZ(2,"bb-authorized-users-cancel-creation",1),e.NdJ("confirm",function(){return n.goToAuthorizedUsersList()})("closed",function(){return n.abortingDialog(!1)}),e.ALo(3,"async"),e.qZA(),e.YNc(4,Ot,2,0,"ng-template",null,2,e.W1O),e.YNc(6,Dt,3,0,"ng-template",null,3,e.W1O)),2&t){const s=e.MAs(5);e.Q6J("ngIf",e.lcZ(1,3,n.loadingData$))("ngIfElse",s),e.xp6(2),e.Q6J("dialogOpen",e.lcZ(3,5,n.isAborting)||!1)}},directives:[Te,Ie,ue,ve,x.Q,l.s,d.O5,A.lC],pipes:[d.Ov],encapsulation:2}),o})(),Ee=(()=>{class o{constructor(){this.next=new e.vpe,this.back=new e.vpe,this.saveOnly=new e.vpe,this.cancel=new e.vpe,this.isFirstStep=!1}goNext(t){this.next.emit(t)}goBack(){this.back.emit()}saveChanges(t){this.saveOnly.emit(t)}abort(){this.cancel.emit()}ngOnInit(){if(!this.authorizedUser)throw new Error(`"authorizedUser" input is required in "${this.constructor.name}"`)}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275dir=e.lG2({type:o,inputs:{authorizedUser:"authorizedUser",isFirstStep:"isFirstStep",enableAccountLevelFullAccessPermission:"enableAccountLevelFullAccessPermission",levelsConfig:"levelsConfig",permissionsConfig:"permissionsConfig"},outputs:{next:"next",back:"back",saveOnly:"saveOnly",cancel:"cancel"}}),o})(),Be=(()=>{class o extends Ee{constructor(t){super(),this.formBuilder=t,this.suscription$=new tt.w0,this.validateEmailMatch=()=>{const n=this.formGetter("email","emailGroup"),s=this.formGetter("confirmationEmail","emailGroup");return(null==n?void 0:n.value)!==(null==s?void 0:s.value)?{validateMailConfirmation:!0}:null}}ngOnInit(){var t;super.ngOnInit(),this.userDetailsForm=this.formBuilder.group({firstName:[this.authorizedUser.firstName,S.kI.required],lastName:[this.authorizedUser.lastName,S.kI.required],emailGroup:this.formBuilder.group({email:[this.authorizedUser.email,S.kI.compose([S.kI.required,S.kI.email])],confirmationEmail:[this.authorizedUser.email,S.kI.compose([S.kI.required,S.kI.email])]}),mobileNumber:[this.authorizedUser.mobileNumber,S.kI.required]}),this.suscription$.add(null===(t=this.formGetter("emailGroup"))||void 0===t?void 0:t.valueChanges.subscribe(()=>{const n=this.formGetter("confirmationEmail","emailGroup");n&&(n.setValidators([S.kI.required,S.kI.email,this.validateEmailMatch]),n.updateValueAndValidity({emitEvent:!1}))}))}isFieldValid(t,n){const s=this.formGetter(t,n);return!!s&&(s.valid||s.untouched)}save(){var t,n;(null===(t=this.userDetailsForm)||void 0===t?void 0:t.valid)?this.goNext(this.formatAuthorizedUserValue()):null===(n=this.userDetailsForm)||void 0===n||n.markAllAsTouched()}formatAuthorizedUserValue(){const{firstName:t,lastName:n,emailGroup:{email:s},mobileNumber:i}=this.userDetailsForm.value;return{firstName:t,lastName:n,email:s,mobileNumber:i}}formGetter(t,n){var s,i,g;return n?null===(i=null===(s=this.userDetailsForm)||void 0===s?void 0:s.get(n))||void 0===i?void 0:i.get(t):null===(g=this.userDetailsForm)||void 0===g?void 0:g.get(t)}ngOnDestroy(){this.suscription$.unsubscribe()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(S.qu))},o.\u0275cmp=e.Xpm({type:o,selectors:[["bb-authorized-users-user-details"]],features:[e.qOj],decls:42,vars:18,consts:function(){let _,t,n,s,i,g,f,Z,T,F,$,te,Ae,Se,pe,me,Ue;return _=" Who would you like to give access to? ",t="First Name",n=" First name is required ",s="Last Name",i=" Last name is required ",g="Email",f="Confirm Email",Z="Phone Number",T=" Phone number is required ",F=" Continue ",$=" Cancel ",te=" We will send a confirmation to their email address. ",Ae=" Email address is required ",Se=" Invalid email format ",pe=" Confirm email address is required ",me=" Invalid email format ",Ue=" Email addresses do not match ",[[3,"formGroup","submit"],["bbAuthorizedUsersAccessibilityKeyboard","",1,"bb-block","bb-block--lg"],["data-role","user-details-header"],_,[1,"bb-block"],[1,"row"],[1,"col-12","col-sm-6","form-group"],["formControlName","firstName","data-role","user-details-first-name","label",t,3,"maxLength"],[3,"showErrors"],["data-role","user-details-first-name-validation-msg"],n,["formControlName","lastName","data-role","user-details-last-name","label",s,3,"maxLength"],["data-role","user-details-last-name-validation-msg"],i,["formGroupName","emailGroup"],["formControlName","email","data-role","user-details-email","label",g,3,"required"],[4,"ngIf"],["data-role","user-details-email-validation-msg",3,"showErrors"],[4,"ngFor","ngForOf"],["formControlName","confirmationEmail","data-role","user-details-confirmation-email","label",f,3,"required"],["data-role","user-details-confirmation-email-validation-msg",3,"showErrors"],["formControlName","mobileNumber","data-role","user-details-phone-number","label",Z,3,"required"],["data-role","user-details-phone-number-validation-msg"],T,[1,"bb-button-bar"],["bbButton","","data-role","user-details-continue-button","type","submit",1,"bb-button-bar__button"],F,["bbButton","","data-role","user-details-cancel-button","color","link",1,"bb-button-bar__button","bb-button-bar__button--across",3,"click"],$,[1,"bb-text-support","text-small"],te,[3,"ngSwitch",4,"ngIf"],[3,"ngSwitch"],[4,"ngSwitchCase"],Ae,Se,pe,me,Ue]},template:function(t,n){if(1&t&&(e.TgZ(0,"form",0),e.NdJ("submit",function(){return n.save()}),e.TgZ(1,"div",1)(2,"h2",2),e.SDv(3,3),e.qZA()(),e.TgZ(4,"div",4)(5,"div",5)(6,"div",6),e._UZ(7,"bb-input-text-ui",7),e.TgZ(8,"bb-input-validation-message-ui",8)(9,"span",9),e.SDv(10,10),e.qZA()()()(),e.TgZ(11,"div",5)(12,"div",6),e._UZ(13,"bb-input-text-ui",11),e.TgZ(14,"bb-input-validation-message-ui",8)(15,"span",12),e.SDv(16,13),e.qZA()()()(),e.ynx(17,14),e.TgZ(18,"div",5)(19,"div",6),e._UZ(20,"bb-input-email-ui",15),e.YNc(21,Nt,3,0,"ng-container",16),e.TgZ(22,"bb-input-validation-message-ui",17),e.YNc(23,vt,2,1,"ng-container",18),e.ALo(24,"keyvalue"),e.qZA()()(),e.TgZ(25,"div",5)(26,"div",6),e._UZ(27,"bb-input-email-ui",19),e.TgZ(28,"bb-input-validation-message-ui",20),e.YNc(29,Zt,2,1,"ng-container",18),e.ALo(30,"keyvalue"),e.qZA()()(),e.BQk(),e.TgZ(31,"div",5)(32,"div",6),e._UZ(33,"bb-input-phone-ui",21),e.TgZ(34,"bb-input-validation-message-ui",8)(35,"span",22),e.SDv(36,23),e.qZA()()()()(),e.TgZ(37,"div",24)(38,"button",25),e.SDv(39,26),e.qZA(),e.TgZ(40,"button",27),e.NdJ("click",function(){return n.abort()}),e.SDv(41,28),e.qZA()()()),2&t){let s,i;e.Q6J("formGroup",n.userDetailsForm),e.xp6(7),e.Q6J("maxLength",256),e.xp6(1),e.Q6J("showErrors",!n.isFieldValid("firstName")),e.xp6(5),e.Q6J("maxLength",256),e.xp6(1),e.Q6J("showErrors",!n.isFieldValid("lastName")),e.xp6(6),e.Q6J("required",!0),e.xp6(1),e.Q6J("ngIf",n.isFieldValid("email","emailGroup")),e.xp6(1),e.Q6J("showErrors",!n.isFieldValid("email","emailGroup")),e.xp6(1),e.Q6J("ngForOf",e.lcZ(24,14,null==(s=n.formGetter("email","emailGroup"))?null:s.errors)),e.xp6(4),e.Q6J("required",!0),e.xp6(1),e.Q6J("showErrors",!n.isFieldValid("confirmationEmail","emailGroup")),e.xp6(1),e.Q6J("ngForOf",e.lcZ(30,16,null==(i=n.formGetter("confirmationEmail","emailGroup"))?null:i.errors)),e.xp6(4),e.Q6J("required",!0),e.xp6(1),e.Q6J("showErrors",!n.isFieldValid("mobileNumber"))}},directives:[c.m,C.d,m.v,N.W,S._Y,S.JL,S.sg,Q,S.JJ,S.u,S.x0,S.Q7,d.O5,d.sg,d.RF,d.n9,u.Hq],pipes:[d.Nd],encapsulation:2}),o})(),ze=(()=>{class o extends Ee{constructor(){super(...arguments),this.model={},this.productNumberFormat=Ge,this.showError=!1}save(){this.hasAccounts()?this.goNext({permissions:this.cleanPermissions(this.createAuthorizedPermission())}):this.showError=!0}closeError(){this.showError=!1}cleanPermissions(t){const n=t.filter(s=>s.level===y.FULL_ACCESS);return n.length>0&&n.length!==this.accounts.length?t.map(s=>Object.assign(Object.assign({},s),{level:y.VIEW_ONLY})):[...t]}createAuthorizedPermission(){return Object.keys(this.model).filter(t=>!!this.model[t]).map(t=>({account:this.accounts.find(n=>n.id===t),level:this.setLevelToPermissionByAccount(t)}))}setLevelToPermissionByAccount(t){if(this.authorizedUser.permissions){const n=this.authorizedUser.permissions.find(s=>s.account.id===t);return(null==n?void 0:n.level)?n.level:y.VIEW_ONLY}return y.VIEW_ONLY}ngOnInit(){super.ngOnInit(),this.setPresetPermissions(this.authorizedUser.permissions)}setPresetPermissions(t=[]){t.forEach(n=>{this.model[n.account.id]=!0})}hasAccounts(){return Object.keys(this.model).reduce((t,n)=>this.model[n]?t+1:t,0)>0}}return o.\u0275fac=function(){let _;return function(n){return(_||(_=e.n5z(o)))(n||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["bb-authorized-users-accounts"]],inputs:{accounts:"accounts"},features:[e.qOj],decls:18,vars:3,consts:function(){let _,t,n,s,i,g;return _=" Which accounts will they have access to? ",t=" You will be able to specify permissions for each account in the next step. ",n="You need to select at least one account in order to continue",s=" Continue ",i=" Cancel ",g=" Back ",[["data-role","user-accounts-form",3,"ngSubmit"],["authorizedUsersAccountForm","ngForm"],["bbAuthorizedUsersAccessibilityKeyboard","",1,"bb-block","bb-block--xl"],["data-role","user-accounts-header"],_,["data-role","user-accounts-subHeader",1,"bb-text-support","text-small"],t,["data-role","user-accounts-error-message","title",n,3,"dismissible","closed",4,"ngIf"],["ngModelGroup","list",1,"bb-list"],[1,"bb-block","bb-block--lg"],["label","Select all my accounts","data-role","user-accounts-select-all"],["class","bb-block bb-block--lg","data-role","user-accounts-list",4,"ngFor","ngForOf"],[1,"bb-button-bar"],["bbButton","","data-role","user-accounts-continue-button","type","submit",1,"bb-button-bar__button"],s,["bbButton","","data-role","user-accounts-back-button","class","bb-button-bar__button","color","secondary",3,"click",4,"ngIf"],["bbButton","","data-role","user-accounts-cancel-button","color","link",1,"bb-button-bar__button","bb-button-bar__button--across",3,"click"],i,["data-role","user-accounts-error-message","title",n,3,"dismissible","closed"],["data-role","user-accounts-list",1,"bb-block","bb-block--lg"],["data-role","user-accounts-account-checkbox",3,"name","ngModel","ngModelChange"],["data-role","user-accounts-account-name",1,"bb-stack__item--spacing-sm","highlight"],["class","bb-text-support","data-role","user-accounts-account-number",4,"ngIf"],["data-role","user-accounts-account-number",1,"bb-text-support"],["bbButton","","data-role","user-accounts-back-button","color","secondary",1,"bb-button-bar__button",3,"click"],g]},template:function(t,n){1&t&&(e.TgZ(0,"form",0,1),e.NdJ("ngSubmit",function(){return n.save()}),e.TgZ(2,"div",2)(3,"h2",3),e.SDv(4,4),e.qZA(),e.TgZ(5,"p",5),e.SDv(6,6),e.qZA()(),e.YNc(7,Pt,1,1,"bb-alert-ui",7),e.TgZ(8,"ul",8)(9,"li",9),e._UZ(10,"bb-checkbox-group-ui",10),e.qZA(),e.YNc(11,yt,5,4,"li",11),e.qZA(),e.TgZ(12,"div",12)(13,"button",13),e.SDv(14,14),e.qZA(),e.YNc(15,Gt,2,0,"button",15),e.TgZ(16,"button",16),e.NdJ("click",function(){return n.abort()}),e.SDv(17,17),e.qZA()()()),2&t&&(e.xp6(7),e.Q6J("ngIf",n.showError),e.xp6(4),e.Q6J("ngForOf",n.accounts),e.xp6(4),e.Q6J("ngIf",!n.isFirstStep))},directives:[M.w,D.A,b.r,S._Y,S.JL,S.F,Q,d.O5,S.Mq,d.sg,S.JJ,S.On,u.Hq],pipes:[I.V9],encapsulation:2}),o})(),Ye=(()=>{class o{constructor(){this.icon="",this.title="",this.disabled=!1,this.permissions=[]}ngOnInit(){if(this.permissionsAssigned&&this.permissionsConfig){const t=this.permissionsAssigned;this.permissions=this.permissionsConfig.map((n,s)=>({name:n,value:t[s]}))}}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["bb-authorized-users-permissions-card"]],inputs:{icon:"icon",title:"title",name:"name",currentName:"currentName",permissionsConfig:"permissionsConfig",permissionsAssigned:"permissionsAssigned",disabled:"disabled"},decls:13,vars:10,consts:function(){let _,t;return _="include: ",t=" Applied to all Selected Accounts\n",[[1,"bb-authorized-users-permission-card","card","card-sm",3,"ngClass"],["bbAuthorizedUsersAccessibilityKeyboard","",1,"card-body"],[1,"bb-stack"],[1,"bb-stack__item","bb-stack__item--push-right"],[1,"bb-authorized-user-permission-card__radio"],[3,"name","color"],[1,"bb-text-align-center"],[3,"name"],[1,"bb-block","bb-block--md","bb-highlight","bb-text-align-center"],[1,"bb-list"],["class","bb-stack bb-block bb-block--md",4,"ngFor","ngForOf"],["data-role","user-permissions-card-disclaimer","class","bb-authorized-users-permission-card__disclaimer text-small text-center",4,"ngIf"],[1,"bb-stack","bb-block","bb-block--md"],["size","sm","aria-label",_,1,"bb-stack__item",3,"color","name"],[1,"bb-text-support","bb-subheader","bb-subheader--regular"],["data-role","user-permissions-card-disclaimer",1,"bb-authorized-users-permission-card__disclaimer","text-small","text-center"],t]},template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),e._UZ(5,"bb-icon-ui",5),e.qZA()()(),e.TgZ(6,"div",6),e._UZ(7,"bb-icon-ui",7),e.qZA(),e.TgZ(8,"div",8),e._uU(9),e.qZA(),e.TgZ(10,"ul",9),e.YNc(11,Kt,4,3,"li",10),e.qZA()()(),e.YNc(12,xt,2,0,"div",11)),2&t&&(e.Q6J("ngClass",e.WLB(7,Yt,n.name===n.currentName,n.disabled)),e.xp6(5),e.Q6J("name",n.name===n.currentName?"radio-button-checked":"radio-button-unchecked")("color",n.name===n.currentName?"primary":"inactive"),e.xp6(2),e.Q6J("name",n.icon),e.xp6(2),e.hij(" ",n.title," "),e.xp6(2),e.Q6J("ngForOf",n.permissions),e.xp6(1),e.Q6J("ngIf",n.name===n.currentName))},directives:[h.o,d.mk,Q,d.sg,d.O5],encapsulation:2}),o})(),Je=(()=>{class o extends Ee{constructor(){super(...arguments),this.authorizedPermissionLevel=y,this._isCustomPermission=!1}get isCustomPermission(){return this._isCustomPermission}set isCustomPermission(t){this._isCustomPermission=t,this.generalLevel=void 0}applyLevelToAccounts(t){var n;const s=null===(n=this.authorizedUser.permissions)||void 0===n?void 0:n.map(i=>Object.assign(Object.assign({},i),{level:t||y.VIEW_ONLY}));return Object.assign(Object.assign({},this.authorizedUser),{permissions:s})}applyLevelToAccount(t){const n=[...this.authorizedUser.permissions||[]],s=n.findIndex(i=>i.account.id===t.account.id);return-1!==s&&(n[s]=t),Object.assign(Object.assign({},this.authorizedUser),{permissions:n})}areTheSameLevel(){var t,n,s,i,g;const f=(null===(t=this.authorizedUser)||void 0===t?void 0:t.permissions)&&this.authorizedUser.permissions[0].level;return((null===(s=null===(n=this.authorizedUser)||void 0===n?void 0:n.permissions)||void 0===s?void 0:s.reduce((T,F)=>f===F.level?T+1:T,0))||-1)===(null===(g=null===(i=this.authorizedUser)||void 0===i?void 0:i.permissions)||void 0===g?void 0:g.length)}setGeneralLevel(t){this.isCustomPermission||(this.generalLevel=t,this.saveChanges(this.applyLevelToAccounts(this.generalLevel)))}apply(){this.goNext(this.authorizedUser)}updateAccount(t){this.saveChanges(this.applyLevelToAccount(t))}disableCard(t){var n,s,i,g;return!!(null===(n=this.authorizedUser)||void 0===n?void 0:n.permissions)&&!((null===(i=null===(s=this.authorizedUser)||void 0===s?void 0:s.permissions)||void 0===i?void 0:i.length)===(null===(g=this.accounts)||void 0===g?void 0:g.length)||t.validate())}togglePermissionMode(){this.isCustomPermission&&this.levelsConfig?this.saveChanges(this.applyLevelToAccounts(this.levelsConfig[0].level)):this.levelsConfig&&this.setGeneralLevel(this.levelsConfig[0].level)}ngOnInit(){super.ngOnInit(),this.areTheSameLevel()?this.generalLevel=this.authorizedUser.permissions&&this.authorizedUser.permissions[0].level:this.isCustomPermission=!0}}return o.\u0275fac=function(){let _;return function(n){return(_||(_=e.n5z(o)))(n||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["bb-authorized-users-permissions"]],inputs:{accounts:"accounts"},features:[e.qOj],decls:24,vars:4,consts:function(){let _,t,n,s,i,g;return _=" What permissions do you want to give? ",t=" Choose one permission for all selected accounts or different permissions for each account. ",n=" Continue ",s=" Back ",i=" Cancel ",g=" Keep in mind that you can only give Full Access permissions to all accounts at once. ",[["data-role","user-permissions-form"],["authorizedUsersPermissionsForm","ngForm"],["bbAuthorizedUsersAccessibilityKeyboard","",1,"bb-block","bb-block--lg"],["data-role","user-permissions-header"],_,["data-role","user-permissions-subHeader",1,"bb-text-support","text-small"],t,[1,"row","bb-block","bb-block--xl"],["class","col-lg-4 bb-block bb-block--md-md-down",3,"title","icon","name","currentName","disabled","permissionsConfig","permissionsAssigned","click",4,"ngFor","ngForOf"],[1,"bb-stack","bb-block","bb-block--xl"],[1,"bb-stack__item","bb-stack__item--spacing-sm","bb-stack__item--align-top"],["name","customPermissions","data-role","user-permissions-switch","aria-label","Choose different permissions for each account",3,"ngModel","ngModelChange","click"],[1,"bb-stack__item"],["data-role","user-permissions-switch-label",1,"bb-switch__label"],["class","bb-text-support text-small","data-role","user-permissions-switch-description",4,"ngIf"],["data-role","user-permissions-table",3,"isEditing","enableAccountLevelFullAccessPermission","selectedAccounts","levelsConfig","updateAccount",4,"ngIf"],[1,"bb-button-bar"],["bbButton","","data-role","user-permissions-continue-button",1,"bb-button-bar__button",3,"click"],n,["bbButton","","data-role","user-permissions-back-button","color","secondary",1,"bb-button-bar__button",3,"click"],s,["bbButton","","data-role","user-permissions-cancel-button","color","link",1,"bb-button-bar__button","bb-button-bar__button--across",3,"click"],i,[1,"col-lg-4","bb-block","bb-block--md-md-down",3,"title","icon","name","currentName","disabled","permissionsConfig","permissionsAssigned","click"],["data-role","user-permissions-switch-description",1,"bb-text-support","text-small"],g,["data-role","user-permissions-table",3,"isEditing","enableAccountLevelFullAccessPermission","selectedAccounts","levelsConfig","updateAccount"]]},template:function(t,n){1&t&&(e.TgZ(0,"form",0,1)(2,"div",2)(3,"h2",3),e.SDv(4,4),e.qZA(),e.TgZ(5,"p",5),e.SDv(6,6),e.qZA()(),e.TgZ(7,"div",7),e.YNc(8,Ft,1,7,"bb-authorized-users-permissions-card",8),e.qZA(),e.TgZ(9,"div",9)(10,"div",10)(11,"bb-switch-ui",11),e.NdJ("ngModelChange",function(i){return n.isCustomPermission=i})("click",function(){return n.togglePermissionMode()}),e.qZA()(),e.TgZ(12,"div",12)(13,"label",13),e._uU(14," Choose different permissions for each account "),e.qZA(),e.YNc(15,wt,2,0,"div",14),e.qZA()(),e.YNc(16,kt,1,4,"bb-authorized-users-permissions-levels-table",15),e.TgZ(17,"div",16)(18,"button",17),e.NdJ("click",function(){return n.apply()}),e.SDv(19,18),e.qZA(),e.TgZ(20,"button",19),e.NdJ("click",function(){return n.goBack()}),e.SDv(21,20),e.qZA(),e.TgZ(22,"button",21),e.NdJ("click",function(){return n.abort()}),e.SDv(23,22),e.qZA()()()),2&t&&(e.xp6(8),e.Q6J("ngForOf",n.levelsConfig),e.xp6(3),e.Q6J("ngModel",n.isCustomPermission),e.xp6(4),e.Q6J("ngIf",!n.enableAccountLevelFullAccessPermission),e.xp6(1),e.Q6J("ngIf",n.isCustomPermission))},directives:[Ye,R.q,ae,S._Y,S.JL,S.F,Q,d.sg,S.JJ,S.On,d.O5,u.Hq],encapsulation:2}),o})(),Le=(()=>{class o extends Ee{constructor(t){super(),this.formBuilder=t,this.showError=!1,this.isSaving=!1,this.showErrorChange=new e.vpe,this.confirmationDetailsForm=this.formBuilder.group({termsCB:[!1,S.kI.requiredTrue]})}saveUser(){this.confirmationDetailsForm.valid?this.goNext(this.authorizedUser):this.confirmationDetailsForm.markAllAsTouched()}closeError(){this.showErrorChange.emit(!1)}getControl(t){return this.confirmationDetailsForm.get(t)}isFieldValid(t){const n=this.getControl(t);return n&&(n.valid||n.untouched)}hasError(t,n){const s=this.getControl(t);if(s&&s.errors)return s.errors[n]}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(S.qu))},o.\u0275cmp=e.Xpm({type:o,selectors:[["bb-authorized-users-confirmation"]],inputs:{showError:"showError",isSaving:"isSaving",termsConditions:"termsConditions"},outputs:{showErrorChange:"showErrorChange"},features:[e.qOj],decls:30,vars:12,consts:function(){let _,t,n,s,i,g,f,Z,T;return _=" Please review and confirm the authorized user information. ",t="Something Went Wrong",n="We failed to confirm this authorized user, please try again later.",s=" Terms and Conditions ",i="I have read and accept the terms and conditions.",g="Confirm",f=" Back ",Z=" Cancel ",T=" You are required to accept terms and conditions ",[["data-role","user-confirmation-form",3,"formGroup"],["bbAuthorizedUsersAccessibilityKeyboard","",1,"bb-block","bb-block--lg"],["data-role","user-confirmation-header",1,"bb-block","bb-block--lg"],_,["data-role","user-confirmation-error-message","title",t,"message",n,3,"dismissible","closed",4,"ngIf"],["data-role","user-confirmation-fullName",1,"bb-block","bb-block--sm"],["data-role","user-confirmation-email",1,"bb-block","bb-block--sm"],["data-role","user-confirmation-phone-number",1,"bb-block","bb-block--sm"],[1,"bb-block","bb-block--xl"],["data-role","user-confirmation-permissions-table",3,"selectedAccounts","levelsConfig"],["data-role","user-confirmation-terms-header",1,"bb-block","bb-block--md","bb-highlight"],s,["bbAuthorizedUsersAccessibilityKeyboard","",1,"bb-authorized-users-terms","bb-block","bb-block--md"],[4,"ngTemplateOutlet"],["formControlName","termsCB","data-role","user-confirmation-terms-checkbox","label",i,1,"bb-stack__item",3,"id"],[3,"showErrors"],["data-role","user-confirmation-terms-validation-msg",4,"ngIf"],[1,"bb-button-bar"],["color","primary","data-role","user-confirmation-confirm-button",1,"bb-button-bar__button",3,"isLoading","click"],g,["bbButton","","data-role","user-confirmation-back-button","color","secondary",1,"bb-button-bar__button",3,"click"],f,["bbButton","","data-role","user-confirmation-cancel-button","color","link",1,"bb-button-bar__button","bb-button-bar__button--across",3,"click"],Z,["termsAndConditions",""],["data-role","user-confirmation-error-message","title",t,"message",n,3,"dismissible","closed"],["data-role","user-confirmation-terms-validation-msg"],T,["data-role","user-confirmation-terms-text",3,"innerHTML"]]},template:function(t,n){if(1&t&&(e.TgZ(0,"form",0)(1,"div",1)(2,"h2",2),e.SDv(3,3),e.qZA(),e.YNc(4,Wt,1,1,"bb-alert-ui",4),e.TgZ(5,"h3",5),e._uU(6),e.qZA(),e.TgZ(7,"div",6),e._uU(8),e.qZA(),e.TgZ(9,"div",7),e._uU(10),e.qZA()(),e.TgZ(11,"div",8),e._UZ(12,"bb-authorized-users-permissions-levels-table",9),e.qZA(),e.TgZ(13,"div",8)(14,"div",10),e.SDv(15,11),e.qZA(),e.TgZ(16,"div",12),e.YNc(17,Qt,1,0,"ng-container",13),e.qZA(),e._UZ(18,"bb-input-checkbox-ui",14),e.TgZ(19,"bb-input-validation-message-ui",15),e.YNc(20,$t,2,0,"span",16),e.qZA()(),e.TgZ(21,"div",17)(22,"bb-load-button-ui",18),e.NdJ("click",function(){return!n.isSaving&&n.saveUser()}),e.SDv(23,19),e.qZA(),e.TgZ(24,"button",20),e.NdJ("click",function(){return n.goBack()}),e.SDv(25,21),e.qZA(),e.TgZ(26,"button",22),e.NdJ("click",function(){return n.abort()}),e.SDv(27,23),e.qZA()()(),e.YNc(28,qt,1,1,"ng-template",null,24,e.W1O)),2&t){const s=e.MAs(29);e.Q6J("formGroup",n.confirmationDetailsForm),e.xp6(4),e.Q6J("ngIf",n.showError),e.xp6(2),e.hij(" ",n.authorizedUser.firstName+" "+n.authorizedUser.lastName," "),e.xp6(2),e.hij(" ",n.authorizedUser.email," "),e.xp6(2),e.hij(" ",n.authorizedUser.mobileNumber," "),e.xp6(2),e.Q6J("selectedAccounts",n.authorizedUser.permissions)("levelsConfig",n.levelsConfig),e.xp6(5),e.Q6J("ngTemplateOutlet",s),e.xp6(1),e.Q6J("id","confirmationTosCheckbox"),e.xp6(1),e.Q6J("showErrors",!n.isFieldValid("termsCB")),e.xp6(1),e.Q6J("ngIf",n.hasError("termsCB","required")),e.xp6(2),e.Q6J("isLoading",n.isSaving)}},directives:[M.w,ae,b.r,C.d,B.K,S._Y,S.JL,S.sg,Q,d.O5,d.tP,S.JJ,S.u,u.Hq],encapsulation:2}),o})(),Ze=(()=>{class o extends ce{constructor(){super(...arguments),this.succeedStatus="",this.timestamp=(new Date).getTime()}}return o.\u0275fac=function(){let _;return function(n){return(_||(_=e.n5z(o)))(n||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["bb-authorized-users-confirmation-complete"]],inputs:{authorizedUser:"authorizedUser",successImg:"successImg",succeedStatus:"succeedStatus"},features:[e.qOj],decls:8,vars:1,consts:function(){let _,t,n,s,i,g;return _="Confirmation succeeded",t=" New authorized user! ",n=" will receive an email with a link to complete the registration process. ",s=" User permissions updated! ",i=" permissions were edited successfully. ",g=" Got it! ",[["data-role","complete-modal",3,"isOpen","cancel"],["bbCustomModalHeader",""],["bbCustomModalBody",""],["footerRef",""],["bbCustomModalFooter",""],[1,"bb-stack"],[1,"bb-stack__item","bb-stack__item--push-right"],["bbButton","","data-role","complete-modal-close-button","color","unstyled","aria-label","close confirmation complete modal","i18-aria-label","Close confirmation complete|Button for close confirmation complete@@authorized.users.confirmation.complete.closed.button",3,"click"],["color","muted","name","clear","size","lg"],[1,"bb-text-align-center","bb-block"],["alt",_,"data-role","confirmation-success-anim","data-role","complete-modal-image",1,"img-fluid",3,"src"],[4,"ngIf"],["data-role","complete-create-modal-header",1,"bb-text-bold"],t,["data-role","complete-create-modal-subHeader",1,"bb-text-support","text-small"],n,["data-role","complete-edit-modal-header",1,"bb-text-bold"],s,["data-role","complete-edit-modal-subHeader",1,"bb-text-support","text-small"],i,[1,"bb-button-bar","bb-button-bar--center"],["bbButton","","data-role","complete-modal-gotIt-button","color","primary",1,"bb-button-bar__button",3,"click"],g]},template:function(t,n){1&t&&(e.TgZ(0,"bb-modal-ui",0),e.NdJ("cancel",function(){return n.onClose()}),e.TgZ(1,"bb-modal-header-ui"),e.YNc(2,Vt,4,0,"ng-template",1),e.qZA(),e.TgZ(3,"bb-modal-body-ui"),e.YNc(4,en,4,3,"ng-template",2),e.qZA(),e.TgZ(5,"bb-modal-footer-ui",null,3),e.YNc(7,tn,3,0,"ng-template",4),e.qZA()()),2&t&&e.Q6J("isOpen",n.dialogOpen)},directives:[p.zS,p.Rb,h.o,p.KF,p.YI,p.cA,u.Hq,p.Qd,d.O5,p.yk],encapsulation:2,changeDetection:0}),o})();const Yn=[a.BX,u.hJ,h.Q,R.o,D.J,b.b,I.nj,N.F,m.f,c.j,S.UX,S.u5,C.w,b.b,p.zk,M.n,x.p,B.C,l.P,le];let Fn=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[d.ez,S.u5,S.UX,A.Bz,...Yn],a.BX,u.hJ,h.Q,R.o,D.J,b.b,I.nj,N.F,m.f,c.j,S.UX,S.u5,C.w,b.b,p.zk,M.n,x.p,B.C,l.P,le]}),o})(),wn=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["bb-authorized-users-journey"]],decls:1,vars:0,template:function(t,n){1&t&&e._UZ(0,"router-outlet")},directives:[A.lC],encapsulation:2}),o})();const kn=o=>{const _=o.error;if(_&&_.errors&&_.errors[0]&&_.errors[0].message)return _.errors[0].message};let we=(()=>{class o{constructor(){this.authorizedUserStatus=V}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["bb-authorized-users-list-status-badge"]],inputs:{authorizedUsersStatus:"authorizedUsersStatus"},decls:4,vars:3,consts:function(){let _,t,n;return _="Active",t="Awaiting Registration",n="Paused",[[1,"bb-stack","bb-block","bb-block--md"],[4,"ngIf"],["text",_,"color","success"],["text",t,"color","info"],["text",n,"color","warning"]]},template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,An,2,0,"ng-container",1),e.YNc(2,Sn,2,0,"ng-container",1),e.YNc(3,pn,2,0,"ng-container",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",n.authorizedUsersStatus===n.authorizedUserStatus.ACTIVE),e.xp6(1),e.Q6J("ngIf",n.authorizedUsersStatus===n.authorizedUserStatus.AWAITING_REGISTRATION),e.xp6(1),e.Q6J("ngIf",n.authorizedUsersStatus===n.authorizedUserStatus.PAUSED))},directives:[he.F,d.O5],encapsulation:2}),o})(),ke=(()=>{class o{constructor(){this.edit=new e.vpe,this.remove=new e.vpe,this.paused=new e.vpe,this.resumed=new e.vpe,this.authorizedUserStatus=V,this.arePermissionsOpen=!1,this.isUserActionsEnabled=!1}togglePermissionsVisibility(){this.arePermissionsOpen=!this.arePermissionsOpen}editPermissions(){this.edit.emit(this.authorizedUsersItem)}removeUser(){this.remove.emit(this.authorizedUsersItem)}pauseUser(){this.paused.emit(this.authorizedUsersItem)}resumeUser(){this.resumed.emit(this.authorizedUsersItem)}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["bb-authorized-users-list-item"]],inputs:{authorizedUsersItem:"authorizedUsersItem",levelsConfig:"levelsConfig"},outputs:{edit:"edit",remove:"remove",paused:"paused",resumed:"resumed"},decls:26,vars:15,consts:function(){let _,t,n,s,i,g,f,Z;return _="Options",t=" Edit User Permissions ",n=" Remove Authorized User ",s=" Pause Permissions ",i=" Resume Permissions ",g=" Username: ",f=" Hide User Permissions ",Z=" See User Permissions ",[[1,"card","card-lg"],["bbAuthorizedUsersAccessibilityKeyboard","",1,"card-body"],[1,"bb-stack","bb-stack--density-sm"],[1,"bb-stack__item"],["data-role","user-fullName",1,"bb-heading-3"],["data-role","user-status-badge",1,"bb-stack__item"],[3,"authorizedUsersStatus"],[1,"bb-stack__item","bb-stack__item--push-right"],["icon","ellipsis-h","btnColor","link-dark","container","body","position","bottom-right","data-role","options-dropdown","aria-label",_,3,"btnCircle"],["bbDropdownMenuItem",""],[1,"bb-block","bb-block--sm"],["data-role","user-email",1,"bb-block","bb-block--xs","bb-text-support","text-small"],["data-role","user-phone-number",1,"bb-text-support","text-small"],["bbAuthorizedUsersAccessibilityKeyboard","",3,"ngbCollapse"],["class","bb-block bb-block--xs","data-role","user-username",4,"ngIf"],["data-role","user-permissions-table",1,"bb-block","bb-block--md"],[3,"selectedAccounts","levelsConfig"],["bbButton","","data-role","permissions-button","buttonSize","sm","color","link-text",3,"click"],["size","md",3,"name"],[4,"ngIf"],["bbAuthorizedUsersAccessibilityKeyboard","","rel","noopener","role","menuitem","data-role","edit-item","target","_blank",1,"dropdown-item",3,"click"],[1,"bb-inline-stack"],["name","edit","size","md",1,"bb-inline-stack__item"],[1,"bb-inline-stack__item"],t,[4,"ngIf","ngIfElse"],["resumeAuthorizedUserOption",""],["bbAuthorizedUsersAccessibilityKeyboard","","rel","noopener","role","menuitem","data-role","remove-item","target","_blank",1,"dropdown-item",3,"click"],["name","delete","size","md","color","danger",1,"bb-inline-stack__item"],[1,"bb-inline-stack__item","bb-text-danger"],n,["bbAuthorizedUsersAccessibilityKeyboard","","rel","noopener","role","menuitem","data-role","pause-item","target","_blank",1,"dropdown-item",3,"click"],["name","pause","size","md",1,"bb-inline-stack__item"],s,["bbAuthorizedUsersAccessibilityKeyboard","","rel","noopener","role","menuitem","data-role","resume-item","target","_blank",1,"dropdown-item",3,"click"],["name","update","size","md",1,"bb-inline-stack__item"],i,["data-role","user-username",1,"bb-block","bb-block--xs"],[1,"bb-text-bold","text-small"],g,[1,"bb-text-support","text-small"],f,Z]},template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"p",4),e._uU(5),e.qZA()(),e.TgZ(6,"div",5),e._UZ(7,"bb-authorized-users-list-status-badge",6),e.qZA(),e.TgZ(8,"div",7)(9,"bb-dropdown-menu-ui",8),e.YNc(10,gn,13,2,"ng-template",9),e.qZA()()(),e.TgZ(11,"div",10)(12,"div",11),e._uU(13),e.qZA(),e.TgZ(14,"div",12),e._uU(15),e.ALo(16,"phoneNumber"),e.qZA()(),e.TgZ(17,"div",13),e.YNc(18,Rn,5,1,"div",14),e.TgZ(19,"div",15),e._UZ(20,"bb-authorized-users-permissions-levels-table",16),e.qZA()(),e.TgZ(21,"div")(22,"button",17),e.NdJ("click",function(){return n.togglePermissionsVisibility()}),e._UZ(23,"bb-icon-ui",18),e.YNc(24,hn,2,0,"span",19),e.YNc(25,bn,2,0,"span",19),e.qZA()()()()),2&t&&(e.xp6(5),e.hij(" ",(null==n.authorizedUsersItem?null:n.authorizedUsersItem.firstName)+" "+(null==n.authorizedUsersItem?null:n.authorizedUsersItem.lastName)," "),e.xp6(2),e.Q6J("authorizedUsersStatus",null==n.authorizedUsersItem?null:n.authorizedUsersItem.status),e.xp6(2),e.Q6J("btnCircle",!0),e.xp6(4),e.hij(" ",null==n.authorizedUsersItem?null:n.authorizedUsersItem.email," "),e.xp6(2),e.hij(" ",e.xi3(16,12,null==n.authorizedUsersItem?null:n.authorizedUsersItem.mobileNumber,"US")," "),e.xp6(2),e.Q6J("ngbCollapse",!n.arePermissionsOpen),e.xp6(1),e.Q6J("ngIf",null==n.authorizedUsersItem?null:n.authorizedUsersItem.username),e.xp6(2),e.Q6J("selectedAccounts",null==n.authorizedUsersItem?null:n.authorizedUsersItem.permissions)("levelsConfig",n.levelsConfig),e.xp6(3),e.Q6J("name",n.arePermissionsOpen?"toggle-up":"toggle-down"),e.xp6(1),e.Q6J("ngIf",n.arePermissionsOpen),e.xp6(1),e.Q6J("ngIf",!n.arePermissionsOpen))},directives:[we,se.N9,h.o,ae,Q,se.i4,d.O5,be._D,u.Hq],pipes:[fe.X],encapsulation:2}),o})(),We=(()=>{class o{constructor(){this.edit=new e.vpe,this.remove=new e.vpe,this.paused=new e.vpe,this.resumed=new e.vpe,this.createAuthorizedUser=new e.vpe}goToAuthorizedUser(){this.createAuthorizedUser.emit()}editPermissions(t){this.edit.emit(t)}removeUser(t){this.remove.emit(t)}pauseUser(t){this.paused.emit(t)}resumeUser(t){this.resumed.emit(t)}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["bb-authorized-users-list"]],inputs:{authorizedUsersList:"authorizedUsersList",levelsConfig:"levelsConfig"},outputs:{edit:"edit",remove:"remove",paused:"paused",resumed:"resumed",createAuthorizedUser:"createAuthorizedUser"},decls:7,vars:1,consts:function(){let _;return _=" Add Authorized User ",[[1,"bb-block","bb-block--lg","bb-text-align-right"],["bbButton","","data-role","add-button","color","primary",3,"click"],["name","add"],_,[1,"bb-list"],["class","bb-list__item--no-separator",4,"ngFor","ngForOf"],[1,"bb-list__item--no-separator"],[1,"bb-block","bb-block--lg"],[3,"authorizedUsersItem","levelsConfig","edit","remove","paused","resumed"]]},template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"button",1),e.NdJ("click",function(){return n.goToAuthorizedUser()}),e._UZ(2,"bb-icon-ui",2),e.TgZ(3,"span"),e.SDv(4,3),e.qZA()()(),e.TgZ(5,"div",4),e.YNc(6,fn,3,2,"div",5),e.qZA()),2&t&&(e.xp6(6),e.Q6J("ngForOf",n.authorizedUsersList))},directives:[h.o,ke,u.Hq,d.sg],encapsulation:2}),o})(),Qe=(()=>{class o{constructor(){this.imageUrl="",this.createAuthorizedUser=new e.vpe}goToAuthorizedUser(){this.createAuthorizedUser.emit()}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["bb-authorized-users-empty-list"]],inputs:{imageUrl:"imageUrl"},outputs:{createAuthorizedUser:"createAuthorizedUser"},decls:14,vars:1,consts:function(){let _,t,n;return _=" Authorize access to your accounts ",t=" Adding an authorized user allows you to give limited or full access to your accounts or financial products. ",n="Add Authorized User",[[1,"card"],[1,"card-body","bb-text-align-center"],[1,"bb-block","bb-block--lg"],["class","img-fluid","alt","empty-state-image",3,"src",4,"ngIf"],["data-role","empty-state-message",1,"bb-block","bb-block--sm"],_,["data-role","empty-state-description",1,"bb-text-support","text-small"],t,["bbButton","","data-role","add-button","color","primary",3,"click"],["name","add"],n,["alt","empty-state-image",1,"img-fluid",3,"src"]]},template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e.YNc(3,Cn,1,1,"img",3),e.qZA(),e.TgZ(4,"h2",4),e.SDv(5,5),e.qZA(),e.TgZ(6,"div",2)(7,"p",6),e.SDv(8,7),e.qZA()(),e.TgZ(9,"div")(10,"button",8),e.NdJ("click",function(){return n.goToAuthorizedUser()}),e._UZ(11,"bb-icon-ui",9),e.TgZ(12,"span"),e.SDv(13,10),e.qZA()()()()()),2&t&&(e.xp6(3),e.Q6J("ngIf",!!n.imageUrl))},directives:[h.o,d.O5,u.Hq],encapsulation:2}),o})(),$e=(()=>{class o extends ce{}return o.\u0275fac=function(){let _;return function(n){return(_||(_=e.n5z(o)))(n||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["bb-authorized-user-list-remove-user-confirmation-dialog"]],features:[e.qOj],decls:8,vars:1,consts:function(){let _,t,n,s;return _=" Remove Authorized User? ",t=" All entered information and their corresponding permissions will be permanently removed. ",n=" Keep It ",s=" Remove Authorized User ",[[3,"isOpen","cancel"],["bbCustomModalHeader",""],["bbCustomModalBody",""],["footerRef",""],["bbCustomModalFooter",""],["data-role","remove-modal-title"],_,["bbButton","","color","unstyled","aria-label","close removal confirmation modal dialog","i18-aria-label","Close removal confirmation modal dialog|Button for close removal confirmation modal dialog@@authorized.users.removeUser.modal.closed.button",3,"click"],["color","muted","name","clear"],["data-role","remove-modal-message"],t,["bbButton","","color","link","data-role","keep-button",3,"click"],n,["bbButton","","color","danger","data-role","remove-button",3,"click"],s]},template:function(t,n){1&t&&(e.TgZ(0,"bb-modal-ui",0),e.NdJ("cancel",function(){return n.onClose()}),e.TgZ(1,"bb-modal-header-ui"),e.YNc(2,On,5,0,"ng-template",1),e.qZA(),e.TgZ(3,"bb-modal-body-ui"),e.YNc(4,Dn,2,0,"ng-template",2),e.qZA(),e.TgZ(5,"bb-modal-footer-ui",null,3),e.YNc(7,Nn,6,0,"ng-template",4),e.qZA()()),2&t&&e.Q6J("isOpen",n.dialogOpen)},directives:[p.zS,p.Rb,h.o,p.KF,p.YI,p.cA,u.Hq,p.Qd,p.yk],encapsulation:2}),o})(),qe=(()=>{class o extends ce{}return o.\u0275fac=function(){let _;return function(n){return(_||(_=e.n5z(o)))(n||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["bb-authorized-user-list-confirmation-pause-user-dialog"]],features:[e.qOj],decls:8,vars:1,consts:function(){let _,t,n,s;return _=" Pause user permissions? ",t=" Their account permissions will be paused indefinetely until you resume them. ",n=" Not now ",s=" Pause permissions ",[[3,"isOpen","cancel"],["bbCustomModalHeader",""],["bbCustomModalBody",""],["footerRef",""],["bbCustomModalFooter",""],["data-role","pause-modal-title"],_,["bbButton","","color","unstyled","aria-label","close pause permissions confirmation modal dialog","i18-aria-label","Close pause permissions confirmation modal dialog|Button for close pause permissions confirmation modal dialog@@authorized.users.pauseUserPermissions.modal.cancel.button",3,"click"],["color","muted","name","clear"],["data-role","pause-modal-message"],t,["bbButton","","color","link","data-role","not-now-button",3,"click"],n,["bbButton","","color","primary","data-role","pause-button",3,"click"],s]},template:function(t,n){1&t&&(e.TgZ(0,"bb-modal-ui",0),e.NdJ("cancel",function(){return n.onClose()}),e.TgZ(1,"bb-modal-header-ui"),e.YNc(2,Mn,5,0,"ng-template",1),e.qZA(),e.TgZ(3,"bb-modal-body-ui"),e.YNc(4,Tn,2,0,"ng-template",2),e.qZA(),e.TgZ(5,"bb-modal-footer-ui",null,3),e.YNc(7,In,6,0,"ng-template",4),e.qZA()()),2&t&&e.Q6J("isOpen",n.dialogOpen)},directives:[p.zS,p.Rb,h.o,p.KF,p.YI,p.cA,u.Hq,p.Qd,p.yk],encapsulation:2}),o})(),Ve=(()=>{class o{constructor(t,n,s,i){this.assetsPath=t,this.userDataService=n,this.usersUIService=s,this.notificationService=i,this.refreshAuthorizedUsers=new k.X(!0),this.authorizedUsersListSubject=new k.X({items:[]}),this.isLoading=new k.X(!0),this.authorizedUsersList=this.authorizedUsersListSubject.asObservable(),this.showLoadingIndicator=this.isLoading.asObservable(),this.selectedUser=new e.vpe,this.emptyStateImage=this.assetsPath+"authorized-users-empty-state-img.svg",this.handleLoadingError=g=>(this.error=(o=>{if(o.error instanceof ErrorEvent)return{message:"An unexpected error occurred"};switch(o.status){case 400:return{message:kn(o)||"Error 400"};case 401:return{message:"Error 401"};case 403:return{message:"Error 403"};case 404:return{message:"Error 404"};default:return{message:"An unexpected error occurred"}}})(g),(0,O.of)({items:[]})),this.handleOperationsError=()=>{this.setLoadingIndicator(!1),this.pushNotification("Something went wrong","Please try again later.","error")},this.refreshAuthorizedUsers.pipe((0,nt.z)(()=>this.retrieveAuthorizedUsers())).subscribe(this.authorizedUsersListSubject),this.levelsConfig=this.usersUIService.uiLevelsConfigValue}retrieveAuthorizedUsers(){return this.userDataService.retrieveAuthorizedUser().pipe((0,Y.K)(this.handleLoadingError),(0,ge.b)(()=>{this.setLoadingIndicator(!1)}))}pushNotification(t,n,s){this.notificationService.showNotification({header:t,message:n,modifier:s,dismissible:!0,ttl:5e3})}goToAuthorizedUser(){this.selectedUser.emit()}editPermissions(t){this.selectedUser.emit(t.id)}get imageEmptyStateUrl(){return(0,O.of)(this.emptyStateImage)}setCurrentUser(t,n){this.currentUser=t,this.actionName=n}setLoadingIndicator(t){this.isLoading.next(t)}removeUser(t){t&&t.id&&(this.setLoadingIndicator(!0),this.currentUser=void 0,this.userDataService.removeAuthorizedUser(t.id).subscribe(()=>{this.pushNotification("Authorized user removed","Their permissions are permanently removed.","success"),this.refreshList()},this.handleOperationsError))}updateUserStatus(t){t&&t.id&&(this.setLoadingIndicator(!0),this.currentUser=void 0,this.userDataService.updateAuthorizedUserStatus(t.id,t.status!==V.PAUSED?"DISABLED":"ENABLED").subscribe(()=>{t.status!==V.PAUSED?this.pushNotification("Authorized user paused","You can resume their permissions at any time.","success"):this.pushNotification("User permissions resumed","Their permissions are now active again.","success"),this.refreshList()},this.handleOperationsError))}refreshList(){this.refreshAuthorizedUsers.next(!0)}ngOnDestroy(){this.refreshAuthorizedUsers.complete(),this.authorizedUsersListSubject.complete(),this.isLoading.complete()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(ne),e.Y36(oe),e.Y36(j),e.Y36(Re.gq))},o.\u0275cmp=e.Xpm({type:o,selectors:[["bb-authorized-users-list-wrapper"]],outputs:{selectedUser:"selectedUser"},decls:9,vars:4,consts:function(){let _,t,n,s;return _="Loading...",t="Something Went Wrong",n="Try to reload the page or contact the system administrator.",s=" Reload ",[[4,"ngIf","ngIfElse"],["emptyState",""],["loadingState",""],["errorState",""],[3,"dialogOpen","confirm","closed"],[4,"ngIf"],[3,"authorizedUsersList","levelsConfig","edit","remove","paused","resumed","createAuthorizedUser"],[3,"imageUrl","createAuthorizedUser"],[1,"card"],["loaderSize","lg","text",_],[1,"card-body","bb-state-container"],["iconModifier","error-outline","iconColor","dark","title",t,"subtitle",n],[1,"bb-state-container__footer"],["bbButton","","color","primary"],s]},template:function(t,n){if(1&t&&(e.YNc(0,Jn,3,3,"ng-container",0),e.YNc(1,Ln,1,1,"ng-template",null,1,e.W1O),e.YNc(3,Zn,2,0,"ng-template",null,2,e.W1O),e.YNc(5,Pn,6,0,"ng-template",null,3,e.W1O),e.TgZ(7,"bb-authorized-user-list-remove-user-confirmation-dialog",4),e.NdJ("confirm",function(){return n.removeUser(n.currentUser)})("closed",function(){return n.setCurrentUser()}),e.qZA(),e.TgZ(8,"bb-authorized-user-list-confirmation-pause-user-dialog",4),e.NdJ("confirm",function(){return n.updateUserStatus(n.currentUser)})("closed",function(){return n.setCurrentUser()}),e.qZA()),2&t){const s=e.MAs(6);e.Q6J("ngIf",!n.error)("ngIfElse",s),e.xp6(7),e.Q6J("dialogOpen",!!n.currentUser&&"remove"===n.actionName),e.xp6(1),e.Q6J("dialogOpen",!!n.currentUser&&"pause"===n.actionName)}},directives:[We,Qe,x.Q,l.s,$e,qe,d.O5,u.Hq],pipes:[d.Ov],encapsulation:2}),o})();const Qn=[u.hJ,h.Q,fe.b,x.p,l.P,be.lQ,se.CK,p.zk,he.T,Re.PQ,le];let $n=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[d.ez,...Qn],u.hJ,h.Q,fe.b,x.p,l.P,be.lQ,se.CK,p.zk,he.T,Re.PQ,le]}),o})();const je=new e.OlP("AuthorizedUsersJourneyConfiguration injection token");var _e=(()=>(function(o){o.PER_ACCOUNT="individual-control",o.SAME_FOR_ALL_ACCOUNTS="all-at-once"}(_e||(_e={})),_e))();const Xe={fullAccess:_e.SAME_FOR_ALL_ACCOUNTS,levelsConfig:{mappings:new Me,uiConfig:Object.assign(Object.assign({},Ce),Oe)}};let Pe=(()=>{class o{constructor(t){t=t||{},this._config=Object.assign(Object.assign({},Xe),t)}get defaults(){return Xe}get fullAccess(){return this._config.fullAccess}get levelsConfig(){return this._config.levelsConfig}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(je,8))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})(),qn=(()=>{class o{constructor(t,n,s){this.route=t,this.data=n,this.navigation=s,this.authorizedUser=this.data.authorizedUser,this.loadingData=this.data.loadingData$,this.editMode=this.data.editMode}next(t){this.data.next(t),this.navigation.navigateToPermissions({relativeTo:this.route})}back(){this.data.back(),this.navigation.navigateToUserDetails({relativeTo:this.route})}save(t){this.data.saveOnly(t)}cancel(t){this.data.setAbortingDialog(t)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(A.gz),e.Y36(X),e.Y36(ee))},o.\u0275cmp=e.Xpm({type:o,selectors:[["bb-authorized-users-accounts-view"]],decls:3,vars:7,consts:[[3,"authorizedUser","accounts","isFirstStep","next","back","saveOnly","cancel"]],template:function(t,n){if(1&t&&(e.TgZ(0,"bb-authorized-users-accounts",0),e.NdJ("next",function(i){return n.next(i)})("back",function(){return n.back()})("saveOnly",function(i){return n.save(i)})("cancel",function(){return n.cancel(!0)}),e.ALo(1,"async"),e.ALo(2,"async"),e.qZA()),2&t){let s;e.Q6J("authorizedUser",e.lcZ(1,3,n.authorizedUser))("accounts",null==(s=e.lcZ(2,5,n.loadingData))?null:s.accounts.items)("isFirstStep",n.editMode)}},directives:[ze],pipes:[d.Ov],encapsulation:2}),o})(),Vn=(()=>{class o{constructor(t,n){this.router=t,this.route=n}onUserSelected(t){this.router.navigate(["../create",t?{selectedUser:t}:{}],{relativeTo:this.route})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(A.F0),e.Y36(A.gz))},o.\u0275cmp=e.Xpm({type:o,selectors:[["bb-authorized-users-list-view"]],decls:2,vars:0,consts:function(){let _;return _="Authorized Users",[["headingType","h1","headingClasses","bb-heading-widget__heading px-0 pb-5","heading",_],[3,"selectedUser"]]},template:function(t,n){1&t&&(e._UZ(0,"bb-header-ui",0),e.TgZ(1,"bb-authorized-users-list-wrapper",1),e.NdJ("selectedUser",function(i){return n.onUserSelected(i)}),e.qZA())},directives:[K.G,Ve],encapsulation:2}),o})(),jn=(()=>{class o{constructor(t,n,s,i,g){this.route=t,this.data=n,this.usersUIService=s,this.config=i,this.navigation=g,this.authorizedUser=this.data.authorizedUser,this.loadingData=this.data.loadingData$,this.levelsConfig=this.usersUIService.uiLevelsConfigValue,this.permissionsConfig=this.usersUIService.uiPermissionsConfigValue}next(t){this.data.next(t),this.navigation.navigateToConfirmation({relativeTo:this.route})}back(){this.data.back(),this.navigation.navigateToAccounts({relativeTo:this.route})}save(t){this.data.saveOnly(t)}cancel(t){this.data.setAbortingDialog(t)}enableAccountAccess(){return this.config.fullAccess===_e.PER_ACCOUNT}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(A.gz),e.Y36(X),e.Y36(j),e.Y36(Pe),e.Y36(ee))},o.\u0275cmp=e.Xpm({type:o,selectors:[["bb-authorized-users-permissions-view"]],decls:3,vars:9,consts:[[3,"authorizedUser","enableAccountLevelFullAccessPermission","accounts","levelsConfig","permissionsConfig","next","back","saveOnly","cancel"]],template:function(t,n){if(1&t&&(e.TgZ(0,"bb-authorized-users-permissions",0),e.NdJ("next",function(i){return n.next(i)})("back",function(){return n.back()})("saveOnly",function(i){return n.save(i)})("cancel",function(){return n.cancel(!0)}),e.ALo(1,"async"),e.ALo(2,"async"),e.qZA()),2&t){let s;e.Q6J("authorizedUser",e.lcZ(1,5,n.authorizedUser))("enableAccountLevelFullAccessPermission",n.enableAccountAccess())("accounts",null==(s=e.lcZ(2,7,n.loadingData))?null:s.accounts.items)("levelsConfig",n.levelsConfig)("permissionsConfig",n.permissionsConfig)}},directives:[Je],pipes:[d.Ov],encapsulation:2}),o})(),Xn=(()=>{class o{constructor(t,n,s){this.route=t,this.data=n,this.navigation=s,this.authorizedUser=this.data.authorizedUser}next(t){this.data.next(t),this.navigation.navigateToAccounts({relativeTo:this.route})}cancel(t){this.data.setAbortingDialog(t)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(A.gz),e.Y36(X),e.Y36(ee))},o.\u0275cmp=e.Xpm({type:o,selectors:[["bb-authorized-users-user-details-view"]],decls:2,vars:4,consts:[[3,"authorizedUser","isFirstStep","next","cancel"]],template:function(t,n){1&t&&(e.TgZ(0,"bb-authorized-users-user-details",0),e.NdJ("next",function(i){return n.next(i)})("cancel",function(){return n.cancel(!0)}),e.ALo(1,"async"),e.qZA()),2&t&&e.Q6J("authorizedUser",e.lcZ(1,2,n.authorizedUser))("isFirstStep",!0)},directives:[Be],pipes:[d.Ov],encapsulation:2}),o})(),eo=(()=>{class o{constructor(t,n,s,i){this.route=t,this.router=n,this.data=s,this.navigation=i}onClose(){this.navigation.navigateToList({relativeTo:this.route})}ngOnInit(){const t=this.route.snapshot.paramMap.get("selectedUser")||"";this.data.init(t),this.router.navigate(t?["accounts"]:["user-details"],{relativeTo:this.route})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(A.gz),e.Y36(A.F0),e.Y36(X),e.Y36(ee))},o.\u0275cmp=e.Xpm({type:o,selectors:[["bb-authorized-user-create-parent-view"]],features:[e._Bn([X])],decls:2,vars:0,consts:function(){let _;return _="Authorized User",[["headingType","h1","headingClasses","bb-heading-widget__heading px-0 pb-5","heading",_],[3,"showAuthorizedUsers"]]},template:function(t,n){1&t&&(e._UZ(0,"bb-header-ui",0),e.TgZ(1,"bb-authorized-users-container-wrapper",1),e.NdJ("showAuthorizedUsers",function(){return n.onClose()}),e.qZA())},directives:[K.G,xe],encapsulation:2}),o})(),to=(()=>{class o{constructor(t,n,s,i,g,f,Z){this.route=t,this.usersUIService=n,this.userService=s,this.assetsPath=i,this.cd=g,this.data=f,this.navigation=Z,this.succeedStatus="",this.isSaving=!1,this.isFailure=!1,this.authorizedUser=this.data.authorizedUser,this.loadingData=this.data.loadingData$,this.successImg=this.assetsPath+"succeed.svg",this.levelsConfig=this.usersUIService.uiLevelsConfigValue}cancel(t){this.data.setAbortingDialog(t)}back(){this.data.back(),this.navigation.navigateToPermissions({relativeTo:this.route})}confirm(){this.navigation.navigateToList({relativeTo:this.route.parent})}setSucceedDialogStatus(t){this.succeedStatus=t}get imageSucceedUrl(){return(0,O.of)(this.successImg)}finish(t){this.isSaving=!0;const i=()=>{this.isFailure=!0,this.isSaving=!1,this.cd.markForCheck()};this.data.selectedUser?this.userService.updateAuthorizedUser(this.data.selectedUser,t.permissions).subscribe(()=>{this.setSucceedDialogStatus("edit"),this.isSaving=!1,this.cd.markForCheck()},i):this.userService.addAuthorizedUser(t).subscribe(()=>{this.setSucceedDialogStatus("create"),this.isSaving=!1,this.cd.markForCheck()},i)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(A.gz),e.Y36(j),e.Y36(oe),e.Y36(ne),e.Y36(e.sBO),e.Y36(X),e.Y36(ee))},o.\u0275cmp=e.Xpm({type:o,selectors:[["bb-authorized-users-confirmation-view"]],decls:4,vars:10,consts:[[3,"authorizedUser","termsConditions","levelsConfig","isSaving","showError","showErrorChange","next","back","cancel"],[3,"dialogOpen","succeedStatus","authorizedUser","successImg","confirm","closed",4,"ngIf"],[3,"dialogOpen","succeedStatus","authorizedUser","successImg","confirm","closed"]],template:function(t,n){if(1&t&&(e.TgZ(0,"bb-authorized-users-confirmation",0),e.NdJ("showErrorChange",function(i){return n.isFailure=i})("next",function(i){return n.finish(i)})("back",function(){return n.back()})("cancel",function(){return n.cancel(!0)}),e.ALo(1,"async"),e.ALo(2,"async"),e.qZA(),e.YNc(3,Hn,2,6,"bb-authorized-users-confirmation-complete",1)),2&t){let s;e.Q6J("authorizedUser",e.lcZ(1,6,n.authorizedUser))("termsConditions",null==(s=e.lcZ(2,8,n.loadingData))?null:s.termsAndConditions)("levelsConfig",n.levelsConfig)("isSaving",n.isSaving)("showError",n.isFailure),e.xp6(3),e.Q6J("ngIf",n.succeedStatus)}},directives:[Le,Ze,d.O5],pipes:[d.Ov],encapsulation:2}),o})();const no={path:"",component:wn,children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",data:{title:"Authorized users"},component:Vn},{path:"create",data:{title:"Add authorized user"},component:eo,children:[{path:"user-details",component:Xn},{path:"accounts",component:qn},{path:"permissions",component:jn},{path:"confirmation",component:to},{path:"",redirectTo:"user-details",pathMatch:"full"}]}]};function oo(o){return o.levelsConfig}let _o=(()=>{class o{static forRoot(t={route:no}){return{ngModule:o,providers:[(0,A.co)([t.route]),{provide:Ke,useFactory:oo,deps:[Pe]}]}}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[Pe,H.Xy,L.NG,v.$r,ee,{provide:ne,useValue:"./assets/bb-authorized-users-journey-ang/"}],imports:[[d.ez,A.Bz.forChild([]),K.O,$n,Fn]]}),o})();var et=r(570);let so=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[{provide:je,useValue:{levelsConfig:{mappings:new Me,uiConfig:Object.assign(Object.assign({},Ce),Oe)}}},{provide:H.gj,useExisting:et.ud},{provide:v.xd,useExisting:et.MI}],imports:[[_o.forRoot()]]}),o})()},3601:(W,G,r)=>{r.d(G,{e:()=>K});var d=r(4986),e=r(4482),A=r(8421),L=r(5403),H=r(2805);function K(S,M=d.P){return function v(S){return(0,e.e)((M,u)=>{let D=!1,l=null,h=null,b=!1;const m=()=>{if(null==h||h.unsubscribe(),h=null,D){D=!1;const c=l;l=null,u.next(c)}b&&u.complete()},N=()=>{h=null,b&&u.complete()};M.subscribe(new L.Q(u,c=>{D=!0,l=c,h||(0,A.Xf)(S(c)).subscribe(h=new L.Q(u,m,N))},()=>{b=!0,(!D||!h||h.closed)&&u.complete()}))})}(()=>(0,H.H)(S,M))}},6406:(W,G,r)=>{r.d(G,{Z:()=>K});var d=r(4408),e=r(727);const A={schedule(M){let u=requestAnimationFrame,D=cancelAnimationFrame;const{delegate:l}=A;l&&(u=l.requestAnimationFrame,D=l.cancelAnimationFrame);const h=u(b=>{D=void 0,M(b)});return new e.w0(()=>null==D?void 0:D(h))},requestAnimationFrame(...M){const{delegate:u}=A;return((null==u?void 0:u.requestAnimationFrame)||requestAnimationFrame)(...M)},cancelAnimationFrame(...M){const{delegate:u}=A;return((null==u?void 0:u.cancelAnimationFrame)||cancelAnimationFrame)(...M)},delegate:void 0};var v=r(7565);const K=new class H extends v.v{flush(u){this._active=!0,this._scheduled=void 0;const{actions:D}=this;let l,h=-1;u=u||D.shift();const b=D.length;do{if(l=u.execute(u.state,u.delay))break}while(++h<b&&(u=D.shift()));if(this._active=!1,l){for(;++h<b&&(u=D.shift());)u.unsubscribe();throw l}}}(class L extends d.o{constructor(u,D){super(u,D),this.scheduler=u,this.work=D}requestAsyncId(u,D,l=0){return null!==l&&l>0?super.requestAsyncId(u,D,l):(u.actions.push(this),u._scheduled||(u._scheduled=A.requestAnimationFrame(()=>u.flush(void 0))))}recycleAsyncId(u,D,l=0){if(null!=l&&l>0||null==l&&this.delay>0)return super.recycleAsyncId(u,D,l);0===u.actions.length&&(A.cancelAnimationFrame(D),u._scheduled=void 0)}})},3101:(W,G,r)=>{r.d(G,{E:()=>b});var d=r(4408);let A,e=1;const L={};function v(N){return N in L&&(delete L[N],!0)}const H={setImmediate(N){const c=e++;return L[c]=!0,A||(A=Promise.resolve()),A.then(()=>v(c)&&N()),c},clearImmediate(N){v(N)}},{setImmediate:S,clearImmediate:M}=H,u={setImmediate(...N){const{delegate:c}=u;return((null==c?void 0:c.setImmediate)||S)(...N)},clearImmediate(N){const{delegate:c}=u;return((null==c?void 0:c.clearImmediate)||M)(N)},delegate:void 0};var l=r(7565);const b=new class h extends l.v{flush(c){this._active=!0,this._scheduled=void 0;const{actions:C}=this;let B,x=-1;c=c||C.shift();const p=C.length;do{if(B=c.execute(c.state,c.delay))break}while(++x<p&&(c=C.shift()));if(this._active=!1,B){for(;++x<p&&(c=C.shift());)c.unsubscribe();throw B}}}(class D extends d.o{constructor(c,C){super(c,C),this.scheduler=c,this.work=C}requestAsyncId(c,C,B=0){return null!==B&&B>0?super.requestAsyncId(c,C,B):(c.actions.push(this),c._scheduled||(c._scheduled=u.setImmediate(c.flush.bind(c,void 0))))}recycleAsyncId(c,C,B=0){if(null!=B&&B>0||null==B&&this.delay>0)return super.recycleAsyncId(c,C,B);0===c.actions.length&&(u.clearImmediate(C),c._scheduled=void 0)}})},4747:(W,G,r)=>{r.d(G,{Le:()=>v,cY:()=>K,kU:()=>H});var d=r(5e3),e=r(682);const A={segments:4},L=new d.OlP("ACCOUNTS_DISPLAYING_FORMAT_TOKEN");let v=(()=>{class S{constructor(u){this.accountsDisplayingFormat=u}getDefaultFormat(u,D){var l,h;return"cardNumber"===u?this.getCardNumberFormat(D):null!==(h=null===(l=this.accountsDisplayingFormat)||void 0===l?void 0:l[u])&&void 0!==h?h:A}getCardNumberFormat(u){var D;const l=null===(D=this.accountsDisplayingFormat)||void 0===D?void 0:D.cardNumber,h=Object.entries((null==l?void 0:l.cardProviders)||{}).reduce((b,m)=>Object.assign(Object.assign({},b),{[m[0].toLowerCase()]:m[1]}),{});return u&&h[u.toLowerCase()]?h[u.toLowerCase()]:null!=l?l:A}}return S.\u0275fac=function(u){return new(u||S)(d.LFG(L,8))},S.\u0275prov=d.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})(),H=(()=>{class S{constructor(u){this.accountsDisplayingFormatService=u}transform(u,D,l){const h=u.toString(),b="object"==typeof D?D:this.accountsDisplayingFormatService.getDefaultFormat(D,l);return(0,e.EX)(h,b.segments)}}return S.\u0275fac=function(u){return new(u||S)(d.Y36(v,16))},S.\u0275pipe=d.Yjl({name:"bbAccountNumber",type:S,pure:!0}),S})(),K=(()=>{class S{}return S.\u0275fac=function(u){return new(u||S)},S.\u0275mod=d.oAB({type:S}),S.\u0275inj=d.cJS({}),S})()},1089:(W,G,r)=>{r.d(G,{A:()=>h,J:()=>b});var d=r(5e3),e=r(3075),A=r(9300),L=r(2722),v=r(9144),H=r(1135),K=r(7579),S=r(9841),M=r(4619),u=r(9808);function D(m,N){1&m&&d.Hsn(0,0,["*ngIf","!label"])}const l=["*"];let h=(()=>{class m extends v.rA{constructor(c,C){super(c),this.cd=c,this.controlContainer=C,this.indeterminate=!1,this.skip$=new H.X(!1),this.unsubscribe$=new K.x}ngAfterContentChecked(){this.controlContainer.control&&this.control!==this.controlContainer.control&&(this.control=this.controlContainer.control,this.checkState(this.control.value),(0,S.a)(this.control.valueChanges,this.skip$).pipe((0,A.h)(([c,C])=>!C),(0,L.R)(this.unsubscribe$)).subscribe({next:([c])=>this.checkState(c)}))}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}onValueChange(){const c=C=>{Object.keys(C.value).forEach(B=>C.controls[B]instanceof e.cw?c(C.controls[B]):C.controls[B].setValue(this.value))};this.control&&(this.skip$.next(!0),c(this.control),this.skip$.next(!1)),super.onValueChange()}isDisabled(){return!!this.control&&Object.keys(this.control.controls).every(c=>this.control&&this.control.controls&&this.control.controls[c]&&this.control.controls[c].disabled||!1)}checkState(c){const C=p=>{const I=a=>"object"==typeof a&&null!==a?p.call(Object.keys(a).map(R=>a[R]),I):!!a;return a=>p.call(Object.keys(a).map(R=>a[R]),I)},B=C(Array.prototype.every)(c),x=C(Array.prototype.some)(c);this.indeterminate=x&&!B,this.writeValue(B)}}return m.\u0275fac=function(c){return new(c||m)(d.Y36(d.sBO),d.Y36(e.gN))},m.\u0275cmp=d.Xpm({type:m,selectors:[["bb-checkbox-group-ui"]],features:[d._Bn([{provide:e.JU,useExisting:(0,d.Gpc)(()=>m),multi:!0}]),d.qOj],ngContentSelectors:l,decls:2,vars:6,consts:[[3,"label","aria-label","indeterminate","ngModel","disabled","indeterminateChange","ngModelChange","change"],[4,"ngIf"]],template:function(c,C){1&c&&(d.F$t(),d.TgZ(0,"bb-input-checkbox-ui",0),d.NdJ("indeterminateChange",function(x){return C.indeterminate=x})("ngModelChange",function(x){return C.value=x})("change",function(){return C.onValueChange()}),d.YNc(1,D,1,0,"ng-content",1),d.qZA()),2&c&&(d.Q6J("label",C.label)("aria-label",!C.label&&C.ariaLabel||null)("indeterminate",C.indeterminate)("ngModel",C.value)("disabled",C.isDisabled()),d.xp6(1),d.Q6J("ngIf",!C.label))},directives:[M.r,e.JJ,e.On,u.O5],encapsulation:2,changeDetection:0}),m})(),b=(()=>{class m{}return m.\u0275fac=function(c){return new(c||m)},m.\u0275mod=d.oAB({type:m}),m.\u0275inj=d.cJS({imports:[[u.ez,M.b,e.u5,v.$B]]}),m})()},4291:(W,G,r)=>{r.d(G,{F:()=>x,W:()=>B});var d=r(9808),e=r(5e3),A=r(4376),L=r(9287),v=r(3075),H=r(9144),K=r(4483),S=r(5413),M=r(3203);const u=["inputPhone"];function D(p,I){if(1&p&&(e.TgZ(0,"label",6),e._uU(1),e.qZA()),2&p){const a=e.oxw();e.s9C("for",a.id),e.xp6(1),e.Oqu(a.label)}}function l(p,I){if(1&p&&(e._UZ(0,"i",12),e.ALo(1,"countryFlag"),e._uU(2)),2&p){const a=I.item;e.Q6J("ngClass",e.lcZ(1,2,a.isoCode)),e.xp6(2),e.hij(" ",a.countryCode," ")}}function h(p,I){if(1&p){const a=e.EpF();e.TgZ(0,"bb-search-box-ui",13),e.NdJ("clear",function(){return e.CHM(a),e.oxw(2).onClear()})("valueChange",function(J){return e.CHM(a),e.oxw(2).onFilterChange(J)}),e.qZA(),e.TgZ(1,"div",14),e.SDv(2,15),e.qZA()}if(2&p){const a=e.oxw(2);e.Q6J("showSearch",!0)("showClear",!0)("autofocus",!0)("aria-controls",a.statusId)("aria-expanded",null==a.ngSelect?null:a.ngSelect.isOpen)("aria-owns",null!=a.ngSelect&&a.ngSelect.isOpen?null==a.ngSelect?null:a.ngSelect.dropdownId:null)("aria-activedescendant",null!=a.ngSelect&&a.ngSelect.isOpen?null==a.ngSelect||null==a.ngSelect.itemsList||null==a.ngSelect.itemsList.markedItem?null:a.ngSelect.itemsList.markedItem.htmlId:null),e.xp6(1),e.Q6J("id",a.statusId),e.xp6(1),e.pQV(a.resultCount),e.QtT(2)}}function b(p,I){1&p&&e._UZ(0,"bb-icon-ui",21)}function m(p,I){if(1&p&&(e.TgZ(0,"div",16),e._UZ(1,"i",17),e.ALo(2,"countryFlag"),e.TgZ(3,"span",18),e._uU(4),e.qZA(),e._uU(5,"\xa0 "),e.TgZ(6,"span",19),e._uU(7),e.qZA(),e.YNc(8,b,1,0,"bb-icon-ui",20),e.qZA()),2&p){const a=I.item,R=I.index,J=e.oxw(2);e.xp6(1),e.Q6J("ngClass",e.lcZ(2,4,a.isoCode)),e.xp6(3),e.Oqu(a.countryCode),e.xp6(3),e.Oqu(a.countryName),e.xp6(1),e.Q6J("ngIf",null==J.ngSelect?null:J.ngSelect.itemsList.items[R].selected)}}function N(p,I){if(1&p){const a=e.EpF();e.TgZ(0,"ng-select",7,8),e.NdJ("change",function(J){return e.CHM(a),e.oxw().onChanges(J)})("close",function(){return e.CHM(a),e.oxw().onClose()})("ngModelChange",function(J){return e.CHM(a),e.oxw().defaultCountryCode=J}),e.YNc(2,l,3,4,"ng-template",9),e.YNc(3,h,3,9,"ng-template",10),e.YNc(4,m,9,6,"ng-template",11),e.qZA()}if(2&p){const a=e.oxw();e.Q6J("dropdownPosition",a.dropdownPosition)("clearable",a.clearable)("searchable",a.searchable)("items",a.countryList)("ngModel",a.defaultCountryCode)("searchFn",a.searchFunc)("readonly",a.countryDropdowndisabled),e.uIk("aria-label",a.defaultCountryCode+" "+a.defaultCountryName)}}function c(p,I){if(1&p&&(e.TgZ(0,"div",22)(1,"span"),e.SDv(2,23),e.qZA(),e._uU(3),e.TgZ(4,"span"),e.SDv(5,24),e.qZA(),e._uU(6),e.qZA()),2&p){const a=e.oxw();e.MGl("id","",a.id,"-country-code"),e.xp6(3),e.hij("",a.defaultCountryName," "),e.xp6(3),e.hij("",a.defaultCountryCode," ")}}let C=(()=>{class p{transform(a){return"flag-icon-"+a.toLowerCase()}}return p.\u0275fac=function(a){return new(a||p)},p.\u0275pipe=e.Yjl({name:"countryFlag",type:p,pure:!0}),p})(),B=(()=>{class p extends H.rA{constructor(a,R,J,E){super(E),this.domAttrService=a,this.elem=R,this.renderer2=J,this.cd=E,this.placeholder="",this.readonly=!1,this.ariaLabel="Phone Input",this.clearable=!1,this.searchable=!1,this.enableCountryCode=!1,this.resultCount=0,this._statusId=this.domAttrService.generateId()}get statusId(){return this._statusId}constructCountryData(){if(this.enableCountryCode&&this.countryList)if(this.countryDropdowndisabled=1===this.countryList.length,this.countryDropdowndisabled)this.defaultCountryCode=this.countryList[0].countryCode,this.defaultCountryName=this.countryList[0].countryName;else{const a=this.countryList.find(R=>R.isoCode===this.defaultCountryIsoCode);this.defaultCountryCode=null==a?void 0:a.countryCode,this.defaultCountryName=null==a?void 0:a.countryName}}ngAfterViewInit(){this.ariaLabel||this.domAttrService.moveAriaAttributes(this.elem.nativeElement,this.inputEl&&this.inputEl.nativeElement,this.renderer2),this.constructCountryData()}onChanges(a){this.defaultCountryName=a.countryName}onClose(){this.ngSelect&&!this.ngSelect.isOpen&&this.ngSelect.constructor.prototype.focus.call(this.ngSelect)}onClear(){this.onFilterChange(void 0)}onFilterChange(a){this.ngSelect&&this.ngSelect.filter(a||""),this.updateResultCount()}updateResultCount(){var a;this.resultCount=(null===(a=this.ngSelect)||void 0===a?void 0:a.itemsList.filteredItems.filter(({children:R})=>!R).length)||0}searchFunc(a,R){return a=a.toLocaleLowerCase(),R.countryCode.toLocaleLowerCase().indexOf(a)>-1||R.countryName.toLocaleLowerCase().indexOf(a)>-1||R.isoCode.toLocaleLowerCase().indexOf(a)>-1}}return p.\u0275fac=function(a){return new(a||p)(e.Y36(K.JE),e.Y36(e.SBq),e.Y36(e.Qsj),e.Y36(e.sBO))},p.\u0275cmp=e.Xpm({type:p,selectors:[["bb-input-phone-ui"]],viewQuery:function(a,R){if(1&a&&(e.Gf(u,5),e.Gf(A.w9,5)),2&a){let J;e.iGM(J=e.CRH())&&(R.inputEl=J.first),e.iGM(J=e.CRH())&&(R.ngSelect=J.first)}},inputs:{placeholder:"placeholder",maxLength:"maxLength",minLength:"minLength",readonly:"readonly",ariaLabel:"ariaLabel",autocomplete:"autocomplete",countryList:"countryList",dropdownPosition:"dropdownPosition",clearable:"clearable",searchable:"searchable",defaultCountryIsoCode:"defaultCountryIsoCode",enableCountryCode:"enableCountryCode"},features:[e._Bn([{provide:v.JU,useExisting:(0,e.Gpc)(()=>p),multi:!0}]),e.qOj],decls:6,vars:25,consts:function(){let I,a,R,J;return I="Search",a=" " + "\ufffd0\ufffd" + " options ",R="Selected Country is ",J="and code is ",[[3,"for",4,"ngIf"],[1,"bb-phone"],["bindLabel","countryCode","bindValue","countryCode","class","bb-phone-country-code",3,"dropdownPosition","clearable","searchable","items","ngModel","searchFn","readonly","change","close","ngModelChange",4,"ngIf"],["type","tel",1,"form-control",3,"id","ngModel","disabled","readOnly","placeholder","required","bbFocus","ngClass","ngModelChange","blur","focus"],["inputPhone",""],["class","sr-only",3,"id",4,"ngIf"],[3,"for"],["bindLabel","countryCode","bindValue","countryCode",1,"bb-phone-country-code",3,"dropdownPosition","clearable","searchable","items","ngModel","searchFn","readonly","change","close","ngModelChange"],["countryCodeSelector",""],["ng-label-tmp",""],["ng-header-tmp",""],["ng-option-tmp",""],["aria-hidden","true",1,"flag-icon",3,"ngClass"],["placeholder",I,3,"showSearch","showClear","autofocus","aria-controls","aria-expanded","aria-owns","aria-activedescendant","clear","valueChange"],["aria-live","polite","aria-atomic","true","role","status",1,"sr-only",3,"id"],a,[1,"dropdown-option-item"],["aria-hidden","true",1,"flag-icon","col-md-1",3,"ngClass"],[1,"col-md-3","pr-0"],[1,"col-md-6","px-0","dropdown-option-item__country-name"],["class","col-md-2 px-0","name","check","color","color-neutral-dark",4,"ngIf"],["name","check","color","color-neutral-dark",1,"col-md-2","px-0"],[1,"sr-only",3,"id"],R,J]},template:function(a,R){1&a&&(e.YNc(0,D,2,2,"label",0),e.TgZ(1,"div",1),e.YNc(2,N,5,8,"ng-select",2),e.TgZ(3,"input",3,4),e.NdJ("ngModelChange",function(E){return R.onValueChange(E)})("blur",function(){return R.onBlur()})("focus",function(){return R.onFocus()}),e.qZA(),e.YNc(5,c,7,3,"div",5),e.qZA()),2&a&&(e.Q6J("ngIf",R.label),e.xp6(2),e.Q6J("ngIf",R.enableCountryCode),e.xp6(1),e.s9C("id",R.id),e.Q6J("ngModel",R.value)("disabled",R.disabled)("readOnly",R.readonly)("placeholder",R.placeholder)("required",R.required)("bbFocus",R.autofocus)("ngClass",R.inputClassName),e.uIk("aria-autocomplete",R.ariaAutocomplete)("aria-controls",R.ariaControls)("aria-describedby",R.ariaDescribedby?R.ariaDescribedby:R.id+"-country-code")("aria-labelledby",R.ariaLabelledby)("aria-expanded",R.ariaExpanded)("aria-activedescendant",R.ariaActivedescendant)("role",R.role)("aria-invalid",R.ariaInvalid)("aria-owns",R.ariaOwns)("aria-label",!R.label&&R.ariaLabel||null)("maxlength",R.maxLength)("minlength",R.minLength)("size",R.size)("autocomplete",R.autocomplete),e.xp6(2),e.Q6J("ngIf",!R.ariaDescribedby&&R.countryDropdowndisabled))},directives:[A.w9,S.B,L.o,d.O5,v.JJ,v.On,A.mR,d.mk,A.Cm,A.ir,v.Fj,v.Q7,v.nD,v.wO,M.R],pipes:[C],encapsulation:2,changeDetection:0}),p})(),x=(()=>{class p{}return p.\u0275fac=function(a){return new(a||p)},p.\u0275mod=e.oAB({type:p}),p.\u0275inj=e.cJS({imports:[[d.ez,L.Q,v.u5,H.$B,M.J,A.A0,S.F]]}),p})()},9633:(W,G,r)=>{r.d(G,{So:()=>v,V9:()=>u,nj:()=>D});var d=r(9808),e=r(5e3),A=r(682),L=r(4747);const v={length:16,maskRange:[0,12],segments:4},K=new e.OlP("Enables accounts masking synchronization with backend",{providedIn:"root",factory:()=>!1});let u=(()=>{class l{constructor(b,m){this.accountsDisplayingFormatService=b,this.synchronizeNumberMasking=m,this.defaultFormat=this.accountsDisplayingFormatService.getDefaultFormat("cardNumber")}transform(b,m,N="\u2022"){const c=null!=m?m:this.defaultFormat;let C=b.toString();return m&&!this.synchronizeNumberMasking&&(C=function S(l,h,b="0",m=!0){const N=Math.max(h-l.length,0),c=b.repeat(N);return m?c+l:l+c}(C,m.length,N),C=function M(l,[h,b],m="*"){let N="";if(b<0){const c=l.slice(b);N=m.repeat(l.length-c.length)+c}else{const c=m.repeat(b-h);N=l.substring(0,h)+c+l.substring(b)}return N}(C,m.maskRange,N)),(0,A.EX)(C,c.segments)}}return l.\u0275fac=function(b){return new(b||l)(e.Y36(L.Le,16),e.Y36(K,24))},l.\u0275pipe=e.Yjl({name:"paymentCardNumber",type:l,pure:!0}),l})(),D=(()=>{class l{}return l.\u0275fac=function(b){return new(b||l)},l.\u0275mod=e.oAB({type:l}),l.\u0275inj=e.cJS({imports:[[d.ez]]}),l})()},3623:(W,G,r)=>{r.d(G,{BX:()=>J,Ml:()=>I,vO:()=>R});var d=r(9808),e=r(5e3),A=r(9287);function L(E,O){1&E&&e.GkF(0)}function v(E,O){1&E&&e._UZ(0,"div",7)}const H=function(E,O,U){return{$implicit:E,number:O,isLast:U,isChild:!1}};function K(E,O){if(1&E&&(e.ynx(0),e.YNc(1,L,1,0,"ng-container",5),e.YNc(2,v,1,0,"div",6),e.BQk()),2&E){const U=O.$implicit,z=O.last,Y=O.index,P=e.oxw(),q=e.MAs(3);e.xp6(1),e.Q6J("ngTemplateOutlet",P.stepperStepTemplate||q)("ngTemplateOutletContext",e.kEZ(3,H,U,Y+1,z)),e.xp6(1),e.Q6J("ngIf",!z)}}function S(E,O){if(1&E&&(e.ynx(0),e._uU(1),e.BQk()),2&E){const U=e.oxw().number;e.xp6(1),e.hij(" ",U," ")}}function M(E,O){1&E&&e.GkF(0)}const u=function(E){return{$implicit:E}};function D(E,O){if(1&E){const U=e.EpF();e.TgZ(0,"a",15),e.NdJ("click",function(){e.CHM(U);const Y=e.oxw(2).$implicit;return e.oxw().onClickHandler(Y.data)}),e.YNc(1,M,1,0,"ng-container",5),e.qZA()}if(2&E){const U=e.oxw(2).$implicit;e.oxw();const z=e.MAs(7);e.xp6(1),e.Q6J("ngTemplateOutlet",z)("ngTemplateOutletContext",e.VKq(2,u,U))}}function l(E,O){1&E&&e.GkF(0)}function h(E,O){if(1&E&&(e.ynx(0),e.YNc(1,l,1,0,"ng-container",5),e.BQk()),2&E){const U=e.oxw(2).$implicit;e.oxw();const z=e.MAs(7);e.xp6(1),e.Q6J("ngTemplateOutlet",z)("ngTemplateOutletContext",e.VKq(2,u,U))}}function b(E,O){if(1&E&&(e.TgZ(0,"div",12),e.YNc(1,D,2,4,"a",13),e.YNc(2,h,2,4,"ng-container",14),e.qZA()),2&E){const U=e.oxw().$implicit;e.ekj("text-support",!U.isActive),e.Q6J("title",U.label),e.xp6(1),e.Q6J("ngIf",U.data&&!U.isCurrent),e.xp6(1),e.Q6J("ngIf",!U.data||U.isCurrent)}}function m(E,O){1&E&&e.GkF(0)}const N=function(E,O){return{$implicit:E,isChild:!0,isLast:O}};function c(E,O){if(1&E&&(e.ynx(0),e.YNc(1,m,1,0,"ng-container",5),e.BQk()),2&E){const U=O.$implicit,z=O.last,Y=e.oxw().isLast;e.oxw();const P=e.MAs(3);e.xp6(1),e.Q6J("ngTemplateOutlet",P)("ngTemplateOutletContext",e.WLB(2,N,U,!Y&&z))}}function C(E,O){if(1&E&&(e.TgZ(0,"div",8)(1,"div",9),e.YNc(2,S,2,1,"ng-container",10),e.qZA(),e.YNc(3,b,3,5,"div",11),e.qZA(),e.YNc(4,c,2,5,"ng-container",1)),2&E){const U=O.$implicit,z=O.isLast,Y=O.isChild,P=e.oxw(),q=e.MAs(5);e.ekj("bb-step--active",U.isActive)("bb-step--current",U.isCurrent&&(Y||!P.hasCurrentChildStep(U)))("bb-step--child",Y)("bb-step--last",z)("bb-step--container",null==U.steps?null:U.steps.length),e.uIk("aria-label",U.ariaLabel)("aria-current",U.isActive?"step":null),e.xp6(2),e.Q6J("ngIf",U.isCurrent||!U.isChecked)("ngIfElse",q),e.xp6(1),e.Q6J("ngIf",U.label),e.xp6(1),e.Q6J("ngForOf",U.steps)}}function B(E,O){1&E&&e._UZ(0,"bb-icon-ui",16)}function x(E,O){if(1&E&&(e.TgZ(0,"span",18),e._uU(1),e.qZA()),2&E){const U=e.oxw().$implicit;e.Q6J("title",U.stateLabel),e.xp6(1),e.Oqu(U.stateLabel)}}function p(E,O){if(1&E&&(e._uU(0),e.YNc(1,x,2,2,"span",17)),2&E){const U=O.$implicit;e.hij(" ",U.label," "),e.xp6(1),e.Q6J("ngIf",!(null!=U.steps&&U.steps.length))}}let I=(()=>{class E{constructor(){this.isCurrent=!1,this.isChecked=!1,this.isActive=!1}ngAfterContentChecked(){var U;this.steps=null===(U=this._steps)||void 0===U?void 0:U.filter(z=>z!==this)}}return E.\u0275fac=function(U){return new(U||E)},E.\u0275cmp=e.Xpm({type:E,selectors:[["bb-stepper-step-ui"]],contentQueries:function(U,z,Y){if(1&U&&e.Suo(Y,E,4),2&U){let P;e.iGM(P=e.CRH())&&(z._steps=P)}},inputs:{label:"label",stateLabel:"stateLabel",data:"data",ariaLabel:"ariaLabel",isCurrent:"isCurrent",isChecked:"isChecked",isActive:"isActive"},decls:0,vars:0,template:function(U,z){},encapsulation:2}),E})(),a=(()=>{class E{constructor(U){this.templateRef=U}}return E.\u0275fac=function(U){return new(U||E)(e.Y36(e.Rgc))},E.\u0275dir=e.lG2({type:E,selectors:[["ng-template","bbCustomStepperStep",""]]}),E})(),R=(()=>{class E{constructor(){this.select=new e.vpe}get currentStep(){return this.steps&&this.steps.find(U=>U.isCurrent)}hasCurrentChildStep({steps:U}){return null==U?void 0:U.find(({isCurrent:z})=>z)}onClickHandler(U){this.select.emit(U)}}return E.\u0275fac=function(U){return new(U||E)},E.\u0275cmp=e.Xpm({type:E,selectors:[["bb-stepper-ui"]],contentQueries:function(U,z,Y){if(1&U&&(e.Suo(Y,a,7,e.Rgc),e.Suo(Y,I,4)),2&U){let P;e.iGM(P=e.CRH())&&(z.stepperStepTemplate=P.first),e.iGM(P=e.CRH())&&(z.steps=P)}},outputs:{select:"select"},decls:8,vars:3,consts:[[1,"bb-stepper"],[4,"ngFor","ngForOf"],["defaultStepperStepTemplate",""],["checkIcon",""],["simpleStep",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["aria-hidden","true","class","bb-stepper__separator",4,"ngIf"],["aria-hidden","true",1,"bb-stepper__separator"],[1,"bb-step"],[1,"bb-step__icon"],[4,"ngIf","ngIfElse"],["class","bb-step__label",3,"title","text-support",4,"ngIf"],[1,"bb-step__label",3,"title"],["href","javascript:void(0)",3,"click",4,"ngIf"],[4,"ngIf"],["href","javascript:void(0)",3,"click"],["name","check","size","sm"],["class","bb-step__state-label",3,"title",4,"ngIf"],[1,"bb-step__state-label",3,"title"]],template:function(U,z){1&U&&(e.TgZ(0,"div",0),e.YNc(1,K,3,7,"ng-container",1),e.qZA(),e.YNc(2,C,5,16,"ng-template",null,2,e.W1O),e.YNc(4,B,1,0,"ng-template",null,3,e.W1O),e.YNc(6,p,2,2,"ng-template",null,4,e.W1O)),2&U&&(e.ekj("bb-stepper__label",null==z.currentStep?null:z.currentStep.label),e.xp6(1),e.Q6J("ngForOf",z.steps))},directives:[A.o,d.sg,d.tP,d.O5],encapsulation:2}),E})(),J=(()=>{class E{}return E.\u0275fac=function(U){return new(U||E)},E.\u0275mod=e.oAB({type:E}),E.\u0275inj=e.cJS({imports:[[d.ez,A.Q]]}),E})()},8451:(W,G,r)=>{r.d(G,{o:()=>D,q:()=>u});var d=r(9808),e=r(3075),A=r(5e3),L=r(9144),v=r(4619);function H(l,h){if(1&l&&(A.TgZ(0,"label",5),A._uU(1),A.qZA()),2&l){const b=A.oxw();A.uIk("for",b.id),A.xp6(1),A.hij(" ",b.label," ")}}const K=function(l){return{"bb-switch--align-end":l}},S=function(l,h,b){return{"bb-switch__element--checked":l,"bb-switch__element--disabled":h,"bb-switch__element--focused":b}};var M=(()=>{return(l=M||(M={})).left="left",l.right="right",M;var l})();let u=(()=>{class l extends L.rA{constructor(b,m){super(b),this.cd=b,this.el=m,this.labelPosition=M.left,this.keyboardFocus=!1,this.focused=!1}ngOnInit(){super.ngOnInit(),this.role=this.role||"switch"}toggleSwitch(b){var m;if("LABEL"!==(null===(m=b.target)||void 0===m?void 0:m.tagName))if(window.MSInputMethodContext&&document.documentMode){"checkbox"===b.target.type?this.onValueChange():this.onValueChange(!this.value);const c=document.createEvent("Event");c.initEvent("change",!0,!1),this.el.nativeElement.dispatchEvent(c)}else this.onValueChange(!this.value),this.el.nativeElement.dispatchEvent(new Event("change",{bubbles:!0}))}onBlur(b){this.focused=!1,super.onBlur(b)}isLabelLeft(){return this.labelPosition===M.left}isLabelRight(){return this.labelPosition===M.right}}return l.\u0275fac=function(b){return new(b||l)(A.Y36(A.sBO),A.Y36(A.SBq))},l.\u0275cmp=A.Xpm({type:l,selectors:[["bb-switch-ui"]],inputs:{labelPosition:"labelPosition"},features:[A._Bn([{provide:e.JU,multi:!0,useExisting:(0,A.Gpc)(()=>l)}]),A.qOj],decls:5,vars:21,consts:[[1,"bb-switch",3,"ngClass","click"],["class","bb-switch__label",4,"ngIf"],[1,"bb-switch__checkbox","sr-only","sr-only-focusable",3,"id","ngModel","disabled","aria-label","required","aria-describedby","aria-labelledby","aria-expanded","role","aria-invalid","aria-owns","aria-activedescendant","ngModelChange","change","focus","blur"],[1,"bb-switch__element",3,"ngClass","focus","blur"],[1,"bb-switch__slider","slider"],[1,"bb-switch__label"]],template:function(b,m){1&b&&(A.TgZ(0,"div",0),A.NdJ("click",function(c){return!m.disabled&&m.toggleSwitch(c)}),A.YNc(1,H,2,2,"label",1),A.TgZ(2,"bb-input-checkbox-ui",2),A.NdJ("ngModelChange",function(c){return m.value=c})("change",function(c){return c.stopPropagation()&&!m.disabled&&m.toggleSwitch(c)})("focus",function(){return m.focused=!0})("blur",function(c){return m.onBlur(c)}),A.qZA(),A.TgZ(3,"span",3),A.NdJ("focus",function(){return m.keyboardFocus=!0})("blur",function(){return m.keyboardFocus=!1}),A._UZ(4,"span",4),A.qZA()()),2&b&&(A.Q6J("ngClass",A.VKq(15,K,m.isLabelRight())),A.xp6(1),A.Q6J("ngIf",m.label),A.xp6(1),A.Q6J("id",m.id)("ngModel",m.value)("disabled",m.disabled)("aria-label",m.ariaLabel)("required",m.required)("aria-describedby",m.ariaDescribedby)("aria-labelledby",m.ariaLabelledby)("aria-expanded",m.ariaExpanded)("role",m.role)("aria-invalid",m.ariaInvalid)("aria-owns",m.ariaOwns)("aria-activedescendant",m.ariaActivedescendant),A.xp6(1),A.Q6J("ngClass",A.kEZ(17,S,m.value,m.disabled,m.focused)))},directives:[v.r,d.mk,d.O5,e.JJ,e.On,e.Q7],encapsulation:2,changeDetection:0}),l})(),D=(()=>{class l{}return l.\u0275fac=function(b){return new(b||l)},l.\u0275mod=A.oAB({type:l}),l.\u0275inj=A.cJS({imports:[[d.ez,e.u5,v.b]]}),l})()}}]);