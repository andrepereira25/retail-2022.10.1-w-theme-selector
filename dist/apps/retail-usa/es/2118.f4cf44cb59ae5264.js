(self.webpackChunkretail_usa=self.webpackChunkretail_usa||[]).push([[2118],{3074:(ft,Q,c)=>{"use strict";c.r(Q),c.d(Q,{AccountStatementRetailJourneyBundleModule:()=>a_});var l=c(4004),t=c(5e3);c(3032);const tt=e=>(e=>void 0!==e.id)(e[0])?e[0].id:e[0];var D=(()=>{return(e=D||(D={})).BODY="body",e.RESPONSE="response",e.EVENT="event",D;var e})();const k=new t.OlP("ACCOUNT_STATEMENT_CATEGORIES"),p={Account:"Account","Credit Card":"Credit Card",Mortgage:"Mortgage","Tax Form":"Tax Form",LOC:"LOC",EELOC:"EELOC"},J=()=>new Date(0),b=()=>new Date((new Date).setHours(0,0,0,0)),K=()=>b().getFullYear(),$=()=>b().getMonth(),d=()=>b().getDate(),S=()=>b().getDay(),g=e=>(e+6)%7,v=()=>new Date(K(),3*Math.floor($()/3)-3,1),m=()=>new Date(b().setDate(d()-7-g(S()))),dt=e=>({year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate()});var I=(()=>{return(e=I||(I={})).Today="Today",e.Yesterday="Yesterday",e.ThisWeek="This week",e.LastWeek="Last week",e.ThisMonth="This month",e.LastMonth="Last month",e.ThisQuarter="This quarter",e.LastQuarter="Last quarter",e.ThisYear="This year",e.AllTime="All time",I;var e})();const oe={[I.AllTime]:()=>({from:void 0,to:void 0}),[I.Today]:()=>({from:b(),to:b()}),[I.Yesterday]:()=>({from:new Date(b().setDate(b().getDate()-1)),to:new Date(b().setDate(b().getDate()-1))}),[I.ThisWeek]:()=>({from:new Date(b().setDate(d()-g(S()))),to:b()}),[I.LastWeek]:()=>({from:m(),to:new Date(m().setDate(m().getDate()+6))}),[I.ThisMonth]:()=>({from:new Date(K(),$(),1),to:b()}),[I.LastMonth]:()=>({from:new Date(K(),$()-1,1),to:new Date(b().setDate(0))}),[I.ThisQuarter]:()=>({from:new Date(K(),3*Math.floor($()/3),1),to:b()}),[I.LastQuarter]:()=>({from:v(),to:new Date(v().getFullYear(),v().getMonth()+3,0)}),[I.ThisYear]:()=>({from:new Date(K(),0,1),to:b()})},Bt=new Error("Response body not set"),ie=new t.OlP("MIME_TYPE_EXTENSIONS");var B=(()=>{return(e=B||(B={})).IDLE="IDLE",e.LOADING="LOADING",e.LOADING_MORE="LOADING_MORE",e.LOADING_FILTERED="LOADING_FILTERED",e.LOADING_TABLE="LOADING_TABLE",B;var e})(),nt=(()=>{return(e=nt||(nt={})).Pagination="PAGINATION",e.LoadMore="LOAD_MORE",nt;var e})();const _e=e=>{const i=e.get("x-total-count");return i&&parseInt(i,10)||0};var Dt=c(7579),mt=c(1135),gt=c(9841),ot=c(3900),bt=c(9300),_n=c(8372),an=c(1884),j=c(5357),pt=c(9779),ae=c(6331),ce=c(4619),se=c(2908),E=c(9808),G=c(3075),V=c(5622),it=c(4951),_t=c(7605),Mt=c(3508),Rt=c(4058),yt=c(8612),Ft=c(6966),at=c(9287),Nt=c(9565),le=c(8639),cn=c(7159),sn=c(7656),re=c(194),ht=c(3922),vt=c(5893),Pt=c(5556);function ln(e,i){if(1&e&&(t.ynx(0),t._uU(1),t.TgZ(2,"span",13),t.SDv(3,14),t.qZA(),t.BQk()),2&e){const n=t.oxw().items;t.xp6(1),t.hij(" ",n.length," ")}}function rn(e,i){if(1&e&&(t.TgZ(0,"bb-ellipsis-ui")(1,"span",13),t._uU(2),t.ALo(3,"async"),t.qZA()()),2&e){const n=t.oxw(3);t.xp6(2),t.hij(" ",t.lcZ(3,1,n.multiSelectLabelText$)," ")}}function un(e,i){if(1&e&&(t.TgZ(0,"div",6)(1,"div",7)(2,"span",8),t.SDv(3,9),t.qZA()(),t.TgZ(4,"div",10),t.YNc(5,ln,4,1,"ng-container",11),t.YNc(6,rn,4,3,"ng-template",null,12,t.W1O),t.qZA()()),2&e){const n=i.items,o=t.MAs(7),_=t.oxw(2);t.xp6(3),t.pQV(n.length)(_._accounts.length===n.length?"All":n.length),t.QtT(3),t.xp6(2),t.Q6J("ngIf",_._accounts.length===n.length)("ngIfElse",o)}}function En(e,i){1&e&&t.YNc(0,un,8,4,"ng-template",5)}function An(e,i){1&e&&t.GkF(0)}const Lt=function(e){return{$implicit:e}};function Sn(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"div",16)(2,"div",17)(3,"bb-input-checkbox-ui",18),t.NdJ("click",function(o){return o.preventDefault()}),t.qZA()(),t.TgZ(4,"div",19),t.YNc(5,An,1,0,"ng-container",20),t.qZA()(),t.BQk()),2&e){const n=t.oxw(),o=n.index,_=n.item$,a=n.item;t.oxw(2);const s=t.MAs(9);t.xp6(3),t.Q6J("id",o)("ngModel",_.selected),t.xp6(2),t.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",t.VKq(4,Lt,a))}}function dn(e,i){1&e&&t.GkF(0)}function mn(e,i){if(1&e&&(t.ynx(0),t.YNc(1,dn,1,0,"ng-container",20),t.BQk()),2&e){const n=t.oxw().item;t.oxw(2);const o=t.MAs(9);t.xp6(1),t.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",t.VKq(2,Lt,n))}}function gn(e,i){if(1&e&&(t.YNc(0,Sn,6,6,"ng-container",3),t.YNc(1,mn,2,4,"ng-container",3)),2&e){const n=t.oxw(2);t.Q6J("ngIf",n.multiple),t.xp6(1),t.Q6J("ngIf",!n.multiple)}}function pn(e,i){1&e&&t.YNc(0,gn,2,2,"ng-template",15)}function Tn(e,i){1&e&&t.GkF(0)}function fn(e,i){if(1&e&&t.YNc(0,Tn,1,0,"ng-container",20),2&e){const n=i.item;t.oxw(2);const o=t.MAs(9);t.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",t.VKq(2,Lt,n))}}function Cn(e,i){1&e&&t.YNc(0,fn,1,4,"ng-template",21)}function Dn(e,i){if(1&e&&t._UZ(0,"bb-product-item-basic-account-ui",22),2&e){const n=i.$implicit,o=t.oxw();t.Q6J("title",n.name)("productNumber",n.number)("type",n.type)("amount",n.bookedBalance||n.principalAmount||n.currentInvestmentValue)("currency",n.currency)("active",n.selected)("favorite",o.isFavorite(n))}}const bn=["filterButton"];function Mn(e,i){1&e&&(t.TgZ(0,"span"),t.SDv(1,12),t.qZA())}function Rn(e,i){1&e&&(t.TgZ(0,"span"),t.SDv(1,13),t.qZA())}const Nn=function(e){return{active:e}};function hn(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"button",7,8),t.NdJ("click",function(){return t.CHM(n),t.oxw().toggle()}),t._UZ(2,"bb-icon-ui",9),t.YNc(3,Mn,2,0,"span",10),t.YNc(4,Rn,2,0,"ng-template",null,11,t.W1O),t.qZA()}if(2&e){const n=t.MAs(5),o=t.oxw().isOpen,_=t.oxw();t.Q6J("color",_.filtersApplied&&!o?"primary":"secondary")("ngClass",t.VKq(5,Nn,o)),t.xp6(2),t.Q6J("cropped",!0),t.xp6(1),t.Q6J("ngIf",_.filtersApplied)("ngIfElse",n)}}function Un(e,i){if(1&e&&t._UZ(0,"bb-dropdown-single-select-option-ui",25),2&e){const n=t.oxw(3);t.Q6J("value",n.filterDatePeriods.Today)}}function On(e,i){if(1&e&&t._UZ(0,"bb-dropdown-single-select-option-ui",26),2&e){const n=t.oxw(3);t.Q6J("value",n.filterDatePeriods.Yesterday)}}function In(e,i){if(1&e&&t._UZ(0,"bb-dropdown-single-select-option-ui",27),2&e){const n=t.oxw(3);t.Q6J("value",n.filterDatePeriods.ThisWeek)}}function Bn(e,i){if(1&e&&t._UZ(0,"bb-dropdown-single-select-option-ui",28),2&e){const n=t.oxw(3);t.Q6J("value",n.filterDatePeriods.LastWeek)}}function yn(e,i){if(1&e&&t._UZ(0,"bb-dropdown-single-select-option-ui",29),2&e){const n=t.oxw(3);t.Q6J("value",n.filterDatePeriods.ThisMonth)}}function Fn(e,i){if(1&e&&t._UZ(0,"bb-dropdown-single-select-option-ui",30),2&e){const n=t.oxw(3);t.Q6J("value",n.filterDatePeriods.LastMonth)}}function vn(e,i){if(1&e&&t._UZ(0,"bb-dropdown-single-select-option-ui",31),2&e){const n=t.oxw(3);t.Q6J("value",n.filterDatePeriods.ThisQuarter)}}function Pn(e,i){if(1&e&&t._UZ(0,"bb-dropdown-single-select-option-ui",32),2&e){const n=t.oxw(3);t.Q6J("value",n.filterDatePeriods.LastQuarter)}}function Ln(e,i){if(1&e&&t._UZ(0,"bb-dropdown-single-select-option-ui",33),2&e){const n=t.oxw(3);t.Q6J("value",n.filterDatePeriods.ThisYear)}}function xn(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"bb-dropdown-single-select-ui",14),t.NdJ("change",function(){return t.CHM(n),t.oxw(2).setCustomFilter()}),t.YNc(1,Un,1,1,"bb-dropdown-single-select-option-ui",15),t.YNc(2,On,1,1,"bb-dropdown-single-select-option-ui",16),t.YNc(3,In,1,1,"bb-dropdown-single-select-option-ui",17),t.YNc(4,Bn,1,1,"bb-dropdown-single-select-option-ui",18),t.YNc(5,yn,1,1,"bb-dropdown-single-select-option-ui",19),t.YNc(6,Fn,1,1,"bb-dropdown-single-select-option-ui",20),t.YNc(7,vn,1,1,"bb-dropdown-single-select-option-ui",21),t.YNc(8,Pn,1,1,"bb-dropdown-single-select-option-ui",22),t.YNc(9,Ln,1,1,"bb-dropdown-single-select-option-ui",23),t._UZ(10,"bb-dropdown-single-select-option-ui",24),t.qZA()}if(2&e){const n=t.oxw(2);t.Q6J("required",!1),t.uIk("data-role","dropdown-single-select"),t.xp6(1),t.Q6J("ngIf",-1!==(null==n.datePeriodsToDisplay?null:n.datePeriodsToDisplay.indexOf(n.filterDatePeriods.Today))),t.xp6(1),t.Q6J("ngIf",-1!==(null==n.datePeriodsToDisplay?null:n.datePeriodsToDisplay.indexOf(n.filterDatePeriods.Yesterday))),t.xp6(1),t.Q6J("ngIf",-1!==(null==n.datePeriodsToDisplay?null:n.datePeriodsToDisplay.indexOf(n.filterDatePeriods.ThisWeek))),t.xp6(1),t.Q6J("ngIf",-1!==(null==n.datePeriodsToDisplay?null:n.datePeriodsToDisplay.indexOf(n.filterDatePeriods.LastWeek))),t.xp6(1),t.Q6J("ngIf",-1!==(null==n.datePeriodsToDisplay?null:n.datePeriodsToDisplay.indexOf(n.filterDatePeriods.ThisMonth))),t.xp6(1),t.Q6J("ngIf",-1!==(null==n.datePeriodsToDisplay?null:n.datePeriodsToDisplay.indexOf(n.filterDatePeriods.LastMonth))),t.xp6(1),t.Q6J("ngIf",-1!==(null==n.datePeriodsToDisplay?null:n.datePeriodsToDisplay.indexOf(n.filterDatePeriods.ThisQuarter))),t.xp6(1),t.Q6J("ngIf",-1!==(null==n.datePeriodsToDisplay?null:n.datePeriodsToDisplay.indexOf(n.filterDatePeriods.LastQuarter))),t.xp6(1),t.Q6J("ngIf",-1!==(null==n.datePeriodsToDisplay?null:n.datePeriodsToDisplay.indexOf(n.filterDatePeriods.ThisYear))),t.xp6(1),t.Q6J("value",n.filterDatePeriods.AllTime)}}function wn(e,i){if(1&e&&(t.TgZ(0,"div",3)(1,"div",4),t.YNc(2,hn,6,7,"button",5),t.YNc(3,xn,11,12,"bb-dropdown-single-select-ui",6),t.qZA()()),2&e){const n=t.oxw();t.xp6(2),t.Q6J("ngIf",n.showBookDate||n.showCategory),t.xp6(1),t.Q6J("ngIf",n.showCustomPeriodDropdown&&n.showBookDate)}}function Hn(e,i){if(1&e&&(t.TgZ(0,"div",44)(1,"div",45),t._UZ(2,"bb-input-datepicker-ui",46),t.TgZ(3,"bb-input-validation-message-ui",47)(4,"span",48),t.SDv(5,49),t.qZA()(),t.TgZ(6,"bb-input-validation-message-ui",47)(7,"span",50),t.SDv(8,51),t.qZA()()()()),2&e){const n=t.oxw(2);t.xp6(2),t.Q6J("rangeSelection",!0)("minDate",n.datePreferences.minimalDate)("maxDate",n.datePreferences.maximumDate),t.uIk("aria-invalid",n.filterForm.controls.bookDate.hasError("invalidDateFormat")),t.xp6(1),t.Q6J("showErrors",n.filterForm.controls.bookDate.hasError("invalidDateFormat")),t.xp6(3),t.Q6J("showErrors",!n.filterForm.controls.bookDate.hasError("invalidDateFormat")&&!n.filterForm.untouched&&(n.filterForm.controls.bookDate.hasError("dateGreaterThanMaxDate")||n.filterForm.controls.bookDate.hasError("dateLessThanMinDate")))}}function Kn(e,i){if(1&e&&t._UZ(0,"bb-dropdown-multi-select-option-ui",55),2&e){const n=i.$implicit,o=t.oxw(4);t.Q6J("label",o.accountStatementCategories[n]||n)("value",n)}}function kn(e,i){if(1&e&&(t.TgZ(0,"bb-dropdown-multi-select-ui",53),t.YNc(1,Kn,1,2,"bb-dropdown-multi-select-option-ui",54),t.qZA()),2&e){const n=t.oxw(3);t.xp6(1),t.Q6J("ngForOf",n.categories)}}function Jn(e,i){if(1&e&&(t.ynx(0),t.YNc(1,kn,2,1,"bb-dropdown-multi-select-ui",52),t.BQk()),2&e){const n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==n.categories?null:n.categories.length)}}function $n(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"button",56),t.NdJ("click",function(){return t.CHM(n),t.oxw(2).resetFormData()}),t.SDv(1,57),t.qZA()}}function Gn(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"div",34)(1,"div",35),t.YNc(2,Hn,9,6,"div",36),t.YNc(3,Jn,2,1,"ng-container",37),t.qZA(),t.TgZ(4,"div",38)(5,"button",39),t.NdJ("click",function(){const a=t.CHM(n).toggle;return t.oxw().onSubmit(),a()}),t.SDv(6,40),t.qZA(),t.TgZ(7,"button",41),t.NdJ("click",function(){const a=t.CHM(n).toggle,s=t.oxw();return a(),s.focusFilterButton()}),t.SDv(8,42),t.qZA(),t.YNc(9,$n,2,0,"button",43),t.qZA()()}if(2&e){const n=t.oxw();t.xp6(2),t.Q6J("ngIf",n.showBookDate),t.xp6(1),t.Q6J("ngIf",n.showCategory),t.xp6(2),t.Q6J("disabled",n.filterForm.pristine||n.filterForm.invalid),t.xp6(4),t.Q6J("ngIf",n.filterForm.dirty||n.filtersApplied)}}function Zn(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"div",5)(1,"button",6),t.NdJ("bbAccountStatementDownloadDocFailure",function(_){return t.CHM(n),t.oxw(2).onDownloadDocFailure(_)}),t._UZ(2,"bb-icon-ui",7),t.qZA()()}if(2&e){t.oxw();const n=t.MAs(3),o=t.oxw();t.Q6J("bbTooltip",n)("placement",o.tooltipPlacement),t.xp6(1),t.Q6J("circle",!0)("bbAccountStatementDownloadDoc",o.documents[0]),t.uIk("aria-describedby",o.describedByElementId)}}function Qn(e,i){if(1&e&&(t.ynx(0),t.SDv(1,9),t.BQk()),2&e){const n=t.oxw(3);t.xp6(1),t.pQV(n.mimeTypeExtensions[n.documents[0].contentType]),t.QtT(1)}}function Wn(e,i){1&e&&t.SDv(0,10)}function Yn(e,i){if(1&e&&(t.YNc(0,Qn,2,1,"ng-container",0),t.YNc(1,Wn,1,0,"ng-template",null,8,t.W1O)),2&e){const n=t.MAs(2),o=t.oxw(2);t.Q6J("ngIf",o.mimeTypeExtensions[o.documents[0].contentType])("ngIfElse",n)}}function zn(e,i){if(1&e&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&e){const n=t.oxw(),o=n.index,_=n.$implicit,a=t.oxw(4);t.uIk("aria-labelledby","dropdown-item-download-file-"+o),t.xp6(1),t.hij(" ",a.mimeTypeExtensions[_.contentType]," ")}}function jn(e,i){if(1&e&&t.SDv(0,19),2&e){const n=t.oxw().index;t.pQV(n+1),t.QtT(0)}}function Vn(e,i){if(1&e&&(t.TgZ(0,"span"),t.SDv(1,20),t.qZA()),2&e){const n=t.oxw().$implicit,o=t.oxw(4);t.xp6(1),t.pQV(o.mimeTypeExtensions[n.contentType]),t.QtT(1)}}function Xn(e,i){if(1&e&&t.SDv(0,21),2&e){const n=t.oxw().index;t.pQV(n+1),t.QtT(0)}}function qn(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"a",15),t.NdJ("click",function(_){return _.preventDefault()})("bbAccountStatementDownloadDocFailure",function(_){return t.CHM(n),t.oxw(4).onDownloadDocFailure(_)}),t.YNc(1,zn,2,2,"span",0),t.YNc(2,jn,1,1,"ng-template",null,16,t.W1O),t.TgZ(4,"div",17),t.YNc(5,Vn,2,1,"span",0),t.YNc(6,Xn,1,1,"ng-template",null,18,t.W1O),t.qZA()()}if(2&e){const n=i.$implicit,o=i.index,_=t.MAs(3),a=t.MAs(7),s=t.oxw(4);t.Q6J("bbAccountStatementDownloadDoc",n),t.xp6(1),t.Q6J("ngIf",s.mimeTypeExtensions[n.contentType])("ngIfElse",_),t.xp6(3),t.MGl("id","dropdown-item-download-file-",o,""),t.xp6(1),t.Q6J("ngIf",s.mimeTypeExtensions[n.contentType])("ngIfElse",a)}}function to(e,i){if(1&e&&t.YNc(0,qn,8,6,"a",14),2&e){const n=t.oxw(3);t.Q6J("ngForOf",n.documents)}}function eo(e,i){if(1&e&&(t.TgZ(0,"div",11)(1,"bb-dropdown-menu-ui",12),t.YNc(2,to,1,1,"ng-template",13),t.qZA()()),2&e){const n=t.oxw(2);t.Q6J("placement",n.tooltipPlacement),t.xp6(1),t.Q6J("btnCircle",!0),t.uIk("aria-describedby",n.describedByElementId)}}function no(e,i){if(1&e&&(t.ynx(0),t.YNc(1,Zn,3,5,"div",2),t.YNc(2,Yn,3,2,"ng-template",null,3,t.W1O),t.YNc(4,eo,3,3,"ng-template",null,4,t.W1O),t.BQk()),2&e){const n=t.MAs(5),o=t.oxw();t.xp6(1),t.Q6J("ngIf",1===o.documents.length)("ngIfElse",n)}}function oo(e,i){if(1&e&&(t.TgZ(0,"div",22),t._UZ(1,"bb-icon-ui",23),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.uIk("aria-describedby",n.describedByElementId)}}function io(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"div",1)(1,"button",2),t.NdJ("click",function(){return t.CHM(n),t.oxw().viewOnline()}),t._UZ(2,"bb-icon-ui",3),t.qZA()()}if(2&e){const n=t.oxw();t.xp6(1),t.Q6J("circle",!0),t.uIk("aria-describedby",n.describedByElementId)}}function _o(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"th",11),t.ALo(2,"getDirection"),t.TgZ(3,"span",12),t._uU(4),t.qZA()(),t.BQk()),2&e){const n=i.$implicit,o=t.oxw(2);t.xp6(1),t.Q2q("data-role","account-statement-table__",n.key,"-header"),t.Q6J("bbSortable",n.sortable?n.key:void 0)("direction",t.xi3(2,4,n.key,o.sortingParams)),t.xp6(3),t.Oqu(n.name)}}function ao(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"td",23),t._uU(2),t.ALo(3,"bbDate"),t.qZA(),t.BQk()),2&e){const n=t.oxw(2).$implicit;t.xp6(2),t.hij(" ",t.xi3(3,1,n.date,"shortDate")," ")}}function co(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"td",24),t._uU(2),t.qZA(),t.BQk()),2&e){const n=t.oxw(2).$implicit,o=t.oxw(3);t.xp6(2),t.hij(" ",o.accountStatementCategories[n.category||""]||n.category," ")}}function so(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"td",25)(2,"div"),t._uU(3),t.qZA()(),t.BQk()),2&e){const n=t.oxw(2).$implicit;t.xp6(3),t.hij(" ",n.description," ")}}function lo(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"td",26)(2,"div"),t._uU(3),t.qZA(),t.TgZ(4,"div",27),t._uU(5),t.qZA()(),t.BQk()),2&e){const n=t.oxw(2).$implicit;t.xp6(3),t.Oqu(n.accountName),t.xp6(2),t.hij(" ",n.accountNumber," ")}}function ro(e,i){1&e&&(t.ynx(0),t._UZ(1,"td"),t.BQk())}function uo(e,i){1&e&&(t.ynx(0,20),t.YNc(1,ao,4,4,"ng-container",21),t.YNc(2,co,3,1,"ng-container",21),t.YNc(3,so,4,1,"ng-container",21),t.YNc(4,lo,6,2,"ng-container",21),t.YNc(5,ro,2,0,"ng-container",22),t.BQk()),2&e&&(t.Q6J("ngSwitch",i.$implicit.key),t.xp6(1),t.Q6J("ngSwitchCase","date"),t.xp6(1),t.Q6J("ngSwitchCase","category"),t.xp6(1),t.Q6J("ngSwitchCase","description"),t.xp6(1),t.Q6J("ngSwitchCase","accountName"))}function Eo(e,i){if(1&e&&(t.TgZ(0,"span",28),t.SDv(1,29),t.ALo(2,"bbDate"),t.qZA()),2&e){const n=t.oxw(),_=n.$implicit;t.MGl("id","describe-preview-by-",n.index,""),t.xp6(2),t.pQV(_.accountName)(t.xi3(2,3,_.date,"fullDate")),t.QtT(1)}}function Ao(e,i){if(1&e&&t._UZ(0,"bb-account-statement-view-online",30),2&e){const n=t.oxw(),_=n.$implicit;t.MGl("describedByElementId","describe-preview-by-",n.index,""),t.Q6J("documents",_.documents)}}function So(e,i){if(1&e&&(t.ynx(0),t.SDv(1,33),t.ALo(2,"bbDate"),t.BQk()),2&e){const n=t.oxw(2).$implicit,o=t.oxw(3);t.xp6(2),t.pQV(o.mimeTypeExtensions[(null==n.documents[0]?null:n.documents[0].contentType)||""])(n.accountName)(t.xi3(2,3,n.date,"fullDate")),t.QtT(1)}}function mo(e,i){if(1&e&&(t.SDv(0,34),t.ALo(1,"bbDate")),2&e){const n=t.oxw(2).$implicit;t.xp6(1),t.pQV(n.accountName)(t.xi3(1,2,n.date,"fullDate")),t.QtT(0)}}function go(e,i){if(1&e&&(t.TgZ(0,"span",28),t.YNc(1,So,3,6,"ng-container",31),t.YNc(2,mo,2,5,"ng-template",null,32,t.W1O),t.qZA()),2&e){const n=t.MAs(3),o=t.oxw(),a=o.$implicit;t.MGl("id","describe-download-by-",o.index,""),t.xp6(1),t.Q6J("ngIf",1===(null==a.documents?null:a.documents.length))("ngIfElse",n)}}function po(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"div",40)(2,"div",41),t.SDv(3,42),t.qZA(),t.TgZ(4,"div"),t._uU(5),t.ALo(6,"bbDate"),t.qZA()(),t.BQk()),2&e){const n=t.oxw(3).$implicit;t.xp6(5),t.Oqu(t.xi3(6,1,n.date,"shortDate"))}}function To(e,i){if(1&e&&t._UZ(0,"bb-account-statement-view-online",43),2&e){const n=t.oxw(3),_=n.$implicit;t.MGl("describedByElementId","describe-preview-by-",n.index,""),t.Q6J("documents",_.documents)}}function fo(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"div",36)(1,"div",37),t.YNc(2,po,7,4,"ng-container",21),t.YNc(3,To,1,2,"bb-account-statement-view-online",38),t.TgZ(4,"bb-account-statement-downloads",39),t.NdJ("downloadFailure",function(_){return t.CHM(n),t.oxw(5).onDownloadFailure(_)}),t.qZA()()()}if(2&e){const n=t.oxw(2),o=n.$implicit,_=n.index,a=t.oxw(3);t.xp6(2),t.Q6J("ngSwitchCase","date"),t.xp6(1),t.Q6J("ngIf",o.documents.length>0),t.xp6(1),t.MGl("describedByElementId","describe-download-by-",_,""),t.Q6J("documents",o.documents)("mimeTypeExtensions",a.mimeTypeExtensions)}}function Co(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"div",41),t.SDv(2,44),t.qZA(),t.TgZ(3,"div",36),t._uU(4),t.qZA(),t.BQk()),2&e){const n=t.oxw(2).$implicit;t.xp6(4),t.hij(" ",n.category," ")}}function Do(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"div",41),t.SDv(2,45),t.qZA(),t.TgZ(3,"div",36),t._uU(4),t.qZA(),t.BQk()),2&e){const n=t.oxw(2).$implicit;t.xp6(4),t.hij(" ",n.description," ")}}function bo(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"div",41),t.SDv(2,46),t.qZA(),t.TgZ(3,"div",36),t._uU(4),t.qZA(),t.TgZ(5,"div",41),t.SDv(6,47),t.qZA(),t.TgZ(7,"div",48),t._uU(8),t.qZA(),t.BQk()),2&e){const n=t.oxw(2).$implicit;t.xp6(4),t.hij(" ",n.accountName," "),t.xp6(4),t.hij(" ",n.accountNumber," ")}}function Mo(e,i){if(1&e&&(t.ynx(0,20),t.YNc(1,fo,5,5,"div",35),t.YNc(2,Co,5,1,"ng-container",21),t.YNc(3,Do,5,1,"ng-container",21),t.YNc(4,bo,9,2,"ng-container",21),t.BQk()),2&e){const o=i.first;t.Q6J("ngSwitch",i.$implicit.key),t.xp6(1),t.Q6J("ngIf",o),t.xp6(1),t.Q6J("ngSwitchCase","category"),t.xp6(1),t.Q6J("ngSwitchCase","description"),t.xp6(1),t.Q6J("ngSwitchCase","accountName")}}function Ro(e,i){if(1&e){const n=t.EpF();t.ynx(0),t.TgZ(1,"tr",13),t.YNc(2,uo,6,5,"ng-container",14),t.TgZ(3,"td",15),t.YNc(4,Eo,3,6,"span",16),t.YNc(5,Ao,1,2,"bb-account-statement-view-online",17),t.qZA(),t.TgZ(6,"td",15),t.YNc(7,go,4,3,"span",16),t.TgZ(8,"bb-account-statement-downloads",18),t.NdJ("downloadFailure",function(_){return t.CHM(n),t.oxw(3).onDownloadFailure(_)}),t.qZA()()(),t.TgZ(9,"div",19),t.YNc(10,Mo,5,5,"ng-container",14),t.qZA(),t.BQk()}if(2&e){const n=i.$implicit,o=i.index,_=t.oxw(3);t.xp6(2),t.Q6J("ngForOf",_.tableConfig),t.xp6(2),t.Q6J("ngIf",null==n.documents?null:n.documents.length),t.xp6(1),t.Q6J("ngIf",n.documents.length>0),t.xp6(2),t.Q6J("ngIf",null==n.documents?null:n.documents.length),t.xp6(1),t.MGl("describedByElementId","describe-download-by-",o,""),t.Q6J("documents",n.documents)("mimeTypeExtensions",_.mimeTypeExtensions),t.xp6(2),t.Q6J("ngForOf",_.tableConfig)}}function No(e,i){if(1&e&&(t.TgZ(0,"tbody"),t.YNc(1,Ro,11,8,"ng-container",4),t.qZA()),2&e){const n=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",n.accountStatements)}}function ho(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"table",2),t.NdJ("sort",function(_){return t.CHM(n),t.oxw().onSort(_)}),t.TgZ(1,"thead")(2,"tr",3),t.YNc(3,_o,5,7,"ng-container",4),t.TgZ(4,"th",5)(5,"span",6),t.SDv(6,7),t.qZA()(),t.TgZ(7,"th",5)(8,"span",8),t.SDv(9,9),t.qZA()()()(),t.YNc(10,No,2,1,"tbody",10),t.qZA()}if(2&e){const n=t.oxw();t.Q6J("bbTable",n.accountStatements),t.xp6(3),t.Q6J("ngForOf",n.tableConfig),t.xp6(7),t.Q6J("ngIf",!n.loading)}}function Uo(e,i){1&e&&t._UZ(0,"bb-loading-indicator-ui",49)}let Oo=(()=>{class e{constructor(n){this.route=n,this.id="bb-account-statement-account-selector-"+e.idCounter++,this.size=50,this.multiple=!1,this.markFirst=!1,this.searchable=!1,this.multiSelectLabelLimit=15,this.loading=!1,this.placeholder="",this.extendedDetails=!1,this.paramsChange=new t.vpe,this.selectedAccountIds=new t.vpe,this.scrollPosition=new Dt.x,this.searchDebounced=new Dt.x,this.subscriptions=[],this._accounts=[],this.accounts=new mt.X([]),this.accountsTotal=new mt.X(0),this.accountsLoaded=new mt.X(0),this.accountIds=new mt.X([]),this.favoriteFirst=!1,this.debounceTime=300,this.accountsForVirtualScroll=100,this.accountsBeforeLoadingMore=5,this.virtualScroll=this.accountsTotal.pipe((0,l.U)(o=>o>=this.accountsForVirtualScroll)),this.selectedItems=(0,gt.a)([this.accounts,this.accountIds]).pipe((0,l.U)(([o,_])=>this.multiple?o?o.filter(a=>_.includes(a.id)):[]:o?o.find(a=>a.id===_[0]):void 0)),this.multiSelectLabelText$=this.selectedItems.pipe((0,l.U)(o=>Array.isArray(o)?o:[]),(0,l.U)(o=>{let _=o.map(a=>a.displayName).join(", ");return o.length>this.multiSelectLabelLimit&&(_=o.slice(0,this.multiSelectLabelLimit).map(a=>a.displayName).join(", ").concat("...")),_})),this.loadMore=(0,gt.a)([this.accountsLoaded,this.accountsTotal]).pipe((0,ot.w)(([o,_])=>this.scrollPosition.pipe((0,bt.h)(a=>!a||a.end>=o-this.accountsBeforeLoadingMore),(0,bt.h)(()=>o<_&&!this.loading)))),this.searchByAlias=(o,_)=>[_.displayName].map(a=>(a||"").toLowerCase()).some(a=>a.includes(o.toLowerCase())),this.isFavorite=o=>{const _=o.userPreferences&&o.userPreferences.favorite;return null!=_?_:"favorite"in o?o.favorite:void 0}}set accountsObject(n){this._accounts=n.items,this.accounts.next(n.items),this.accountsTotal.next(n.count),this.accountsLoaded.next(n.items.length)}set routeIds(n){this.accountIds.next(n)}ngOnInit(){const n=this.searchDebounced.pipe((0,_n.b)(this.debounceTime),(0,an.x)()).subscribe(_=>this.setSearchTerm(_)),o=this.loadMore.subscribe(()=>this.loadMoreAccounts());this.subscriptions.push(n,o)}loadMoreAccounts(){this.paramsChange.emit({from:this.currentParams.from?this.currentParams.from+1:1})}setSearchTerm(n){this.paramsChange.emit({from:0,searchTerm:n})}change(n){!this.isProductsummaryItem(n)||(Array.isArray(n)?this.selectedAccountIds.emit(n.map(o=>o.id).join(",")):this.selectedAccountIds.emit(n.id))}isProductsummaryItem(n){return!(!Array.isArray(n)||0!==n.length)||"id"in(Array.isArray(n)?n[0]:n)}scroll(n){n.end&&this.scrollPosition.next(n)}scrollToEnd(){this.scrollPosition.next()}filter(n=""){n||this.search()}search(n=""){this.searchDebounced.next(n)}ngOnDestroy(){this.subscriptions.forEach(n=>n.unsubscribe())}}return e.idCounter=0,e.\u0275fac=function(n){return new(n||e)(t.Y36(j.gz))},e.\u0275cmp=t.Xpm({type:e,selectors:[["bb-account-statement-account-picker"]],inputs:{size:"size",multiple:"multiple",markFirst:"markFirst",searchable:"searchable",multiSelectLabelLimit:"multiSelectLabelLimit",loading:"loading",placeholder:"placeholder",extendedDetails:"extendedDetails",accountsObject:"accountsObject",routeIds:"routeIds",currentParams:"currentParams",favoriteFirst:"favoriteFirst"},outputs:{paramsChange:"paramsChange",selectedAccountIds:"selectedAccountIds"},decls:10,vars:21,consts:function(){let i,n,o;return i=" Account selector dropdown\n",n="{VAR_PLURAL, plural, =1 {1 account selected} other {{INTERPOLATION}\n            accounts selected}}",n=t.Zx4(n,{VAR_PLURAL:"\ufffd0\ufffd",INTERPOLATION:"\ufffd1\ufffd"}),o=" accounts ",[["data-role","account-selector-label",1,"sr-only"],i,[3,"id","virtualScroll","items","multiple","closeOnSelect","groupByFn","selectedItems","searchable","markFirst","loading","searchFunc","aria-labelledby","placeholder","change","scroll","scrollToEnd","filterChange","search","clearSearch"],[4,"ngIf"],["itemBasic",""],["bbCustomMultiSelectedItemsLabel",""],[1,"bb-account-selector__selected"],[1,"bb-account-selector__selected-accounts-number","bb-text-bold"],["data-role","selected-accounts-count"],n,[1,"bb-account-selector__selected-accounts","bb-text-subtitle"],[4,"ngIf","ngIfElse"],["selectedAccountsTemplate",""],[1,"bb-account-selector__selected-account"],o,["bbCustomOptionItem",""],[1,"bb-stack"],[1,"bb-stack__item","multiple-accounts-item-checkbox"],[3,"id","ngModel","click"],[1,"bb-stack__item","bb-stack__item--fill","bb-ellipsis","bb-ellipsis--single-line"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["bbCustomSingleSelectedItemLabel",""],[3,"title","productNumber","type","amount","currency","active","favorite"]]},template:function(n,o){1&n&&(t.TgZ(0,"span",0),t.SDv(1,1),t.qZA(),t.TgZ(2,"bb-account-selector-ui",2),t.NdJ("change",function(a){return o.change(a)})("scroll",function(a){return o.scroll(a)})("scrollToEnd",function(){return o.scrollToEnd()})("filterChange",function(a){return o.filter(a)})("search",function(a){return o.search(a)})("clearSearch",function(){return o.search()}),t.ALo(3,"async"),t.ALo(4,"async"),t.YNc(5,En,1,0,null,3),t.YNc(6,pn,1,0,null,3),t.YNc(7,Cn,1,0,null,3),t.qZA(),t.YNc(8,Dn,1,7,"ng-template",null,4,t.W1O)),2&n&&(t.uIk("id",o.id+"-label"),t.xp6(2),t.Q6J("id",o.id)("virtualScroll",!0===t.lcZ(3,17,o.virtualScroll))("items",o._accounts)("multiple",o.multiple)("closeOnSelect",!o.multiple)("groupByFn",o.favoriteFirst?o.isFavorite:void 0)("selectedItems",t.lcZ(4,19,o.selectedItems))("searchable",o.searchable)("markFirst",o.markFirst)("loading",o.loading)("searchFunc",o.searchByAlias)("aria-labelledby",o.id+"-label")("placeholder",o.placeholder),t.xp6(3),t.Q6J("ngIf",o.extendedDetails),t.xp6(1),t.Q6J("ngIf",o.extendedDetails),t.xp6(1),t.Q6J("ngIf",o.extendedDetails))},directives:[pt.vI,ae.SN,ce.r,se.mB,E.O5,pt.vS,pt.tD,G.JJ,G.On,E.tP,pt.xD],pipes:[E.Ov],encapsulation:2}),e})(),Io=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[ce.b,se.gn,it.p,V.P,E.ez,G.u5,pt.db,ae.OG]]}),e})(),Bo=(()=>{class e{constructor(n,o){this.fb=n,this.accountStatementCategories=o,this.showCustomPeriodDropdown=!1,this.pageSize=0,this.filtersApplied=!1,this.filterParams={},this.categories=[],this.datePeriodsToDisplay=[],this.tableConfig=[],this.submitForm=new t.vpe,this.resetForm=new t.vpe,this.showCategory=!0,this.showBookDate=!0,this.filterDatePeriods=I}ngOnInit(){this.createForm(),this.updateFiltersVisibility()}createForm(){this.filterForm=this.fb.group({categories:[this.filterParams.category||[]],bookDate:this.filterParams.dateFrom?{from:this.filterParams.dateFrom,to:this.filterParams.dateTo}:""}),this.showCustomPeriodDropdown&&this.filterForm.addControl("customFilterPeriods",new G.NI(this.filterParams.datePeriod))}focusFilterButton(){this.filterButton&&this.filterButton.nativeElement.focus()}applyFormData(){const n=this.filterForm.get("bookDate"),o=this.filterForm.get("customFilterPeriods"),_=this.filterForm.get("categories"),a=o&&o.value,s=_&&_.value,{from:C,to:U}=n&&n.value||{};this.submitForm.emit({dateFrom:C,dateTo:U,datePeriod:a,category:s}),this.filterForm.markAsPristine()}resetFormData(){this.filterForm.reset(),this.resetForm.emit({category:void 0,dateFrom:void 0,dateTo:void 0}),this.showCustomPeriodDropdown&&this.filterForm.reset({customFilterPeriods:this.filterDatePeriods.AllTime}),this.focusFilterButton()}onSubmit(){const n=this.filterForm.get("customFilterPeriods");n&&this.filterForm.controls.bookDate.touched&&n.reset(),this.applyFormData(),this.focusFilterButton()}setCustomFilter(){const n=this.filterForm.get("customFilterPeriods"),o=this.filterForm.get("bookDate"),a=oe[n&&n.value](),s=a.from&&a.from.toISOString(),C=a.to&&a.to.toISOString();o&&o.setValue(s&&C?{from:s,to:C}:""),this.applyFormData()}updateFiltersVisibility(){this.showBookDate=this.tableConfig.some(n=>"date"===n.key),this.showCategory=this.tableConfig.some(n=>"category"===n.key)}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(G.qu),t.Y36(k))},e.\u0275cmp=t.Xpm({type:e,selectors:[["bb-account-statement-base-filters"]],viewQuery:function(n,o){if(1&n&&t.Gf(bn,5),2&n){let _;t.iGM(_=t.CRH())&&(o.filterButton=_.first)}},inputs:{showCustomPeriodDropdown:"showCustomPeriodDropdown",pageSize:"pageSize",filtersApplied:"filtersApplied",filterParams:"filterParams",categories:"categories",datePreferences:"datePreferences",datePeriodsToDisplay:"datePeriodsToDisplay",tableConfig:"tableConfig"},outputs:{submitForm:"submitForm",resetForm:"resetForm"},decls:4,vars:1,consts:function(){let i,n,o,_,a,s,C,U,y,O,H,R,ct,Et,At,st,q,L,x,lt,ee,ze;return i="Custom",n=" Filters applied ",o=" Filter ",_="Today",a="Yesterday",s="This week",C="Last week",U="This month",y="Last month",O="This quarter",H="Last quarter",R="This year",ct="All time",Et=" Apply ",At=" Close ",st="Date range",q="Book date",L="Invalid date format",x="The selected dates include values outside the allowed date range. Please select a date interval in the permitted time frame.",lt="Select product category",ee="Category",ze=" Clear all ",[[3,"formGroup"],["bbCollapsibleHeader",""],["bbCollapsibleBody",""],[1,"bb-block","px-2"],[1,"bb-stack","bb-stack--wrap","card-section","py-0"],["class","bb-stack__item bb-stack__item--spacing-lg bb-stack__item--push-left-sm-down bb-stack__break--sm-down bb-block bb-block--md-md-down","bbButton","","data-role","collapsible-filter-btn",3,"color","ngClass","click",4,"ngIf"],["class","bb-stack__item bb-stack__break--sm-down","formControlName","customFilterPeriods","placeholder",i,3,"required","change",4,"ngIf"],["bbButton","","data-role","collapsible-filter-btn",1,"bb-stack__item","bb-stack__item--spacing-lg","bb-stack__item--push-left-sm-down","bb-stack__break--sm-down","bb-block","bb-block--md-md-down",3,"color","ngClass","click"],["filterButton",""],["name","filter",3,"cropped"],[4,"ngIf","ngIfElse"],["filterButtonTextDefault",""],n,o,["formControlName","customFilterPeriods","placeholder",i,1,"bb-stack__item","bb-stack__break--sm-down",3,"required","change"],["label",_,3,"value",4,"ngIf"],["label",a,3,"value",4,"ngIf"],["label",s,3,"value",4,"ngIf"],["label",C,3,"value",4,"ngIf"],["label",U,3,"value",4,"ngIf"],["label",y,3,"value",4,"ngIf"],["label",O,3,"value",4,"ngIf"],["label",H,3,"value",4,"ngIf"],["label",R,3,"value",4,"ngIf"],["label",ct,3,"value"],["label",_,3,"value"],["label",a,3,"value"],["label",s,3,"value"],["label",C,3,"value"],["label",U,3,"value"],["label",y,3,"value"],["label",O,3,"value"],["label",H,3,"value"],["label",R,3,"value"],["data-role","filter-form",1,"card-body","account-statements-filter__form-container","px-4","mt-6"],[1,"row"],["class","bb-block bb-block--md col-12 col-lg-6 col-sm-6 account-statements-filter__date-field-column",4,"ngIf"],[4,"ngIf"],[1,"bb-button-bar--reverse","pt-5"],["bbButton","","type","submit","buttonSize","sm","data-role","apply",1,"bb-button-bar__button",3,"disabled","click"],Et,["bbButton","","color","secondary","buttonSize","sm","data-role","close",1,"bb-button-bar__button",3,"click"],At,["bbButton","","color","link","buttonSize","sm","class","bb-button-bar__button","data-role","clear-all",3,"click",4,"ngIf"],[1,"bb-block","bb-block--md","col-12","col-lg-6","col-sm-6","account-statements-filter__date-field-column"],[1,"account-statements-filter__date-field-wrapper"],["label",st,"labelClasses","form-label","aria-label",q,"formControlName","bookDate","data-role","book-date",3,"rangeSelection","minDate","maxDate"],["aria-live","polite",1,"account-statements-filter__validation-message",3,"showErrors"],["data-role","invalid-book-date-error-message"],L,["data-role","invalid-book-date-limit-error-message"],x,["formControlName","categories","class","bb-block bb-block--md col-12 col-lg-6 col-sm-6","data-role","categories-filter","placeholder",lt,"label",ee,4,"ngIf"],["formControlName","categories","data-role","categories-filter","placeholder",lt,"label",ee,1,"bb-block","bb-block--md","col-12","col-lg-6","col-sm-6"],[3,"label","value",4,"ngFor","ngForOf"],[3,"label","value"],["bbButton","","color","link","buttonSize","sm","data-role","clear-all",1,"bb-button-bar__button",3,"click"],ze]},template:function(n,o){1&n&&(t.TgZ(0,"bb-collapsible-ui")(1,"form",0),t.YNc(2,wn,4,2,"ng-template",1),t.YNc(3,Gn,10,4,"ng-template",2),t.qZA()()),2&n&&(t.xp6(1),t.Q6J("formGroup",o.filterForm))},directives:[Mt.tB,at.o,Ft.Pp,Ft.MM,Nt.sO,le.d,yt.QW,yt.gy,G._Y,G.JL,G.sg,Mt.gM,E.O5,_t.Hq,E.mk,G.JJ,G.u,G.Q7,Mt.rJ,Nt.Mt,Nt.jC,E.sg],encapsulation:2}),e})();const yo=[sn.XC,_t.hJ,Mt.d8,Rt.CK,at.Q,Nt.tE,le.w,cn.LZ,yt.Bj,Ft.CS];let Fo=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[E.ez,G.UX,...yo]]}),e})(),xt=(()=>{class e{constructor(n){this.document=n}simulateLinkClick(n,o){const _=o.createElement("a");for(const[a,s]of Object.entries(n))_.setAttribute(a,s);o.appendChild(this.document.body,_),_.click(),o.removeChild(this.document.body,_)}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(E.K0))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})(),vo=(()=>{class e{constructor(n,o){this.domService=n,this.renderer=o,this.doc={},this.filename="",this.downloadFailure=new t.vpe}onClick(){this.downloadDoc(this.doc)}downloadDoc(n){if(n.url){const o=(e=>new RegExp(/\?.+=.*/g).test(e))(n.url)?`${n.url}&inline=false`:`${n.url}?inline=false`;this.domService.simulateLinkClick({href:o},this.renderer)}}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(xt),t.Y36(t.Qsj))},e.\u0275dir=t.lG2({type:e,selectors:[["","bbAccountStatementDownloadDoc",""]],hostBindings:function(n,o){1&n&&t.NdJ("click",function(){return o.onClick()})("keydown.enter",function(){return o.onClick()})("keydown.space",function(){return o.onClick()})},inputs:{doc:["bbAccountStatementDownloadDoc","doc"],filename:["bbAccountStatementDownloadDocFilename","filename"]},outputs:{downloadFailure:"bbAccountStatementDownloadDocFailure"}}),e})(),ue=(()=>{class e{constructor(){this.documents=[],this.mimeTypeExtensions={},this.downloadFailure=new t.vpe,this.describedByElementId="",this.tooltipPlacement="top"}onDownloadDocFailure(n){this.downloadFailure.emit(n)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["bb-account-statement-downloads"]],inputs:{documents:"documents",mimeTypeExtensions:"mimeTypeExtensions",describedByElementId:"describedByElementId",tooltipPlacement:"tooltipPlacement"},outputs:{downloadFailure:"downloadFailure"},decls:3,vars:2,consts:function(){let i,n,o,_,a,s,C,U,y;return i="Download one available format",n=" Download - " + "\ufffd0\ufffd" + " ",o=" Download - File ",_="Show downloads actions",a="Show download actions",s=" File " + "\ufffd0\ufffd" + " ",C=" Download as " + "\ufffd0\ufffd" + " ",U=" Download unknown extension file " + "\ufffd0\ufffd" + " ",y="Download is not supported for this statement, please contact the bank",[[4,"ngIf","ngIfElse"],["emptyState",""],["data-role","account-statement-table__download--single","triggers","hover focus",3,"bbTooltip","placement",4,"ngIf","ngIfElse"],["singleDownloadTooltip",""],["documentsToDownload",""],["data-role","account-statement-table__download--single","triggers","hover focus",3,"bbTooltip","placement"],["bbButton","","color","link","aria-label",i,"data-role","download-one",3,"circle","bbAccountStatementDownloadDoc","bbAccountStatementDownloadDocFailure"],["name","get-app","size","md"],["singleDownloadTooltipNoExtension",""],n,o,["triggers","hover focus","data-role","account-statement-table__download--multiple","bbTooltip",_,3,"placement"],["data-role","as-dropdown-menu","icon","get-app","btnColor","link","container","body","dropDownButtonLabel",a,3,"btnCircle"],["bbDropdownMenuItem",""],["rel","noopener","role","menuitem","class","dropdown-item","data-role","download-statement","href","",3,"bbAccountStatementDownloadDoc","click","bbAccountStatementDownloadDocFailure",4,"ngFor","ngForOf"],["rel","noopener","role","menuitem","data-role","download-statement","href","",1,"dropdown-item",3,"bbAccountStatementDownloadDoc","click","bbAccountStatementDownloadDocFailure"],["dropdownItemNoExtension",""],[1,"sr-only",3,"id"],["dropdownItemAriaLabelNoExtension",""],s,C,U,["data-role","account-statement-table__download--empty","triggers","hover focus","placement","bottom","bbTooltip",y],["data-role","empty-state","name","warning","color","warning","tabindex","0"]]},template:function(n,o){if(1&n&&(t.YNc(0,no,6,2,"ng-container",0),t.YNc(1,oo,2,1,"ng-template",null,1,t.W1O)),2&n){const _=t.MAs(2);t.Q6J("ngIf",o.documents.length)("ngIfElse",_)}},directives:[at.o,Rt.N9,E.O5,vt.i,_t.Hq,vo,Rt.i4,E.sg],encapsulation:2,changeDetection:0}),e})(),Ee=(()=>{class e{constructor(n,o){this.domService=n,this.renderer=o,this.describedByElementId=""}set documents(n){this.documentPDF=n.find(o=>"application/pdf"===o.contentType)}viewOnline(){var n;this.domService.simulateLinkClick({target:"_blank",href:(null===(n=this.documentPDF)||void 0===n?void 0:n.url)||""},this.renderer)}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(xt),t.Y36(t.Qsj))},e.\u0275cmp=t.Xpm({type:e,selectors:[["bb-account-statement-view-online"]],inputs:{describedByElementId:"describedByElementId",documents:"documents"},decls:1,vars:1,consts:function(){let i,n;return i="Preview",n="View online",[["triggers","hover focus","bbTooltip",i,4,"ngIf"],["triggers","hover focus","bbTooltip",i],["bbButton","","color","link","aria-label",n,"data-role","view-online",3,"circle","click"],["name","open-in-new"]]},template:function(n,o){1&n&&t.YNc(0,io,3,2,"div",0),2&n&&t.Q6J("ngIf",o.documentPDF)},directives:[at.o,E.O5,vt.i,_t.Hq],encapsulation:2,changeDetection:0}),e})(),Po=(()=>{class e{transform(n,o){return o&&o.column===n?o.direction:""}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275pipe=t.Yjl({name:"getDirection",type:e,pure:!0}),e})(),Ae=(()=>{class e{constructor(n,o){this.accountStatementCategories=n,this.mimeTypeExtensions=o,this.accountStatements=[],this.loading=!1,this.tableConfig=[],this.sortEvent=new t.vpe,this.downloadFailureEvent=new t.vpe}onSort(n){this.sortEvent.emit(n)}onDownloadFailure(n){this.downloadFailureEvent.emit(n)}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(k),t.Y36(ie))},e.\u0275cmp=t.Xpm({type:e,selectors:[["bb-account-statement-base-table"]],inputs:{accountStatements:"accountStatements",sortingParams:"sortingParams",loading:"loading",tableConfig:"tableConfig"},outputs:{sortEvent:"sortEvent",downloadFailureEvent:"downloadFailureEvent"},features:[t._Bn([Pt.gq,xt])],decls:2,vars:2,consts:function(){let i,n,o,_,a,s,C,U,y,O,H;return i="Account statements table",n="Preview",o="Download",_=" Preview for account " + "\ufffd0\ufffd" + " and book date " + "\ufffd1\ufffd" + " ",a=" Download " + "\ufffd0\ufffd" + " for account " + "\ufffd1\ufffd" + " and book date " + "\ufffd2\ufffd" + " ",s=" Show download actions for account " + "\ufffd0\ufffd" + " and book date " + "\ufffd1\ufffd" + " ",C=" Book date ",U=" Category ",y=" Description ",O=" Account name ",H=" Account number ",[["class","table","aria-label",i,"bbTableFocus","",3,"bbTable","sort",4,"ngIf"],["loaderSize","lg","data-role","account-statements-table__loading",4,"ngIf"],["aria-label",i,"bbTableFocus","",1,"table",3,"bbTable","sort"],[1,"d-sm-table-row","d-none"],[4,"ngFor","ngForOf"],["scope","col",1,"bb-text-align-center"],["data-role","preview-thead",1,"th-content"],n,["data-role","download-thead",1,"th-content"],o,[4,"ngIf"],["scope","col",3,"bbSortable","direction"],[1,"th-content"],["data-role","account-statements-table__row",1,"d-sm-table-row","d-none"],[3,"ngSwitch",4,"ngFor","ngForOf"],[1,"bb-text-align-center"],["class","sr-only",3,"id",4,"ngIf"],["data-role","account-statement-table__preview",3,"documents","describedByElementId",4,"ngIf"],[3,"describedByElementId","documents","mimeTypeExtensions","downloadFailure"],[1,"d-sm-none","bb-list__item"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["data-role","date-td"],["data-role","category-td"],["data-role","description-td"],["data-role","account-name-td",1,"text-break"],[1,"bb-text-support"],[1,"sr-only",3,"id"],_,["data-role","account-statement-table__preview",3,"documents","describedByElementId"],[4,"ngIf","ngIfElse"],["multipleDownloadDocumentsDescription",""],a,s,["class","bb-block bb-block--md",4,"ngIf"],[1,"bb-block","bb-block--md"],[1,"bb-stack","bb-stack--align-top"],["class","bb-stack__item bb-stack__item--push-right",3,"documents","describedByElementId",4,"ngIf"],["tooltipPlacement","top-right",1,"bb-stack__item",3,"describedByElementId","documents","mimeTypeExtensions","downloadFailure"],[1,"bb-stack__item"],[1,"bb-block","bb-block--xs","bb-text-semi-bold"],C,[1,"bb-stack__item","bb-stack__item--push-right",3,"documents","describedByElementId"],U,y,O,H,[1,"text-break"],["loaderSize","lg","data-role","account-statements-table__loading"]]},template:function(n,o){1&n&&(t.YNc(0,ho,11,3,"table",0),t.YNc(1,Uo,1,0,"bb-loading-indicator-ui",1)),2&n&&(t.Q6J("ngIf",o.tableConfig),t.xp6(1),t.Q6J("ngIf",o.loading))},directives:[Ee,ue,it.Q,E.O5,ht.au,ht.xi,E.sg,ht.B9,E.RF,E.n9,E.ED],pipes:[Po,re.y],encapsulation:2,changeDetection:0}),e})();const Lo=[_t.hJ,at.Q,ht.U$,it.p,re.G,Rt.CK,vt.z];let xo=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[E.ez,...Lo]]}),e})();const wt=new t.OlP("columnConfig");var Tt=c(5633),Ut=c(4544),h=(c(4554),c(9646)),Se=c(5460),Ht=c(4942),Kt=c(2843),wo=c(590),de=c(1365),Ot=c(262),Ho=c(520),r=c(538),Z=c(7218),Ko=c(655);const ko={businessFunction:"Product Summary",resourceName:"Product Summary",privilege:"view"},kt=e=>null!==e.body;let It=(()=>{class e{constructor(n,o,_,a){this.productSummaryHttpService=n,this.accountStatementsHttpService=o,this.http=_,this.locale=a}getAccounts(n){return this.productSummaryHttpService.getArrangementsByBusinessFunction(Object.assign(Object.assign(Object.assign({},ko),{favoriteFirst:!0}),n),D.RESPONSE).pipe((0,ot.w)(o=>kt(o)?(0,h.of)(o):(0,Kt._)(Bt)))}getAccountStatementsForMultipleAccounts(n){return this.accountStatementsHttpService.postAccountStatements(n,D.RESPONSE).pipe((0,ot.w)(o=>kt(o)&&Array.isArray(o.body)?(0,h.of)(o):(0,Kt._)(Bt)))}getAccountStatementsForSingleAccount(n){return this.accountStatementsHttpService.getAccountStatements(n,D.RESPONSE).pipe((0,ot.w)(o=>kt(o)&&Array.isArray(o.body)?(0,h.of)(o):(0,Kt._)(Bt)))}loadCategories(){return this.accountStatementsHttpService.getCategories(D.RESPONSE).pipe((0,l.U)(({body:n})=>{if(null===n)throw new Error("Response does not contain body");return n.categories}))}getAccountStatementDownloadUrl(n){return this.accountStatementsHttpService.downloadAccountStatementsUrl({uid:n})}downloadFile(n){return this.http.get(n,{responseType:"arraybuffer",observe:"response"})}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(Ut.IK),t.LFG(Tt.gJ),t.LFG(Ho.eN),t.LFG(t.soG))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})();const me=(0,r.PH)("[AS Account Statements] Initialize state",(0,r.Ky)()),Jt=(0,r.PH)("[AS Account Statements] Load Account Statements for multiple accounts",(0,r.Ky)()),$t=(0,r.PH)("[AS Account Statements] Load Account Statements",(0,r.Ky)()),Gt=(0,r.PH)("[AS Account Statements] Load Account Statements Success",(0,r.Ky)()),Zt=(0,r.PH)("[AS Account Statements] Load Account Statements Failure",(0,r.Ky)()),ge={data:[],totalCount:0,loading:B.IDLE,error:void 0,accountIds:[],filterParams:{datePeriod:I.AllTime},from:0,size:0,widgetPreferences:{minimalDate:J(),maximumDate:b()}},Jo=(e,i)=>i.accountIds&&i.accountIds!==e.accountIds?B.LOADING:i.filterParams&&i.filterParams!==e.filterParams?B.LOADING_FILTERED:i.append?B.LOADING_MORE:i.sortingParams&&i.sortingParams!==e.sortingParams||null!=i.from&&i.from!==e.from?B.LOADING_TABLE:B.LOADING,$o=(0,r.Lq)(ge,(0,r.on)(me,(e,i)=>Object.assign(Object.assign({},e),{method:i.method,size:i.size,widgetPreferences:Object.assign(Object.assign({},e.widgetPreferences),i.widgetPreferences)})),(0,r.on)($t,Jt,(e,i)=>Object.assign(Object.assign({},e),{loading:Jo(e,i),error:void 0})),(0,r.on)(Gt,(e,i)=>{const{accountStatements:n,accountIds:o,filterParams:_,from:a,sortingParams:s,totalCount:C,append:U}=i,y=U?e.data:[];return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},e),{loading:B.IDLE,data:[...y,...n],totalCount:C}),o&&{accountIds:o}),_&&{filterParams:_}),s&&{sortingParams:s}),a&&{from:a})}),(0,r.on)(Zt,(e,i)=>Object.assign(Object.assign({},e),{error:i.error,loading:B.IDLE}))),Qt=(0,r.PH)("[AS Account Statements] Load Accounts ",(0,r.Ky)()),pe=(0,r.PH)("[AS Account Statements] Load Accounts Success",(0,r.Ky)()),Te=(0,r.PH)("[AS Account Statements] Load Accounts Failure",(0,r.Ky)()),Wt={count:0,items:[],params:{},error:void 0,loading:!1},Zo=(0,r.Lq)(Wt,(0,r.on)(Qt,(e,{params:i})=>Object.assign(Object.assign({},e),{params:i,loading:!0})),(0,r.on)(pe,(e,{accounts:i})=>{const{count:n,items:o,params:_}=i;return Object.assign(Object.assign({},e),{items:Wo(e.items,o,e.params.paginationType,_.from||0),count:n,params:_,error:void 0,loading:!1})}),(0,r.on)(Te,(e,{error:i})=>Object.assign(Object.assign({},e),{items:[],error:i,loading:!1})));function Wo(e,i,n,o){return e&&i&&n===nt.LoadMore&&0!==o?[...e,...i]:i}const fe=(0,r.PH)("[AS Account Statements] Load Categories for Business"),Ce=(0,r.PH)("[AS Account Statements] Load Categories for Business Success",(0,r.Ky)()),De=(0,r.PH)("[AS Account Statements] Load Categories for Business Failure",(0,r.Ky)()),Yo=(0,r.Lq)({data:[],error:void 0},(0,r.on)(Ce,(e,{categories:i})=>Object.assign(Object.assign({},e),{data:i})),(0,r.on)(De,(e,{error:i})=>Object.assign(Object.assign({},e),{data:[],error:i}))),Me="accountStatements",jo={accountStatements:function Go(e,i){return $o(e,i)},categories:function zo(e,i){return Yo(e,i)},accounts:function Qo(e=Wt,i){return Zo(e,i)}},Yt=(0,r.ZF)(Me),X=(0,r.P1)(Yt,e=>e.accountStatements),Vo=(0,r.P1)(X,e=>e.data),Xo=(0,r.P1)(X,e=>e.loading),qo=(0,r.P1)(X,e=>e.error),ti=(0,r.P1)(X,e=>e.totalCount),Re=(0,r.P1)(X,e=>e.accountIds),zt=(0,r.P1)(X,e=>({from:e.from,size:e.size})),jt=(0,r.P1)(X,e=>e.sortingParams),Vt=(0,r.P1)(X,e=>e.filterParams),Xt=(0,r.P1)(X,e=>e.widgetPreferences),ei=(0,r.P1)(X,e=>e.method),qt=(0,r.P1)(Yt,e=>e.accounts),Ne=(0,r.P1)(qt,e=>({items:e.items,count:e.count,params:e.params})),he=(0,r.P1)(qt,e=>e.error),Ue=(0,r.P1)(qt,e=>e.loading),Oe=(0,r.P1)(Yt,e=>e.categories),ni=(0,r.P1)(Oe,e=>e.data);(0,r.P1)(Oe,e=>e.error);let ut=(()=>{class e{constructor(n){this.store=n,this.accountStatements$=this.store.select(Vo),this.accountStatementsLoading$=this.store.select(Xo),this.accountStatementsError$=this.store.select(qo),this.accountStatementsTotalCount$=this.store.select(ti),this.accountStatementsPaginationParams$=this.store.select(zt),this.accountStatementsSortingParams$=this.store.select(jt),this.accountStatementsFilterParams$=this.store.select(Vt),this.accountStatementsWidgetPreferences$=this.store.select(Xt),this.categories$=this.store.select(ni),this.accounts$=this.store.select(Ne),this.accountsLoading$=this.store.select(Ue),this.accountsError$=this.store.select(he)}initializeState(n){this.store.dispatch(me(n))}dispatchLoadAccountStatements(n){this.store.select(ei).pipe((0,wo.P)(o=>!!o)).subscribe(o=>{"get"===o&&this.store.dispatch($t(n)),"post"===o&&this.store.dispatch(Jt(n))})}dispatchLoadCategories(){this.store.dispatch(fe())}dispatchLoadAccounts(n){this.store.dispatch(Qt({params:n}))}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(r.yh))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})(),Ie=(()=>{class e{constructor(n){this.productSummaryDataHttpService=n}getAccounts(n){const o=n.from||0,{paginationType:_}=n,a=(0,Ko._T)(n,["paginationType"]);return this.productSummaryDataHttpService.getArrangementsByBusinessFunction(a,"response").pipe((0,l.U)(s=>this.mapResponseWithCount(s,{from:o,paginationType:_})))}mapResponseWithCount(n,o){if(null===n.body)throw new Error;const _=n.headers?n.headers.get("x-total-count"):void 0;return{count:_?parseInt(_,10):n.body.length||0,items:n.body||[],params:o}}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(Ut.IK))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})(),oi=(()=>{class e{constructor(n,o,_){this.actions$=n,this.dataService=o,this.store=_,this.accountStatementsForMultipleAccounts$=(0,Z.GW)(()=>this.actions$.pipe((0,Z.l4)(Jt),(0,de.M)(this.store.select(Re),this.store.select(Vt),this.store.select(jt),this.store.select(zt),this.store.select(Xt)),(0,ot.w)(([a,s,C,U,y,O])=>{var H;const{dateFrom:R,dateTo:ct,category:Et}=Object.assign(Object.assign({},C),a.filterParams),{minimalDate:At,maximumDate:st}=O||{},q={size:y.size,from:null!==(H=a.from)&&void 0!==H?H:y.from},L=Object.assign(Object.assign({},U),a.sortingParams);return this.dataService.getAccountStatementsForMultipleAccounts({accountStatementsPostRequest:{accountIds:a.accountIds||s,dateFrom:this._hasDate(R,At)?this._getFormattedDate(R,At):void 0,dateTo:this._hasDate(ct,st)?this._getFormattedDate(ct,st):void 0,category:Et,from:null==q?void 0:q.from,size:q.size,direction:(null==L?void 0:L.direction)?this._mapSortingDirection(L.direction):void 0,orderBy:null==L?void 0:L.column}}).pipe((0,l.U)(x=>Gt(Object.assign({accountStatements:x.body,totalCount:_e(x.headers)},a))),(0,Ot.K)(x=>(0,h.of)(Zt({error:x}))))}))),this.accountStatements$=(0,Z.GW)(()=>this.actions$.pipe((0,Z.l4)($t),(0,de.M)(this.store.select(Re),this.store.select(Vt),this.store.select(jt),this.store.select(zt),this.store.select(Xt)),(0,ot.w)(([a,s,C,U,y,O])=>{var H,R;const{dateFrom:ct,dateTo:Et,category:At}=Object.assign(Object.assign({},C),a.filterParams),{minimalDate:st,maximumDate:q}=O||{},L={size:y.size,from:null!==(H=a.from)&&void 0!==H?H:y.from},x=Object.assign(Object.assign({},U),a.sortingParams);return this.dataService.getAccountStatementsForSingleAccount({accountId:(null===(R=a.accountIds)||void 0===R?void 0:R[0])||s[0],dateFrom:this._hasDate(ct,st)?this._getFormattedDate(ct,st):void 0,dateTo:this._hasDate(Et,q)?this._getFormattedDate(Et,q):void 0,category:At,from:null==L?void 0:L.from,size:L.size,direction:(null==x?void 0:x.direction)?this._mapSortingDirection(x.direction):void 0,orderBy:null==x?void 0:x.column}).pipe((0,l.U)(lt=>Gt(Object.assign({accountStatements:lt.body,totalCount:_e(lt.headers)},a))),(0,Ot.K)(lt=>(0,h.of)(Zt({error:lt}))))}))),this._hasDate=(a,s)=>!(!a&&!s),this._getFormattedDate=(a,s)=>{const C=a||s;return C&&(0,E.p6)(new Date(C),"yyyy-MM-dd","en-US")},this._mapSortingDirection=a=>"asc"===a?Tt.LT.DirectionEnum.ASC:Tt.LT.DirectionEnum.DESC}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(Z.eX),t.LFG(It),t.LFG(r.yh))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})(),ii=(()=>{class e{constructor(n,o){this.actions$=n,this.dataService=o,this.loadAccounts$=(0,Z.GW)(()=>this.actions$.pipe((0,Z.l4)(Qt),(0,ot.w)(_=>this.dataService.getAccounts(_.params).pipe((0,l.U)(a=>pe({accounts:a})),(0,Ot.K)(a=>(0,h.of)(Te(a)))))))}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(Z.eX),t.LFG(Ie))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})(),_i=(()=>{class e{constructor(n,o){this.actions$=n,this.dataService=o,this.loadCategories$=(0,Z.GW)(()=>this.actions$.pipe((0,Z.l4)(fe),(0,ot.w)(()=>this.dataService.loadCategories().pipe((0,l.U)(_=>Ce({categories:_})),(0,Ot.K)(_=>(0,h.of)(De({error:_})))))))}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(Z.eX),t.LFG(It))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})(),ai=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[It,Ie],imports:[[r.Aw.forFeature(Me,jo),Z.sQ.forFeature([oi,_i,ii])]]}),e})();var ci=c(6451),si=c(8675),li=c(4782),Be=c(2722),ye=c(7287),Fe=c(7921);function ri(e,i){1&e&&(t.ynx(0),t.TgZ(1,"div",1)(2,"div",2),t._UZ(3,"bb-loading-indicator-ui"),t.qZA()(),t.BQk())}function ui(e,i){if(1&e){const n=t.EpF();t.ynx(0),t.TgZ(1,"bb-account-statement-account-picker",3),t.NdJ("paramsChange",function(_){return t.CHM(n),t.oxw(2).onParamsChange(_)})("selectedAccountIds",function(_){return t.CHM(n),t.oxw(2).onSelectAccount(_)}),t.ALo(2,"async"),t.ALo(3,"async"),t.qZA(),t.BQk()}if(2&e){const n=t.oxw().ngIf,o=t.oxw();t.xp6(1),t.Q6J("accountsObject",n)("size",o.size)("markFirst",o.selectFirst)("loading",!0===t.lcZ(2,11,o.loading$))("routeIds",t.lcZ(3,13,o.routeAccountIds))("currentParams",o.params)("multiple",o.multiple)("favoriteFirst",o.favoriteFirst)("searchable",o.searchable)("extendedDetails",o.extendedDetails)("multiSelectLabelLimit",o.multiSelectLabelLimit)}}function Ei(e,i){if(1&e&&(t.ynx(0),t.YNc(1,ri,4,0,"ng-container",0),t.ALo(2,"async"),t.YNc(3,ui,4,15,"ng-container",0),t.BQk()),2&e){const n=i.ngIf,o=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,2,o.loading$)&&!n.items.length),t.xp6(2),t.Q6J("ngIf",n.items.length)}}function Ai(e,i){1&e&&(t.ynx(0),t.TgZ(1,"div",1),t._UZ(2,"bb-empty-state-ui",4),t.qZA(),t.BQk())}const Si=function(e){return{"d-sm-none":e}};function di(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"bb-load-button-ui",5),t.NdJ("paramChange",function(_){return t.CHM(n),t.oxw(3).loadMore(_)}),t.ALo(1,"async"),t.ALo(2,"async"),t.TgZ(3,"span"),t.SDv(4,6),t.qZA()()}if(2&e){const n=t.oxw(2).ngIf,o=t.oxw();t.Q6J("ngClass",t.VKq(9,Si,o.paginationType!==o.paginationTypes.LoadMore))("isLoading",t.lcZ(1,5,o.accountStatementsLoading$)===o.loadingStates.LOADING_MORE)("size",n.size)("from",n.from)("totalCount",t.lcZ(2,7,o.totalCount$))}}const mi=function(e){return{"d-none d-sm-block":e}};function gi(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"bb-pagination-ui",7),t.NdJ("pageChange",function(_){return t.CHM(n),t.oxw(3).handlePageChange(_)}),t.ALo(1,"async"),t.qZA()}if(2&e){const n=t.oxw(2).ngIf,o=t.oxw();t.Q6J("ngClass",t.VKq(8,mi,o.loadMoreOnMobileView))("page",n.from)("itemsPerPage",n.size)("totalItems",t.lcZ(1,6,o.totalCount$))("boundaryLinks",!0)("directionLinks",!0)}}function pi(e,i){if(1&e&&(t.TgZ(0,"div",2),t.YNc(1,di,5,11,"bb-load-button-ui",3),t.YNc(2,gi,2,10,"bb-pagination-ui",4),t.qZA()),2&e){const n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",n.paginationType===n.paginationTypes.LoadMore||n.loadMoreOnMobileView),t.xp6(1),t.Q6J("ngIf",n.paginationType===n.paginationTypes.Pagination)}}function Ti(e,i){if(1&e&&(t.ynx(0),t.YNc(1,pi,3,2,"div",1),t.ALo(2,"async"),t.BQk()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,n.accountStatementsLoading$)!==n.loadingStates.LOADING_TABLE)}}function fi(e,i){1&e&&(t.ynx(0),t.Hsn(1,1),t.Hsn(2,2),t.BQk())}function Ci(e,i){if(1&e&&(t.ynx(0),t.YNc(1,fi,3,0,"ng-container",1),t.ALo(2,"async"),t.BQk()),2&e){const n=t.oxw(5),o=t.MAs(10);let _;t.xp6(1),t.Q6J("ngIf",null==(_=t.lcZ(2,2,n.accountStatements$))?null:_.length)("ngIfElse",o)}}function Di(e,i){if(1&e&&(t.ynx(0),t.Hsn(1),t.YNc(2,Ci,3,4,"ng-container",1),t.ALo(3,"async"),t.BQk()),2&e){const n=t.oxw(4),o=t.MAs(4);t.xp6(2),t.Q6J("ngIf",t.lcZ(3,2,n.accountStatementsLoading$)!==n.loadingStates.LOADING_FILTERED)("ngIfElse",o)}}function bi(e,i){if(1&e&&(t.ynx(0),t.YNc(1,Di,4,4,"ng-container",1),t.ALo(2,"async"),t.ALo(3,"async"),t.BQk()),2&e){const n=t.oxw(3),o=t.MAs(6);let _;t.xp6(1),t.Q6J("ngIf",(null==(_=t.lcZ(2,2,n.accountStatements$))?null:_.length)||t.lcZ(3,4,n.filtersApplied$))("ngIfElse",o)}}function Mi(e,i){if(1&e&&(t.ynx(0),t.YNc(1,bi,4,6,"ng-container",1),t.ALo(2,"async"),t.BQk()),2&e){const n=t.oxw(2),o=t.MAs(4);t.xp6(1),t.Q6J("ngIf",t.lcZ(2,2,n.accountStatementsLoading$)!==n.loadingStates.LOADING)("ngIfElse",o)}}function Ri(e,i){1&e&&t.GkF(0)}function Ni(e,i){if(1&e&&(t.ynx(0),t.YNc(1,Ri,1,0,"ng-container",11),t.BQk()),2&e){t.oxw(2);const n=t.MAs(12);t.xp6(1),t.Q6J("ngTemplateOutlet",n)}}function hi(e,i){1&e&&t.GkF(0)}function Ui(e,i){if(1&e&&(t.ynx(0),t.YNc(1,hi,1,0,"ng-container",11),t.BQk()),2&e){t.oxw(2);const n=t.MAs(14);t.xp6(1),t.Q6J("ngTemplateOutlet",n)}}function Oi(e,i){if(1&e&&(t.ynx(0)(1,8),t.ALo(2,"async"),t.YNc(3,Mi,3,4,"ng-container",9),t.YNc(4,Ni,2,1,"ng-container",9),t.YNc(5,Ui,2,1,"ng-container",10),t.BQk()()),2&e){const n=t.oxw();let o;t.xp6(1),t.Q6J("ngSwitch",null==(o=t.lcZ(2,3,n.accountIds$))?null:o.length),t.xp6(2),t.Q6J("ngSwitchCase",1),t.xp6(1),t.Q6J("ngSwitchCase",0)}}function Ii(e,i){1&e&&t._UZ(0,"bb-account-statement-loading-state")}function Bi(e,i){1&e&&t._UZ(0,"bb-account-statement-empty-state")}function yi(e,i){1&e&&t._UZ(0,"bb-account-statement-error-state")}function Fi(e,i){1&e&&t._UZ(0,"bb-account-statement-filtered-empty-state")}function vi(e,i){1&e&&t._UZ(0,"bb-account-statement-no-accounts-error-state")}function Pi(e,i){1&e&&t._UZ(0,"bb-account-statement-no-multiple-accounts-error-state")}const Li=[[["","filters",""]],[["","table",""]],[["","pagination",""]]],xi=["[filters]","[table]","[pagination]"];let wi=(()=>{class e{constructor(n,o,_,a){this.activatedRoute=n,this.router=o,this.route=_,this.store=a,this.size=50,this.multiple=!1,this.multiSelectLabelLimit=15,this.productSummaryBusinessFunction="Product Summary,Product Summary Limited View",this.productSummaryResourceName="Product Summary",this.selectFirst=!1,this.favoriteFirst=!1,this.searchable=!1,this.extendedDetails=!1,this.params={from:0,searchTerm:"",size:0,businessFunction:"",resourceName:"",privilege:"view",paginationType:nt.LoadMore,favoriteFirst:!0},this.routeAccountIds=this.getRouteParameter(this.route,"selectedAccount").pipe((0,si.O)(""),(0,l.U)(s=>s?s.split(","):[])),this.accounts=(0,gt.a)([this.store.accounts$,this.routeAccountIds]).pipe((0,li.d)(),(0,l.U)(([s,C])=>((null==s?void 0:s.items.length)&&this.selectFirst&&0===C.length&&this.onSelectAccount(s.items[0].id),s))),this.loading$=this.store.accountsLoading$,this.error$=this.store.accountsError$}ngOnInit(){this.params=Object.assign(Object.assign({},this.params),{size:this.size,businessFunction:this.productSummaryBusinessFunction,resourceName:this.productSummaryResourceName}),this.store.dispatchLoadAccounts(this.params)}onParamsChange(n){this.params=Object.assign(Object.assign({},this.params),n),this.store.dispatchLoadAccounts(this.params)}onSelectAccount(n){this.router.navigate([".",{selectedAccount:n}],{relativeTo:this.activatedRoute.parent})}getRouteParameter(n,o){const _=n.paramMap.pipe((0,l.U)(s=>s.get(o))),a=n.parent?[_,this.getRouteParameter(n.parent,o)]:[_];return(0,gt.a)(a).pipe((0,l.U)(s=>s[0]||s[1]),(0,l.U)(s=>null!=s?s:""))}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(j.gz),t.Y36(j.F0),t.Y36(j.gz),t.Y36(ut))},e.\u0275cmp=t.Xpm({type:e,selectors:[["bb-account-statement-account-picker-container"]],inputs:{size:"size",multiple:"multiple",multiSelectLabelLimit:"multiSelectLabelLimit",productSummaryBusinessFunction:"productSummaryBusinessFunction",productSummaryResourceName:"productSummaryResourceName",selectFirst:"selectFirst",favoriteFirst:"favoriteFirst",searchable:"searchable",extendedDetails:"extendedDetails"},features:[t._Bn([ut])],decls:4,vars:6,consts:function(){let i,n,o;return i="Select an account",n="Try to reload the page or contact the system administrator.",o="Account list is not loading",[[4,"ngIf"],[1,"card"],[1,"bb-block","bb-block--xs"],["placeholder",i,3,"accountsObject","size","markFirst","loading","routeIds","currentParams","multiple","favoriteFirst","searchable","extendedDetails","multiSelectLabelLimit","paramsChange","selectedAccountIds"],["data-role","accounts-error-state","iconSize","xxl","iconModifier","error","subtitle",n,"title",o,1,"bb-state-container"]]},template:function(n,o){1&n&&(t.YNc(0,Ei,4,4,"ng-container",0),t.ALo(1,"async"),t.YNc(2,Ai,3,0,"ng-container",0),t.ALo(3,"async")),2&n&&(t.Q6J("ngIf",t.lcZ(1,2,o.accounts)),t.xp6(2),t.Q6J("ngIf",t.lcZ(3,4,o.error$)))},directives:[it.Q,Oo,V.s,E.O5],pipes:[E.Ov],encapsulation:2}),e})(),ve=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[Io,E.ez,V.P,it.p]]}),e})(),Hi=(()=>{class e{constructor(n,o){this.store=n,this.tableConfig=o,this.showCustomPeriodDropdown=!1,this.accountStatementsFilterParams$=this.store.accountStatementsFilterParams$,this.categories$=this.store.categories$,this.filtersApplied$=this.store.accountStatementsFilterParams$.pipe((0,l.U)(_=>!(!_.dateFrom||!_.dateTo)||!!(_.category&&_.category.length>0))),this.datePreferences$=this.initializeDatePreferences,this.datePeriodsToDisplay$=this.initializeFilterDatePeriods,this.destroy$=new Dt.x}ngOnInit(){this.tableConfig.some(o=>"category"===o.key)&&this.store.dispatchLoadCategories()}applyFormData(n){const{dateFrom:o,dateTo:_,datePeriod:a,category:s}=n;this.store.dispatchLoadAccountStatements({from:0,filterParams:{dateFrom:o,dateTo:_||o,datePeriod:a||void 0,category:s||void 0}})}resetForm(){this.store.dispatchLoadAccountStatements({from:0,filterParams:{dateFrom:void 0,dateTo:void 0,datePeriod:I.AllTime,category:void 0}})}get initializeDatePreferences(){return this.store.accountStatementsWidgetPreferences$.pipe((0,l.U)(n=>({minimalDate:dt(n.minimalDate),maximumDate:dt(n.maximumDate)})))}get initializeFilterDatePeriods(){return this.store.accountStatementsWidgetPreferences$.pipe((0,l.U)(n=>Object.values(I).filter(_=>oe[_]().from>=n.minimalDate)))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(ut),t.Y36(wt))},e.\u0275cmp=t.Xpm({type:e,selectors:[["bb-account-statement-filters-container"]],inputs:{showCustomPeriodDropdown:"showCustomPeriodDropdown"},decls:6,vars:17,consts:[[3,"tableConfig","filterParams","categories","filtersApplied","datePreferences","showCustomPeriodDropdown","datePeriodsToDisplay","submitForm","resetForm"]],template:function(n,o){1&n&&(t.TgZ(0,"bb-account-statement-base-filters",0),t.NdJ("submitForm",function(a){return o.applyFormData(a)})("resetForm",function(){return o.resetForm()}),t.ALo(1,"async"),t.ALo(2,"async"),t.ALo(3,"async"),t.ALo(4,"async"),t.ALo(5,"async"),t.qZA()),2&n&&t.Q6J("tableConfig",o.tableConfig)("filterParams",t.lcZ(1,7,o.accountStatementsFilterParams$))("categories",t.lcZ(2,9,o.categories$))("filtersApplied",t.lcZ(3,11,o.filtersApplied$))("datePreferences",t.lcZ(4,13,o.datePreferences$))("showCustomPeriodDropdown",o.showCustomPeriodDropdown)("datePeriodsToDisplay",t.lcZ(5,15,o.datePeriodsToDisplay$))},directives:[Bo],pipes:[E.Ov],encapsulation:2}),e})(),Pe=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[E.ez,Fo]]}),e})(),Ki=(()=>{class e{constructor(n){this.store=n,this.loadMoreOnMobileView=!1,this.totalCount$=this.store.accountStatementsTotalCount$,this.accountStatementsLoading$=this.store.accountStatementsLoading$,this.paginationParams$=this.store.accountStatementsPaginationParams$,this.loadingStates=B,this.paginationTypes=nt}loadMore(n){this.store.dispatchLoadAccountStatements({from:n.from,append:!0})}handlePageChange(n){this.store.dispatchLoadAccountStatements({from:n})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(ut))},e.\u0275cmp=t.Xpm({type:e,selectors:[["bb-account-statement-pagination-container"]],inputs:{paginationType:"paginationType",loadMoreOnMobileView:"loadMoreOnMobileView"},decls:2,vars:3,consts:function(){let i;return i="Load more",[[4,"ngIf"],["class","bb-text-align-center",4,"ngIf"],[1,"bb-text-align-center"],["color","link","data-role","load-more-button",3,"ngClass","isLoading","size","from","totalCount","paramChange",4,"ngIf"],["data-role","pagination",3,"ngClass","page","itemsPerPage","totalItems","boundaryLinks","directionLinks","pageChange",4,"ngIf"],["color","link","data-role","load-more-button",3,"ngClass","isLoading","size","from","totalCount","paramChange"],i,["data-role","pagination",3,"ngClass","page","itemsPerPage","totalItems","boundaryLinks","directionLinks","pageChange"]]},template:function(n,o){1&n&&(t.YNc(0,Ti,3,3,"ng-container",0),t.ALo(1,"async")),2&n&&t.Q6J("ngIf",t.lcZ(1,1,o.paginationParams$))},directives:[ye.K,Fe.Jb,E.O5,E.mk],pipes:[E.Ov],encapsulation:2,changeDetection:0}),e})(),Le=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[E.ez,ye.C,Fe.u3]]}),e})(),ki=(()=>{class e{constructor(n,o,_,a){this.store=n,this.dataService=o,this.notificationsService=_,this.tableConfig=a,this.accountStatements$=this.store.accountStatements$.pipe((0,l.U)(s=>s.map(C=>this.mapAccountStatement(C)))),this.accountStatementsLoading$=this.store.accountStatementsLoading$,this.sortingParams$=this.store.accountStatementsSortingParams$,this.loadingStates=B}onSort(n){this.store.dispatchLoadAccountStatements({sortingParams:n,from:0})}onDownloadFailure(n){const o="The statement cannot be downloaded now, please try again later";n&&this.notificationsService.showNotification({header:o,message:"",modifier:"error",ttl:this.notificationDismissTime})}mapAccountStatement(n){return Object.assign(Object.assign({},n),{documents:n.documents.map(o=>Object.assign(Object.assign({},o),{url:this.getDocumentLink(o)}))})}getDocumentLink(n){return n.url||this.dataService.getAccountStatementDownloadUrl(n.uid||"")}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(ut),t.Y36(It),t.Y36(Pt.gq),t.Y36(wt))},e.\u0275cmp=t.Xpm({type:e,selectors:[["bb-account-statement-table-container"]],inputs:{notificationDismissTime:"notificationDismissTime"},decls:6,vars:10,consts:[[1,"bb-block"],[1,"px-5","py-2"],[3,"tableConfig","sortingParams","accountStatements","loading","sortEvent","downloadFailureEvent"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"bb-account-statement-base-table",2),t.NdJ("sortEvent",function(a){return o.onSort(a)})("downloadFailureEvent",function(a){return o.onDownloadFailure(a)}),t.ALo(3,"async"),t.ALo(4,"async"),t.ALo(5,"async"),t.qZA()()()),2&n&&(t.xp6(2),t.Q6J("tableConfig",o.tableConfig)("sortingParams",t.lcZ(3,4,o.sortingParams$))("accountStatements",t.lcZ(4,6,o.accountStatements$))("loading",t.lcZ(5,8,o.accountStatementsLoading$)===o.loadingStates.LOADING_TABLE))},directives:[Ae],pipes:[E.Ov],encapsulation:2,changeDetection:0}),e})(),xe=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[E.ez,xo]]}),e})(),we=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["bb-account-statement-empty-state"]],decls:1,vars:0,consts:function(){let i,n;return i="No account statements found",n="You don't have any account statements to be displayed for this account.",[["iconSize","xxl","iconModifier","description","data-role","account-statements-empty-state","title",i,"subtitle",n,1,"bb-state-container"]]},template:function(n,o){1&n&&t._UZ(0,"bb-empty-state-ui",0)},directives:[V.s],encapsulation:2,changeDetection:0}),e})(),He=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["bb-account-statement-error-state"]],decls:1,vars:0,consts:function(){let i,n;return i="Account statements are not loading",n="Try to reload the page or contact the system administrator.",[["iconSize","xxl","iconModifier","error","data-role","account-statements-error-state","title",i,"subtitle",n,1,"bb-state-container"]]},template:function(n,o){1&n&&t._UZ(0,"bb-empty-state-ui",0)},directives:[V.s],encapsulation:2,changeDetection:0}),e})(),Ke=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["bb-account-statement-filtered-empty-state"]],decls:1,vars:0,consts:function(){let i,n;return i="No Results Found",n="We can\u2019t find what you\u2019re looking for. Please try a different criteria.",[["iconSize","xxl","iconModifier","search","data-role","account-statements-filters-empty-state","title",i,"subtitle",n,1,"bb-state-container"]]},template:function(n,o){1&n&&t._UZ(0,"bb-empty-state-ui",0)},directives:[V.s],encapsulation:2,changeDetection:0}),e})(),ke=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["bb-account-statement-loading-state"]],decls:1,vars:0,consts:[["data-role","account-statements-main__loading","loaderSize","lg"]],template:function(n,o){1&n&&t._UZ(0,"bb-loading-indicator-ui",0)},directives:[it.Q],encapsulation:2,changeDetection:0}),e})(),Je=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["bb-account-statement-no-accounts-error-state"]],decls:1,vars:0,consts:function(){let i,n;return i="You did not select an account yet",n="No statements to show. You need to select a bank account first.",[["data-role","account-statements-error-no-accounts","iconSize","xxl","iconModifier","current-accounts","title",i,"subtitle",n,1,"bb-state-container"]]},template:function(n,o){1&n&&t._UZ(0,"bb-empty-state-ui",0)},directives:[V.s],encapsulation:2,changeDetection:0}),e})(),$e=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["bb-account-statement-no-multiple-accounts-error-state"]],decls:1,vars:0,consts:function(){let i,n;return i="You have selected multiple accounts",n="Please select only one account to display the account information.",[["data-role","account-statements-error-multiple-accounts","iconSize","xxl","iconModifier","error-outline","iconClasses","text-muted","title",i,"subtitle",n]]},template:function(n,o){1&n&&t._UZ(0,"bb-empty-state-ui",0)},directives:[V.s],encapsulation:2,changeDetection:0}),e})();const Ji=[it.p,V.P,Pt.PQ];let $i=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[E.ez,...Ji]]}),e})(),Gi=(()=>{class e{constructor(n,o){this.route=n,this.store=o,this.relativeDateLimit=0,this.absoluteDateLimit="",this.accountStatements$=this.store.accountStatements$,this.accountStatementsLoading$=this.store.accountStatementsLoading$,this.accountStatementsError$=this.store.accountStatementsError$,this.loadingStates=B,this.filtersApplied$=this.store.accountStatementsFilterParams$.pipe((0,l.U)(_=>!(!_.dateFrom||!_.dateTo)||!!(_.category&&_.category.length>0))),this.destroy$=new Dt.x,this.accountId$=new mt.X(""),this.accountIds$=(0,ci.T)(((e,i)=>this.route.paramMap.pipe((0,l.U)(n=>n.get("selectedAccount")||void 0)))(),this.accountId$.pipe((0,bt.h)(_=>!!_))).pipe((0,l.U)(_=>((e,i)=>e?e.trim().split(","):[])(_)))}ngOnInit(){var n;const o={column:this.sortingOrder,direction:null===(n=this.sortingDirection)||void 0===n?void 0:n.toLowerCase()};this.initializeMinimalDateFilterLimit.pipe((0,Be.R)(this.destroy$)).subscribe(_=>{const a={minimalDate:_,maximumDate:b()};this.store.initializeState({method:this.loadMethod,size:this.pageSize,widgetPreferences:a})}),this.accountIds$.pipe((0,Be.R)(this.destroy$),(0,bt.h)(({length:_})=>1===_)).subscribe(_=>{this.store.dispatchLoadAccountStatements({accountIds:[tt(_)],sortingParams:o,from:0,filterParams:{datePeriod:I.AllTime}})})}get initializeMinimalDateFilterLimit(){return(0,h.of)(((e="",i=0)=>{let n=J();return(e=>[/([12]\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01]))/,/([12]\d{3}\.(0[1-9]|1[0-2])\.(0[1-9]|[12]\d|3[01]))/,/([12]\d{3}\/(0[1-9]|1[0-2])\/(0[1-9]|[12]\d|3[01]))/].some(n=>n.test(e)))(e)&&((e,i=new Date(0),n=new Date)=>{const o=new Date(e);return!isNaN(o.getTime())&&o>=i&&o<=n})(e)?n=new Date(e):""===e&&((e,i=new Date(0),n=new Date)=>e>0&&e<=((e,i)=>{const n=12*(i.getFullYear()-e.getFullYear())-e.getMonth()+i.getMonth();return n<=0?0:n})(i,n))(i)&&(n=new Date,n.setMonth(n.getMonth()-i)),n})(this.absoluteDateLimit,this.relativeDateLimit))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(j.gz),t.Y36(ut))},e.\u0275cmp=t.Xpm({type:e,selectors:[["bb-account-statement-statements-container"]],inputs:{pageSize:"pageSize",sortingOrder:"sortingOrder",sortingDirection:"sortingDirection",loadMethod:"loadMethod",relativeDateLimit:"relativeDateLimit",absoluteDateLimit:"absoluteDateLimit"},features:[t._Bn([ut])],ngContentSelectors:xi,decls:15,vars:4,consts:[["aria-live","polite","data-role","account-statements-container"],[4,"ngIf","ngIfElse"],["loadingState",""],["accountStatementsEmptyState",""],["accountStatementsErrorState",""],["accountStatementsFilteredEmptyState",""],["accountStatementsNoAccountsError",""],["accountStatementsMultipleAccountsError",""],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[4,"ngTemplateOutlet"]],template:function(n,o){if(1&n&&(t.F$t(Li),t.TgZ(0,"div",0),t.YNc(1,Oi,6,5,"ng-container",1),t.ALo(2,"async"),t.qZA(),t.YNc(3,Ii,1,0,"ng-template",null,2,t.W1O),t.YNc(5,Bi,1,0,"ng-template",null,3,t.W1O),t.YNc(7,yi,1,0,"ng-template",null,4,t.W1O),t.YNc(9,Fi,1,0,"ng-template",null,5,t.W1O),t.YNc(11,vi,1,0,"ng-template",null,6,t.W1O),t.YNc(13,Pi,1,0,"ng-template",null,7,t.W1O)),2&n){const _=t.MAs(8);t.xp6(1),t.Q6J("ngIf",void 0===t.lcZ(2,2,o.accountStatementsError$))("ngIfElse",_)}},directives:[ke,we,He,Ke,Je,$e,E.O5,E.RF,E.n9,E.tP,E.ED],pipes:[E.Ov],encapsulation:2}),e})(),Ge=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[E.ez,it.p,V.P,$i]]}),e})();const Zi=[ve,Ge,Pe,xe,Le];let Qi=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[ai,...Zi],ve,Ge,Pe,xe,Le]}),e})();function Wi(e,i){if(1&e&&(t._UZ(0,"bb-account-statement-manage-statements-link",4),t.ALo(1,"async")),2&e){const n=t.oxw(2);t.Q6J("url",t.lcZ(1,1,n.manageStatementsNavigationUrl$))}}function Yi(e,i){if(1&e&&(t.ynx(0),t.GkF(1),t.YNc(2,Wi,2,3,"bb-account-statement-manage-statements-link",3),t.ALo(3,"async"),t.BQk()),2&e){const n=t.oxw();t.xp6(2),t.Q6J("bbIfEntitlements",t.lcZ(3,1,n.entitlementsRequired$))}}function zi(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"div",1),t._UZ(2,"bb-account-statement-account-picker-container",2),t.qZA(),t.TgZ(3,"div",3)(4,"div",4)(5,"bb-account-statement-statements-container",5),t._UZ(6,"bb-account-statement-filters-container",6)(7,"bb-account-statement-table-container",7)(8,"bb-account-statement-pagination-container",8),t.qZA()()(),t.BQk()),2&e){const n=i.ngIf;t.xp6(2),t.Q6J("size",9999)("selectFirst",!0)("productSummaryBusinessFunction",n.config.productSummaryBusinessFunction)("productSummaryResourceName",n.config.productSummaryResourceName),t.xp6(3),t.Q6J("pageSize",n.config.pageSize)("loadMethod","get")("absoluteDateLimit",n.config.absoluteDateLimit)("relativeDateLimit",n.config.relativeDateLimit)("sortingDirection",n.config.sortingDirection)("sortingOrder",n.config.sortingOrder),t.xp6(2),t.Q6J("notificationDismissTime",n.config.notificationDismissTime),t.xp6(1),t.Q6J("paginationType",n.config.paginationType)}}const ji={productSummaryBusinessFunction:"Product Summary",productSummaryResourceName:"Product Summary",showManageStatementsNavigation:!1,hideManageStatementsNavigationWhenMissingPermissions:!1,manageStatementsNavigationUrl:"/manage-statements",absoluteDateLimit:"",notificationDismissTime:5,paginationType:nt.LoadMore,pageSize:24,relativeDateLimit:0,sortingDirection:"DESC",sortingOrder:"date"},Ze=new t.OlP("AccountStatementRetailJourneyConfiguration injection token");let te=(()=>{class e{constructor(n){this.staticConfig=Object.assign(Object.assign({},ji),n)}get absoluteDateLimit(){return(0,h.of)(this.staticConfig.absoluteDateLimit)}get notificationDismissTime(){return(0,h.of)(this.staticConfig.notificationDismissTime)}get paginationType(){return(0,h.of)(this.staticConfig.paginationType)}get pageSize(){return(0,h.of)(this.staticConfig.pageSize)}get relativeDateLimit(){return(0,h.of)(this.staticConfig.relativeDateLimit)}get sortingDirection(){return(0,h.of)(this.staticConfig.sortingDirection)}get sortingOrder(){return(0,h.of)(this.staticConfig.sortingOrder)}get showManageStatementsNavigation(){return(0,h.of)(this.staticConfig.showManageStatementsNavigation)}get hideManageStatementsNavigationWhenMissingPermissions(){return(0,h.of)(this.staticConfig.hideManageStatementsNavigationWhenMissingPermissions)}get manageStatementsNavigationUrl(){return(0,h.of)(this.staticConfig.manageStatementsNavigationUrl)}get allConfig(){return(0,h.of)(Object.assign({},this.staticConfig))}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(Ze,8))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})(),Vi=(()=>{class e{constructor(){this.url=""}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["bb-account-statement-manage-statements-link"]],inputs:{url:"url"},decls:4,vars:1,consts:function(){let i;return i="Manage statements",[["bbButton","","color","link","data-role","account-statement-heading__manage-statements",1,"bb-heading-widget__button","bb-button--xs-hide-text","w-auto",3,"routerLink"],["name","settings"],[1,"ml-1"],i]},template:function(n,o){1&n&&(t.TgZ(0,"button",0),t._UZ(1,"bb-icon-ui",1),t.TgZ(2,"span",2),t.SDv(3,3),t.qZA()()),2&n&&t.Q6J("routerLink",o.url)},directives:[at.o,_t.Hq,j.rH],encapsulation:2,changeDetection:0}),e})();const Xi={path:"",component:(()=>{class e{constructor(n){this.config=n,this.showManageStatementsNavigation$=this.config.showManageStatementsNavigation,this.manageStatementsNavigationUrl$=this.config.manageStatementsNavigationUrl,this.entitlementsRequired$=this.config.hideManageStatementsNavigationWhenMissingPermissions.pipe((0,l.U)(o=>"AccountStatements.ManageStatements."+(o?"edit":"view")))}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(te))},e.\u0275cmp=t.Xpm({type:e,selectors:[["bb-account-statement-retail-journey"]],features:[t._Bn([te])],decls:5,vars:3,consts:function(){let i;return i="Account Statements",[[1,"bb-heading-widget","px-0","pb-4","flex-row","align-items-center"],["headingType","h1","headingClasses","bb-heading-widget__heading","heading",i],[4,"ngIf"],[3,"url",4,"bbIfEntitlements"],[3,"url"]]},template:function(n,o){1&n&&(t.TgZ(0,"div",0),t._UZ(1,"bb-header-ui",1),t.YNc(2,Yi,4,3,"ng-container",2),t.ALo(3,"async"),t.qZA(),t._UZ(4,"router-outlet")),2&n&&(t.xp6(2),t.Q6J("ngIf",!0===t.lcZ(3,1,o.showManageStatementsNavigation$)))},directives:[Se.G,Vi,E.O5,Ht.BE,j.lC],pipes:[E.Ov],encapsulation:2}),e})(),canActivate:[Ht.GW],data:{entitlements:"AccountStatements.ManageStatements.view"},children:[{path:"",component:(()=>{class e{constructor(n){this.configService=n,this.vm$=(0,gt.a)([this.configService.allConfig]).pipe((0,l.U)(([o])=>({config:o})))}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(te))},e.\u0275cmp=t.Xpm({type:e,selectors:[["bb-account-statement-retail-view"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"bb-block","bb-block--xl"],[3,"size","selectFirst","productSummaryBusinessFunction","productSummaryResourceName"],[1,"card"],[1,"card-body","px-0"],[3,"pageSize","loadMethod","absoluteDateLimit","relativeDateLimit","sortingDirection","sortingOrder"],["filters",""],["table","",3,"notificationDismissTime"],["pagination","",3,"paginationType"]],template:function(n,o){1&n&&(t.YNc(0,zi,9,12,"ng-container",0),t.ALo(1,"async")),2&n&&t.Q6J("ngIf",t.lcZ(1,1,o.vm$))},directives:[wi,Gi,Hi,ki,Ki,E.O5],pipes:[E.Ov],encapsulation:2}),e})()},{path:"**",redirectTo:"",pathMatch:"full"}]};let qi=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[j.Bz,_t.hJ,at.Q]]}),e})();const t_=[{key:"date",name:"Book date",sortable:!0},{key:"category",name:"Category",sortable:!0},{key:"description",name:"Description",sortable:!0}],e_=[Se.O,at.Q,_t.hJ],n_={provide:k,useValue:p},o_={provide:ie,useValue:{"application/pdf":"PDF","text/csv":"CSV","text/plain":"TXT","application/rtf":"RTF","application/msword":"DOC","application/vnd.openxmlformats-officedocument.wordprocessingml.document":"DOC","application/vnd.ms-excel":"XLS","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"XLS","application/xml":"XML","image/png":"PNG","image/jpeg":"JPG","image/gif":"GIF","image/tiff":"TIFF","binary/octet-stream":"File"}},i_={provide:wt,useValue:t_};let __=(()=>{class e{static forRoot(n={routes:Xi}){return{ngModule:e,providers:[(0,j.co)([n.routes]),n_,o_,i_,Ut.IK,Tt.gJ]}}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[E.ez,j.Bz,Ht.Gl,...e_,Qi,qi]]}),e})();var Ye=c(570);let a_=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[{provide:Ze,useValue:{showManageStatementsNavigation:!0,manageStatementsNavigationUrl:"/self-service/manage-statements"}},{provide:Tt.m9,useExisting:Ye.wi},{provide:Ut.xd,useExisting:Ye.MI}],imports:[[__.forRoot()]]}),e})()},4554:()=>{},3032:()=>{},1089:(ft,Q,c)=>{"use strict";c.d(Q,{A:()=>$,J:()=>d});var l=c(5e3),t=c(3075),F=c(9300),W=c(2722),Y=c(9144),tt=c(1135),D=c(7579),k=c(9841),p=c(4619),J=c(9808);function b(S,g){1&S&&l.Hsn(0,0,["*ngIf","!label"])}const K=["*"];let $=(()=>{class S extends Y.rA{constructor(T,f){super(T),this.cd=T,this.controlContainer=f,this.indeterminate=!1,this.skip$=new tt.X(!1),this.unsubscribe$=new D.x}ngAfterContentChecked(){this.controlContainer.control&&this.control!==this.controlContainer.control&&(this.control=this.controlContainer.control,this.checkState(this.control.value),(0,k.a)(this.control.valueChanges,this.skip$).pipe((0,F.h)(([T,f])=>!f),(0,W.R)(this.unsubscribe$)).subscribe({next:([T])=>this.checkState(T)}))}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}onValueChange(){const T=f=>{Object.keys(f.value).forEach(v=>f.controls[v]instanceof t.cw?T(f.controls[v]):f.controls[v].setValue(this.value))};this.control&&(this.skip$.next(!0),T(this.control),this.skip$.next(!1)),super.onValueChange()}isDisabled(){return!!this.control&&Object.keys(this.control.controls).every(T=>this.control&&this.control.controls&&this.control.controls[T]&&this.control.controls[T].disabled||!1)}checkState(T){const f=rt=>{const Ct=w=>"object"==typeof w&&null!==w?rt.call(Object.keys(w).map(u=>w[u]),Ct):!!w;return w=>rt.call(Object.keys(w).map(u=>w[u]),Ct)},v=f(Array.prototype.every)(T),et=f(Array.prototype.some)(T);this.indeterminate=et&&!v,this.writeValue(v)}}return S.\u0275fac=function(T){return new(T||S)(l.Y36(l.sBO),l.Y36(t.gN))},S.\u0275cmp=l.Xpm({type:S,selectors:[["bb-checkbox-group-ui"]],features:[l._Bn([{provide:t.JU,useExisting:(0,l.Gpc)(()=>S),multi:!0}]),l.qOj],ngContentSelectors:K,decls:2,vars:6,consts:[[3,"label","aria-label","indeterminate","ngModel","disabled","indeterminateChange","ngModelChange","change"],[4,"ngIf"]],template:function(T,f){1&T&&(l.F$t(),l.TgZ(0,"bb-input-checkbox-ui",0),l.NdJ("indeterminateChange",function(et){return f.indeterminate=et})("ngModelChange",function(et){return f.value=et})("change",function(){return f.onValueChange()}),l.YNc(1,b,1,0,"ng-content",1),l.qZA()),2&T&&(l.Q6J("label",f.label)("aria-label",!f.label&&f.ariaLabel||null)("indeterminate",f.indeterminate)("ngModel",f.value)("disabled",f.isDisabled()),l.xp6(1),l.Q6J("ngIf",!f.label))},directives:[p.r,t.JJ,t.On,J.O5],encapsulation:2,changeDetection:0}),S})(),d=(()=>{class S{}return S.\u0275fac=function(T){return new(T||S)},S.\u0275mod=l.oAB({type:S}),S.\u0275inj=l.cJS({imports:[[J.ez,p.b,t.u5,Y.$B]]}),S})()},3823:(ft,Q,c)=>{"use strict";c.d(Q,{Z:()=>Y,_:()=>tt});var l=c(5e3),t=c(9808);let Y=(()=>{class D{constructor(p,J){this.renderer=p,this.elementRef=J,this.negativeClass="bb-amount--negative",this.positiveClass="bb-amount--positive",this.amountValue=0,this.highlightValue=!0}set amount(p){this.amountValue="number"==typeof p?p:parseFloat(p)}set bbHighlight(p){this.highlightValue=""===p||p}get isPositive(){return this.amountValue>=0}ngOnChanges(p){p.negativeClass&&this.renderer.removeClass(this.elementRef.nativeElement,p.negativeClass.previousValue),p.positiveClass&&this.renderer.removeClass(this.elementRef.nativeElement,p.positiveClass.previousValue),(p.amount||p.highlight||p.bbHighlight)&&(this.renderer.removeClass(this.elementRef.nativeElement,this.negativeClass),this.renderer.removeClass(this.elementRef.nativeElement,this.positiveClass)),this.highlightValue&&this.renderer.addClass(this.elementRef.nativeElement,this.isPositive?this.positiveClass:this.negativeClass)}}return D.\u0275fac=function(p){return new(p||D)(l.Y36(l.Qsj),l.Y36(l.SBq))},D.\u0275dir=l.lG2({type:D,selectors:[["","bbHighlight",""]],inputs:{amount:"amount",bbHighlight:"bbHighlight",negativeClass:"negativeClass",positiveClass:"positiveClass"},features:[l.TTD]}),D})(),tt=(()=>{class D{}return D.\u0275fac=function(p){return new(p||D)},D.\u0275mod=l.oAB({type:D}),D.\u0275inj=l.cJS({imports:[[t.ez]]}),D})()},7159:(ft,Q,c)=>{"use strict";c.d(Q,{LZ:()=>w});var l=c(5e3),t=c(3075),F=c(1089),W=c(4619),Y=c(9287),tt=c(9808);let w=(()=>{class u{}return u.\u0275fac=function(A){return new(A||u)},u.\u0275mod=l.oAB({type:u}),u.\u0275inj=l.cJS({imports:[[tt.ez,t.UX,W.b,Y.Q,F.J]]}),u})()},7921:(ft,Q,c)=>{"use strict";c.d(Q,{Jb:()=>K,UX:()=>$,u3:()=>$});var l=c(9808),t=c(5e3),F=c(7656),W=c(9287);function Y(d,S){if(1&d&&(t.TgZ(0,"span",8),t._uU(1),t.qZA(),t.TgZ(2,"span",9),t.SDv(3,10),t.qZA()),2&d){const g=S.$implicit;t.xp6(1),t.Oqu(g),t.xp6(2),t.pQV(g),t.QtT(3)}}function tt(d,S){1&d&&t._UZ(0,"bb-icon-ui",11)}function D(d,S){1&d&&t._UZ(0,"bb-icon-ui",12)}function k(d,S){1&d&&t._UZ(0,"bb-icon-ui",13)}function p(d,S){1&d&&t._UZ(0,"bb-icon-ui",14)}function J(d,S){1&d&&(t.TgZ(0,"span",15),t._uU(1,"..."),t.qZA())}function b(d,S){if(1&d){const g=t.EpF();t.TgZ(0,"ngb-pagination",1),t.NdJ("pageChange",function(f){return t.CHM(g),t.oxw().onPageChange(f)}),t.YNc(1,Y,4,2,"ng-template",2),t.YNc(2,tt,1,0,"ng-template",3),t.YNc(3,D,1,0,"ng-template",4),t.YNc(4,k,1,0,"ng-template",5),t.YNc(5,p,1,0,"ng-template",6),t.YNc(6,J,2,0,"ng-template",7),t.qZA()}if(2&d){const g=t.oxw();t.Q6J("boundaryLinks",g.boundaryLinks)("collectionSize",g.totalItems)("directionLinks",g.directionLinks)("maxSize",g.maxNavPages)("pageSize",g.itemsPerPage)("page",g.page+1)("rotate",!0)}}let K=(()=>{class d{constructor(){this.page=1,this.boundaryLinks=!1,this.directionLinks=!1,this.totalItems=0,this.itemsPerPage=10,this.maxNavPages=5,this.pageChange=new t.vpe}onPageChange(g){this.pageChange.emit(g-1)}}return d.\u0275fac=function(g){return new(g||d)},d.\u0275cmp=t.Xpm({type:d,selectors:[["bb-pagination-ui"]],inputs:{page:"page",boundaryLinks:"boundaryLinks",directionLinks:"directionLinks",totalItems:"totalItems",itemsPerPage:"itemsPerPage",maxNavPages:"maxNavPages"},outputs:{pageChange:"pageChange"},features:[t._Bn([F.pM])],decls:1,vars:1,consts:function(){let S;return S="page " + "\ufffd0\ufffd" + "",[["class","d-flex justify-content-center bb-pagination",3,"boundaryLinks","collectionSize","directionLinks","maxSize","pageSize","page","rotate","pageChange",4,"ngIf"],[1,"d-flex","justify-content-center","bb-pagination",3,"boundaryLinks","collectionSize","directionLinks","maxSize","pageSize","page","rotate","pageChange"],["ngbPaginationNumber",""],["ngbPaginationFirst",""],["ngbPaginationPrevious",""],["ngbPaginationNext",""],["ngbPaginationLast",""],["ngbPaginationEllipsis",""],["aria-hidden","true"],[1,"sr-only"],S,["data-role","pagination-icon-first","size","md","name","first-page"],["data-role","pagination-icon-previous","size","md","name","chevron-left"],["data-role","pagination-icon-next","size","md","name","chevron-right"],["data-role","pagination-icon-last","size","md","name","last-page"],["data-role","pagination-ellipsis",1,"bb-pagination__ellipsis"]]},template:function(g,T){1&g&&t.YNc(0,b,7,7,"ngb-pagination",0),2&g&&t.Q6J("ngIf",+T.itemsPerPage<+T.totalItems)},directives:[F.N9,W.o,l.O5,F.LD,F.eC,F.ju,F.GZ,F.pV,F.tg],encapsulation:2}),d})(),$=(()=>{class d{}return d.\u0275fac=function(g){return new(g||d)},d.\u0275mod=t.oAB({type:d}),d.\u0275inj=t.cJS({imports:[[l.ez,F.jF,W.Q]]}),d})()}}]);