(self.webpackChunkretail_usa=self.webpackChunkretail_usa||[]).push([[6556],{2674:()=>{},6556:(D_,ve,r)=>{"use strict";r.d(ve,{$c:()=>Ee,Gu:()=>p,Hx:()=>X,IE:()=>C_,J6:()=>b,JR:()=>ne,KH:()=>Se,Kn:()=>Me,N$:()=>le,Nm:()=>J,Ok:()=>se,Ol:()=>b_,Op:()=>L_,Oq:()=>oe,QS:()=>Re,UB:()=>O_,X$:()=>ce,X8:()=>de,ag:()=>I,hi:()=>R_,nL:()=>Ae,qx:()=>I_,sV:()=>ae,tc:()=>re,xy:()=>ee,y7:()=>m_,yA:()=>u,zh:()=>d});var e=r(5e3),R=r(9808),h=r(5357),N=r(3075),y=r(8505),D=r(1135),g=r(4004),P=r(262),f=r(9646),Ye=r(9841),w=r(3900),x=r(590),U=r(7579),Te=r(2722),m=(r(2674),r(6305)),_e=r(655),W=r(5556),Z=r(4951),H=r(5622),L=r(7605),C=r(5460),G=r(7555),q=r(9633),k=r(3759),z=r(8639),$=r(6966),S=r(429),te=r(1892),he=r(7656);const Je=["successHeader"],Ke=["errorHeader"];function Fe(t,l){1&t&&(e.TgZ(0,"div"),e._UZ(1,"bb-loading-indicator-ui",5),e.qZA())}function we(t,l){if(1&t){const _=e.EpF();e.TgZ(0,"div")(1,"div",6),e._UZ(2,"bb-empty-state-ui",7),e.TgZ(3,"div",8)(4,"button",9),e.NdJ("click",function(){return e.CHM(_),e.oxw().enrolUser()}),e.SDv(5,10),e.qZA()()()()}}function xe(t,l){1&t&&(e.TgZ(0,"span"),e.SDv(1,11),e.qZA())}function We(t,l){1&t&&(e.TgZ(0,"span"),e.SDv(1,12),e.qZA())}function Ze(t,l){if(1&t&&(e.ynx(0),e.TgZ(1,"div",23),e.SDv(2,24),e.qZA(),e.TgZ(3,"div",25),e._uU(4),e.qZA(),e.BQk()),2&t){const _=e.oxw();e.xp6(4),e.hij(" ",null==_.paymentReview||null==_.paymentReview.paymentAccount?null:_.paymentReview.paymentAccount.accountNickName," ")}}function He(t,l){if(1&t&&(e.ynx(0),e.TgZ(1,"div",26),e.SDv(2,27),e.qZA(),e.TgZ(3,"div",28),e._uU(4),e.ALo(5,"paymentCardNumber"),e.qZA(),e.BQk()),2&t){const _=e.oxw();e.xp6(4),e.hij(" ",e.xi3(5,1,null==_.paymentReview?null:_.paymentReview.payeeAccountNumber,_.accountNumberFormatConfig)," ")}}function Ge(t,l){if(1&t&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&t){const _=e.oxw().ngIf;e.xp6(1),e.Oqu(null==_?null:_.address2)}}function qe(t,l){if(1&t&&(e.ynx(0),e.TgZ(1,"div",29),e.SDv(2,30),e.qZA(),e.TgZ(3,"div",31)(4,"div"),e._uU(5),e.qZA(),e.YNc(6,Ge,2,1,"div",3),e.TgZ(7,"div"),e._uU(8),e.qZA()(),e.BQk()),2&t){const _=l.ngIf;e.xp6(5),e.Oqu(null==_?null:_.address1),e.xp6(1),e.Q6J("ngIf",null==_?null:_.address2),e.xp6(2),e.lnq("",null==_?null:_.city,"\xa0",null==_?null:_.state,"\xa0",null==_?null:_.postalCode,"")}}function ke(t,l){if(1&t&&(e.ynx(0),e.TgZ(1,"div",32),e.SDv(2,33),e.qZA(),e.TgZ(3,"div",34),e._uU(4),e.ALo(5,"currency"),e.qZA(),e.TgZ(6,"div",35),e.SDv(7,36),e.qZA(),e.TgZ(8,"div",1),e._UZ(9,"bb-amount-ui",37),e.qZA(),e.BQk()),2&t){const _=e.oxw();e.xp6(4),e.hij(" ",e.Dn7(5,3,null==_.paymentReview||null==_.paymentReview.fee?null:_.paymentReview.fee.amount,null==_.paymentReview||null==_.paymentReview.fee?null:_.paymentReview.fee.currencyCode,"symbol-narrow")," "),e.xp6(5),e.Q6J("amount",_.totalAmount)("currency",null==_.paymentReview||null==_.paymentReview.amount?null:_.paymentReview.amount.currencyCode)}}function ze(t,l){if(1&t&&(e.ynx(0),e.TgZ(1,"div",38),e.SDv(2,39),e.qZA(),e.TgZ(3,"div",40),e._uU(4),e.qZA(),e.BQk()),2&t){const _=e.oxw();e.xp6(4),e.Oqu(null==_.paymentReview?null:_.paymentReview.paymentMemo)}}function $e(t,l){if(1&t&&(e.ynx(0),e.TgZ(1,"div",41),e.SDv(2,42),e.qZA(),e.TgZ(3,"div",43),e.SDv(4,44),e.qZA(),e.TgZ(5,"div",45),e._uU(6),e.ALo(7,"date"),e.qZA(),e.BQk()),2&t){const _=e.oxw();e.xp6(6),e.hij(" ",e.xi3(7,1,null==_.paymentReview?null:_.paymentReview.paymentDate,"fullDate")," ")}}function je(t,l){if(1&t&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&t){const _=e.oxw().ngIf;e.xp6(1),e.Oqu(null==_?null:_.address2)}}function Qe(t,l){if(1&t&&(e.ynx(0),e.TgZ(1,"div",46),e.SDv(2,47),e.qZA(),e.TgZ(3,"div",48)(4,"div"),e._uU(5),e.qZA(),e.YNc(6,je,2,1,"div",3),e.TgZ(7,"div"),e._uU(8),e.qZA()(),e.BQk()),2&t){const _=l.ngIf;e.xp6(5),e.Oqu(null==_?null:_.address1),e.xp6(1),e.Q6J("ngIf",null==_?null:_.address2),e.xp6(2),e.lnq("",null==_?null:_.city,"\xa0",null==_?null:_.state,"\xa0",null==_?null:_.postalCode,"")}}function Ve(t,l){if(1&t&&(e.ynx(0),e._uU(1),e.BQk()),2&t){const _=e.oxw(2);e.xp6(1),e.Oqu(_.frequencyLabel)}}function Xe(t,l){if(1&t&&(e.TgZ(0,"span"),e.SDv(1,59),e.qZA()),2&t){const _=e.oxw(2);e.xp6(1),e.pQV(null==_.paymentReview?null:_.paymentReview.frequency),e.QtT(1)}}function e_(t,l){if(1&t&&(e.TgZ(0,"span"),e.SDv(1,60),e.ALo(2,"date"),e.qZA()),2&t){const _=e.oxw(2);e.xp6(2),e.pQV(null==_.paymentReview?null:_.paymentReview.numberOfInstances)(null==_.paymentReview?null:_.paymentReview.numberOfInstances)(e.xi3(2,3,_.getEndDate(null==_.paymentReview?null:_.paymentReview.paymentDate,null==_.paymentReview?null:_.paymentReview.numberOfInstances,null==_.paymentReview?null:_.paymentReview.frequency),"longDate")),e.QtT(1)}}function __(t,l){1&t&&(e.TgZ(0,"span"),e.SDv(1,61),e.qZA())}function t_(t,l){1&t&&(e.TgZ(0,"div",62),e.SDv(1,63),e.qZA())}function n_(t,l){1&t&&(e.TgZ(0,"li",64),e.SDv(1,65),e.qZA())}function a_(t,l){1&t&&(e.TgZ(0,"li",66),e.SDv(1,67),e.qZA())}function l_(t,l){1&t&&(e.TgZ(0,"li",68),e.SDv(1,69),e.qZA())}function o_(t,l){if(1&t&&(e.TgZ(0,"div",41),e.YNc(1,Ve,2,1,"ng-container",21),e.YNc(2,Xe,2,1,"ng-template",null,49,e.W1O),e.qZA(),e.TgZ(4,"div",43),e.SDv(5,50),e.qZA(),e.TgZ(6,"div",45),e._uU(7),e.ALo(8,"date"),e.qZA(),e.TgZ(9,"div",51),e.SDv(10,52),e.qZA(),e.TgZ(11,"div",53),e.YNc(12,e_,3,6,"span",21),e.YNc(13,__,2,0,"ng-template",null,54,e.W1O),e.qZA(),e.YNc(15,t_,2,0,"div",55),e.TgZ(16,"div")(17,"ul"),e.YNc(18,n_,2,0,"li",56),e.YNc(19,a_,2,0,"li",57),e.YNc(20,l_,2,0,"li",58),e.qZA()()),2&t){const _=e.MAs(3),n=e.MAs(14),a=e.oxw();e.xp6(1),e.Q6J("ngIf",a.frequencyLabel)("ngIfElse",_),e.xp6(6),e.hij(" ",e.xi3(8,9,null==a.paymentReview?null:a.paymentReview.paymentDate,"fullDate")," "),e.xp6(5),e.Q6J("ngIf",null==a.paymentReview?null:a.paymentReview.numberOfInstances)("ngIfElse",n),e.xp6(3),e.Q6J("ngIf",(null==a.paymentReview?null:a.paymentReview.paymentScheduledAlert)||(null==a.paymentReview?null:a.paymentReview.paymentSentAlert)||(null==a.paymentReview?null:a.paymentReview.modelExpirationAlert)),e.xp6(3),e.Q6J("ngIf",null==a.paymentReview?null:a.paymentReview.paymentScheduledAlert),e.xp6(1),e.Q6J("ngIf",null==a.paymentReview?null:a.paymentReview.paymentSentAlert),e.xp6(1),e.Q6J("ngIf",null==a.paymentReview?null:a.paymentReview.modelExpirationAlert)}}const j=function(t,l){return[t,l]};function i_(t,l){1&t&&e._UZ(0,"bb-header-ui",4)}function r_(t,l){1&t&&(e.TgZ(0,"span",5),e.SDv(1,6),e.qZA())}function E_(t,l){if(1&t){const _=e.EpF();e.TgZ(0,"button",7),e.NdJ("click",function(){return e.CHM(_),e.oxw().cancelModal()}),e.SDv(1,8),e.qZA(),e.TgZ(2,"button",9),e.NdJ("click",function(){return e.CHM(_),e.oxw().confirmModal()}),e.SDv(3,10),e.qZA()}}function s_(t,l){1&t&&e._UZ(0,"bb-header-ui",4)}function S_(t,l){1&t&&(e.TgZ(0,"span",5),e.SDv(1,6),e.qZA())}function A_(t,l){if(1&t){const _=e.EpF();e.TgZ(0,"button",7),e.NdJ("click",function(){return e.CHM(_),e.oxw().cancelModal()}),e.SDv(1,8),e.qZA(),e.TgZ(2,"button",9),e.NdJ("click",function(){return e.CHM(_),e.oxw().confirmModal()}),e.SDv(3,10),e.qZA()}}function d_(t,l){1&t&&e._UZ(0,"bb-header-ui",5)}function c_(t,l){if(1&t&&(e.TgZ(0,"span",6),e.SDv(1,7),e.qZA()),2&t){const _=e.oxw().ngIf;e.xp6(1),e.pQV((null==_?null:_.nickName)||(null==_?null:_.name)),e.QtT(1)}}function M_(t,l){if(1&t){const _=e.EpF();e.TgZ(0,"button",8),e.NdJ("click",function(){return e.CHM(_),e.oxw(2).cancelModal()}),e.SDv(1,9),e.qZA(),e.TgZ(2,"button",10),e.NdJ("click",function(){return e.CHM(_),e.oxw(2).confirmModal()}),e.SDv(3,11),e.qZA()}}function u_(t,l){if(1&t){const _=e.EpF();e.ynx(0),e.TgZ(1,"bb-modal-ui",1),e.NdJ("cancel",function(){return e.CHM(_),e.oxw().cancelModal()}),e.TgZ(2,"bb-modal-header-ui"),e.YNc(3,d_,1,0,"ng-template",2),e.qZA(),e.TgZ(4,"bb-modal-body-ui"),e.YNc(5,c_,2,1,"ng-template",3),e.qZA(),e.TgZ(6,"bb-modal-footer-ui"),e.YNc(7,M_,4,0,"ng-template",4),e.qZA()(),e.BQk()}2&t&&(e.xp6(1),e.Q6J("isOpen",!0))}const ne={length:0,maskRange:[0,0],segments:0},ae={length:9,maskRange:[0,5],segments:0},le="oneOff",oe="recurring",Q="enrolment";var b=(()=>{return(t=b||(b={})).Never="never",t.On="on",t.After="after",b;var t})(),u=(()=>{return(t=u||(u={})).Once="ONCE",t.Weekly="WEEKLY",t.Biweekly="EVERY_2_WEEKS",t.Monthly="MONTHLY",t.EveryTwoWeeks="EVERY_2_WEEKS",t.SemiMonthly="TWICE_A_MONTH",t.EveryFourWeeks="EVERY_4_WEEKS",t.EveryTwoMonths="EVERY_2_MONTHS",t.Quarterly="EVERY_3_MONTHS",t.EverySixMonths="EVERY_6_MONTHS",t.Annually="ANNUALLY",u;var t})(),I=(()=>{return(t=I||(I={})).Regular="REGULAR_PAYMENT",t.Overnight="OVERNIGHT_CHECK",t.Expedited="EXPEDITED_PAYMENT",t.Other="OTHER",I;var t})(),p=(()=>{return(t=p||(p={}))[t.Loading=0]="Loading",t[t.Error=1]="Error",t[t.Inactive=2]="Inactive",p;var t})(),J=(()=>{return(t=J||(J={})).ASC="ASC",t.DESC="DESC",J;var t})();class O_{constructor(l,_){this.router=l,this.location=_}canDeactivate(l,_,n,a){const o=this.allowedNextRoutes.some(c=>c.test(a.url)),i=this.allowedPreviousRoutes.some(c=>c.test(n.url));return o&&i&&n.url!==a.url||l.openModal().pipe((0,y.b)(c=>{if(!c){const M=this.router.createUrlTree([],_);this.location.go(M.toString())}}))}}const ie=[{name:"Weekly",value:u.Weekly},{name:"Every two weeks",value:u.Biweekly},{name:"Monthly",value:u.Monthly}],m_=[{name:"Once",value:u.Once},...ie],R_={emitEvent:!1},p_=["AL","AK","AZ","AR","CA","CO","CT","DE","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY"];let V=(()=>{class t{constructor(_,n,a){this.dataService=_,this.route=n,this.router=a,this.previousRoute=new D.X(void 0),this.getRoutePath=(o,i)=>(o.snapshot&&o.snapshot.routeConfig&&o.snapshot.routeConfig.path&&(i+="/"+o.snapshot.routeConfig.path),o.firstChild?this.getRoutePath(o.firstChild,i):i)}enrolUser(){return this.dataService.postBillPayEnrolment("response").pipe((0,g.U)(_=>204===_.status),(0,P.K)(_=>(0,f.of)(204===_.status)))}isEnrolled(){return this.dataService.getBillPayEnrolment().pipe((0,g.U)(_=>_.enrolment.enrolled),(0,P.K)(()=>(0,f.of)(!1)))}getCurrentRoute(){return this.getRoutePath(this.route,"")}redirectUser(_){_&&!_.includes(Q)?this.router.navigateByUrl(_):this.router.navigate(["./"])}}return t.\u0275fac=function(_){return new(_||t)(e.LFG(m.YL),e.LFG(h.gz),e.LFG(h.F0))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),re=(()=>{class t{constructor(_,n){this.router=_,this.enrolmentService=n}canActivate(_,n){return this.enrolmentService.isEnrolled().pipe((0,g.U)(a=>{const o=this.enrolmentService.getCurrentRoute();if(!a&&!(null==o?void 0:o.endsWith(Q))){this.enrolmentService.previousRoute.next(n.url);const i=_.pathFromRoot.map(E=>{var A;return null===(A=null==E?void 0:E.routeConfig)||void 0===A?void 0:A.path}).filter(E=>!!E);return this.router.navigate([...i,Q]),!1}return!0}))}}return t.\u0275fac=function(_){return new(_||t)(e.LFG(h.F0),e.LFG(V))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Ee=(()=>{class t{constructor(_){this.locale=_,this.decimalSeparator=(0,R.dv)(this.locale,R.wE.CurrencyDecimal)}paymentRecurringToFormState(_,n){const a=_.recurring&&ie.find(i=>i.value===_.frequency),o=_.numberOfInstances?b.After:b.Never;return Object.assign(Object.assign({},this.parsePaymentCommonResponse(_,n)),{schedule:Object.assign({repeat:_.numberOfInstances,endType:o,startDate:_.paymentDate,alertPendingCheckbox:_.paymentScheduledAlert||!1,alertSentCheckbox:_.paymentSentAlert||!1,alertLastPendingCheckbox:_.modelExpirationAlert||!1},a&&{frequency:a.value})})}paymentOneOffToFormState(_,n){return Object.assign(Object.assign({},this.parsePaymentCommonResponse(_,n)),{schedule:{startDate:_.paymentDate,alertPendingCheckbox:!1,alertSentCheckbox:!1,alertLastPendingCheckbox:!1,frequency:u.Once}})}paymentFormStateToReview({accountFrom:_,payeeTo:n,amount:a,memo:o,schedule:i,overnightDeliveryAddress:E}){return Object.assign(Object.assign(Object.assign(Object.assign({amount:{amount:a.amount.replace(this.decimalSeparator,"."),currencyCode:a.currency},paymentDate:i.paymentServiceDate||i.startDate,paymentAccount:_,recurring:i.frequency!==u.Once},o&&{paymentMemo:o}),E&&{overnightDeliveryAddress:E}),this.parsePaymentFormPayee(n)),this.parsePaymentFormSchedule(i))}paymentAndPayeeResponsesToReview(_,n){return Object.assign(Object.assign({},this.paymentResponseToReview(_)),n.address&&{address:n.address})}paymentResponseToReview(_){return(0,_e._T)(_,["id","status","ebillID"])}parsePaymentFormPayee(_){return Object.assign(Object.assign({payeeID:_.id,payeeName:_.name},_.accountNumber&&{payeeAccountNumber:_.accountNumber}),_.nickName&&{payeeNickName:_.nickName})}parsePaymentFormSchedule(_){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.getScheduleFee(_)&&{fee:this.getScheduleFee(_)}),_.repeat&&{numberOfInstances:_.repeat}),_.frequency!==u.Once&&{frequency:_.frequency}),_.alertPendingCheckbox&&{paymentScheduledAlert:_.alertPendingCheckbox}),_.alertSentCheckbox&&{paymentSentAlert:_.alertSentCheckbox}),_.alertLastPendingCheckbox&&{modelExpirationAlert:_.alertLastPendingCheckbox})}getScheduleFee(_){return _.paymentService&&(_.paymentService.index===I.Expedited||_.paymentService.index===I.Overnight)&&_.paymentService.service&&_.paymentService.service.fee||void 0}parsePaymentCommonResponse(_,n){const a=n.find(i=>i.id===_.payeeID),o=_.amount&&{currency:_.amount.currencyCode,amount:_.amount.amount.replace(this.decimalSeparator,".")};return Object.assign(Object.assign(Object.assign(Object.assign({paymentId:_.id},_.amount&&{amount:o}),a&&{payeeTo:a}),_.paymentAccount&&{accountFrom:_.paymentAccount}),_.paymentMemo&&{memo:_.paymentMemo})}}return t.\u0275fac=function(_){return new(_||t)(e.LFG(e.soG))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),t})(),X=(()=>{class t{get today(){return this.getLocalISODate(new Date)}estimatedEndDate(_,n,a=0){const o=new Date(_);switch(n){case u.Monthly:return o.setMonth(o.getMonth()+a);case u.Biweekly:return new Date(o.setDate(o.getDate()-1)).setHours(0,0,0)+864e5*a*14;case u.Weekly:return new Date(o.setDate(o.getDate()-1)).setHours(0,0,0)+864e5*a*7;default:return o.getTime()}}estimatedOccurences(_,n,a){const o=new Date(_),i=new Date(n);switch(a){case u.Monthly:return this.toMonthDifference(o,i);case u.Biweekly:return Math.ceil(this.toDaysDifference(o,i)/14);case u.Weekly:return Math.ceil(this.toDaysDifference(o,i)/7);default:return 1}}estimatedPaymentServiceDate(_,n){const a=_&&_.find(o=>!(!o||o.paymentServiceType!==n));return a?new Date(a.cutoffTime).getTime()<new Date(a.earliestPaymentDate).getTime()?this.getLocalISODate(a.earliestPaymentDate):this.getLocalISODate(a.nextPaymentDate):this.today}toMonthDifference(_,n){const a=n.getMonth(),o=_.getMonth(),i=n.getDate(),E=_.getDate(),A=new Date(n.getFullYear(),a+1,0).getDate(),c=new Date(_.getFullYear(),o+1,0).getDate();let M=12*(n.getFullYear()-_.getFullYear())-o+a-1;return M=M<=0?0:M,M+(E<=i&&o!==a||E===c&&i===A&&o!==a?2:1)}toDaysDifference(_,n){const a=n.getTime()-_.getTime(),o=Math.ceil(Math.abs(a)/864e5);return a<0?0:o?o+1:1}getLocalISODate(_){if("string"==typeof _&&/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/g.test(_))return _;const a=new Date(_),o=6e4*a.getTimezoneOffset();return new Date(a.getTime()+o).toISOString()}}return t.\u0275fac=function(_){return new(_||t)},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),t})(),d=(()=>{class t{static checkForProperty(_,n){let a=[];return a="string"==typeof _?_.split("."):_,a.reduce((o,i)=>o&&o[i]?o[i]:void 0,n)}static generateId(){return Math.floor(Math.random()*Date.now()).toString()}}return t.\u0275fac=function(_){return new(_||t)},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),t})(),se=(()=>{class t{constructor(_,n,a,o){this.paymentData=_,this.accountsData=n,this.payeesSummaryData=a,this.locale=o,this.currentPayeesLoadingState=p.Inactive,this.currentAccountsLoadingState=p.Inactive,this.reload=new D.X(void 0),this.decimalSeparator=(0,R.dv)(this.locale,R.wE.CurrencyDecimal)}get payeesLoadingState(){return this.currentPayeesLoadingState}get accountsLoadingState(){return this.currentAccountsLoadingState}getOneOffPayment(_){return this.paymentData.getPaymentById({id:_}).pipe((0,g.U)(n=>n.payment))}getRecurringPayment(_){return this.paymentData.getRecurringPaymentById({id:_}).pipe((0,g.U)(n=>n.payment))}getPayeesAndAccounts(){return(0,Ye.a)([this.getPayees(),this.getAccounts()]).pipe((0,g.U)(([_,n])=>Object.assign(Object.assign({},_),n)))}createPayment(_){return _.schedule.frequency===u.Once?this.paymentData.postBillPayPayments({billPayPaymentsPostRequestBody:{payments:[this.toPaymentRequest(_)]}}):this.paymentData.postBillPayRecurringPayments({billPayRecurringPaymentsPostRequestBody:{payment:this.toRecurringPaymentRequest(_)}})}updatePaymentRecurring(_,n){return this.paymentData.putRecurringPaymentById({id:n,recurringPaymentByIdPutRequestBody:{payment:this.toRecurringPaymentRequest(_)}})}updatePaymentOneOff(_,n){return this.paymentData.putPaymentById({id:n,paymentByIdPutRequestBody:{payment:this.toPaymentRequest(_)}})}getPayees(){return this.reload.asObservable().pipe((0,y.b)(()=>this.currentPayeesLoadingState=p.Loading),(0,w.w)(()=>this.payeesSummaryData.getBillPayPayeesSummary()),(0,y.b)(()=>this.currentPayeesLoadingState=p.Inactive),(0,P.K)(()=>(this.currentPayeesLoadingState=p.Error,(0,f.of)(void 0))))}getAccounts(){return this.reload.asObservable().pipe((0,y.b)(()=>this.currentAccountsLoadingState=p.Loading),(0,w.w)(()=>this.accountsData.getBillPayAccounts()),(0,y.b)(()=>this.currentAccountsLoadingState=p.Inactive),(0,P.K)(()=>(this.currentAccountsLoadingState=p.Error,(0,f.of)(void 0))))}toShortISODate(_){return(0,R.p6)(_,"yyyy-MM-dd",this.locale)}toPaymentRequest({payeeTo:{id:_},accountFrom:{accountNumber:n,routingNumber:a,accountType:o,id:i},amount:E,memo:A,schedule:c,overnightDeliveryAddress:M}){return Object.assign(Object.assign(Object.assign(Object.assign({payeeID:_,paymentAccount:Object.assign(Object.assign({},i&&{id:i}),{accountNumber:n,routingNumber:a,accountType:o})},c.paymentService&&c.paymentService.service&&{paymentServiceType:c.paymentService.service.paymentServiceType}),{amount:{amount:E.amount.replace(this.decimalSeparator,"."),currencyCode:E.currency},paymentDate:this.toShortISODate(c.startDate)}),A&&{paymentMemo:A}),M&&{overnightDeliveryAddress:Object.assign({address1:M.address1,state:M.state,city:M.city,postalCode:M.postalCode},M.address2&&{address2:M.address2})})}toRecurringPaymentRequest({payeeTo:{id:_},accountFrom:{accountNumber:n,routingNumber:a,accountType:o,id:i},amount:E,schedule:A,memo:c}){return Object.assign(Object.assign(Object.assign(Object.assign({payeeID:_,paymentAccount:Object.assign(Object.assign({},i&&{id:i}),{accountNumber:n,routingNumber:a,accountType:o}),amount:{amount:E.amount.replace(this.decimalSeparator,"."),currencyCode:E.currency}},c&&{paymentMemo:c}),{paymentDate:this.toShortISODate(A.startDate)}),A.repeat&&{numberOfInstances:A.repeat}),{frequency:A.frequency,paymentScheduledAlert:A.alertPendingCheckbox,paymentSentAlert:A.alertSentCheckbox,modelExpirationAlert:A.alertLastPendingCheckbox})}}return t.\u0275fac=function(_){return new(_||t)(e.LFG(m.D6),e.LFG(m.xu),e.LFG(m.r1),e.LFG(e.soG))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),t})(),Se=(()=>{class t{constructor(_,n,a){this.billpayEnrolmentService=_,this.cd=n,this.notificationService=a,this.enrolmentFailed=!1,this.loading=!1,this.notificationHeaderSuccessTemplate="",this.notificationHeaderErrorTemplate=""}ngOnInit(){this.loading=!0,this.billpayEnrolmentService.isEnrolled().pipe((0,x.P)()).subscribe(_=>{_?(this.loading=!1,this.redirectUser()):this.enrolUser()},()=>{this.onEnrolFail(),this.cd.markForCheck()})}enrolUser(){this.loading=!0,this.enrolmentFailed=!1,this.billpayEnrolmentService.enrolUser().pipe((0,x.P)()).subscribe(_=>{_?this.onEnrolSuccess():this.onEnrolFail(),this.cd.markForCheck()})}onEnrolSuccess(){this.loading=!1,this.notificationService.showNotification({header:this.notificationHeaderSuccessTemplate,message:"",modifier:"success",ttl:this.notificationDismissTime}),this.redirectUser()}onEnrolFail(){this.loading=!1,this.enrolmentFailed=!0,this.notificationService.showNotification({header:this.notificationHeaderErrorTemplate,message:"",modifier:"error",ttl:this.notificationDismissTime})}redirectUser(){this.billpayEnrolmentService.previousRoute.pipe((0,x.P)()).subscribe(_=>{this.billpayEnrolmentService.redirectUser(_||"")})}}return t.\u0275fac=function(_){return new(_||t)(e.Y36(V),e.Y36(e.sBO),e.Y36(W.gq))},t.\u0275cmp=e.Xpm({type:t,selectors:[["bb-billpay-enrolment"]],viewQuery:function(_,n){if(1&_&&(e.Gf(Je,5),e.Gf(Ke,5)),2&_){let a;e.iGM(a=e.CRH())&&(n.notificationHeaderSuccessTemplate=a.first),e.iGM(a=e.CRH())&&(n.notificationHeaderErrorTemplate=a.first)}},inputs:{notificationDismissTime:"notificationDismissTime"},decls:8,vars:2,consts:function(){let l,_,n,a,o,i;return l="Enrolling in the bill pay service...",_="Try enrolling again or contact support",n="Enrolment failed",a=" Try enrolling again ",o="Enrolment successful",i="Enrolment failed",[[1,"card","card-lg"],[1,"card-body"],[4,"ngIf"],["successHeader",""],["errorHeader",""],["text",l,"loaderSize","lg"],[1,"bb-state-container"],["data-role","error-state","iconSize","xxl","iconColor","danger","iconModifier","error-outline","subtitle",_,"title",n],[1,"bb-state-container__footer"],["bbButton","","data-role","button-enrolment-retry",3,"click"],a,o,i]},template:function(_,n){1&_&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,Fe,2,0,"div",2),e.YNc(3,we,6,0,"div",2),e.qZA()(),e.YNc(4,xe,2,0,"ng-template",null,3,e.W1O),e.YNc(6,We,2,0,"ng-template",null,4,e.W1O)),2&_&&(e.xp6(2),e.Q6J("ngIf",n.loading),e.xp6(1),e.Q6J("ngIf",n.enrolmentFailed))},directives:[Z.Q,H.s,R.O5,L.Hq],encapsulation:2,changeDetection:0}),t})(),Ae=(()=>{class t{constructor(_){this.scheduleService=_,this.accountNumberMask=!0}get totalAmount(){return(Number(this.paymentReview&&this.paymentReview.fee&&this.paymentReview.fee.amount)||0)+(Number(this.paymentReview&&this.paymentReview.amount&&this.paymentReview.amount.amount)||0)}get accountNumberFormatConfig(){return this.accountNumberMask?ae:ne}getEndDate(_,n,a){return this.scheduleService.estimatedEndDate(_,a,n)}}return t.\u0275fac=function(_){return new(_||t)(e.Y36(X))},t.\u0275cmp=e.Xpm({type:t,selectors:[["bb-billpay-payment-review-card"]],inputs:{paymentReview:"paymentReview",accountNumberMask:"accountNumberMask",frequencyLabel:"frequencyLabel"},decls:38,vars:16,consts:function(){let l,_,n,a,o,i,E,A,c,M,B,v,Y,T,O,pe,ye,ge,Be,Ne,Le,K,Ce,F,be,Ie,De,Pe,fe,Ue;return l="From",_=" Account type ",n="{VAR_SELECT, select, CD_ACCOUNT {CD account} CHECKING_ACCOUNT {Checking account} SAVINGS_ACCOUNT {Savings account} LOAN_ACCOUNT {Loan account} OTHER_ACCOUNT {Other account}}",n=e.Zx4(n,{VAR_SELECT:"\ufffd0\ufffd"}),a=" " + n + " ",o=" Account number ",i="To",E=" Payee name ",A="Payment details",c=" Amount ",M=" Frequency ",B=" Account name ",v=" Payee account number ",Y=" Payee address ",T=" Expedited payment fee ",O=" Total amount ",pe=" Memo ",ye=" Once ",ge=" Deliver payment by ",Be=" Overnight check address ",Ne=" Deliver first payment by ",Le=" Ending ",K="{VAR_SELECT, select, ONCE {Once} WEEKLY {Weekly} EVERY_2_WEEKS {Every two weeks} MONTHLY {Monthly} EVERY_4_WEEKS {Every for weeks} TWICE_A_MONTH {Semi monthly} EVERY_2_MONTHS {Every two months} EVERY_3_MONTHS {Every three months} EVERY_6_MONTHS {Every six months} ANNUALLY {Annually}}",K=e.Zx4(K,{VAR_SELECT:"\ufffd0\ufffd"}),Ce=" " + K + " ",F="{VAR_PLURAL, plural, =1 {{INTERPOLATION} payment } other {{INTERPOLATION} payments }}",F=e.Zx4(F,{VAR_PLURAL:"\ufffd0\ufffd",INTERPOLATION:"\ufffd1\ufffd"}),be="After " + F + " (estimated " + "\ufffd2\ufffd" + ")",Ie="Never ",De=" Notify me ",Pe=" When a payment is pending ",fe=" When a payment has been sent ",Ue=" When the last payment is pending ",[[1,"bb-block","bb-block--xl"],[1,"bb-block","bb-block--md"],["data-role","from-title","headingClasses","h3","headingType","h2","heading",l],[4,"ngIf"],["data-role","account-type-label",1,"bb-text-bold"],_,["data-role","account-type",1,"bb-block","bb-block--md"],a,["data-role","account-number-label",1,"bb-text-bold"],o,["data-role","account-number"],["headingType","h2","headingClasses","h3","heading",i,"data-role","to-title"],["data-role","payee-name-label",1,"bb-text-bold"],E,["data-role","payee-name",1,"bb-block","bb-block--md"],["headingType","h3","heading",A,"data-role","payment-details-title"],["data-role","amount-label",1,"bb-text-bold"],c,["data-role","amount",3,"amount","currency"],["data-role","frequency-label",1,"bb-text-bold"],M,[4,"ngIf","ngIfElse"],["recurringFrequency",""],["data-role","account-name-label",1,"bb-text-bold"],B,["data-role","account-name",1,"bb-block","bb-block--md"],["data-role","payee-account-number-label",1,"bb-text-bold"],v,["data-role","payee-account-number",1,"bb-block","bb-block--md"],["data-role","payee-address-label",1,"bb-text-bold"],Y,["data-role","payee-address",1,"bb-block","bb-block--md"],["data-role","fee-label",1,"bb-text-bold"],T,["data-role","fee-amount",1,"bb-block","bb-block--md"],["data-role","total-amount-label",1,"bb-text-bold"],O,["data-role","total-amount",3,"amount","currency"],["data-role","memo-label",1,"bb-text-bold"],pe,["data-role","memo",1,"bb-block","bb-block--md"],["data-role","frequency",1,"bb-block","bb-block--md"],ye,["data-role","deliver-by",1,"bb-text-bold"],ge,["data-role","deliver-date",1,"bb-block","bb-block--md"],["data-role","overnight-address-label",1,"bb-text-bold"],Be,["data-role","overnight-address",1,"bb-block","bb-block--md"],["defaultLabels",""],Ne,["data-role","ending-label",1,"bb-text-bold"],Le,["data-role","ending",1,"bb-block","bb-block--md"],["neverEnding",""],["class","bb-text-bold","data-role","notify-label",4,"ngIf"],["data-role","alertPendingCheckbox",4,"ngIf"],["data-role","alertSentCheckbox",4,"ngIf"],["data-role","alertLastPendingCheckbox",4,"ngIf"],Ce,be,Ie,["data-role","notify-label",1,"bb-text-bold"],De,["data-role","alertPendingCheckbox"],Pe,["data-role","alertSentCheckbox"],fe,["data-role","alertLastPendingCheckbox"],Ue]},template:function(_,n){if(1&_&&(e.TgZ(0,"section",0)(1,"div",1),e._UZ(2,"bb-header-ui",2),e.qZA(),e.YNc(3,Ze,5,1,"ng-container",3),e.TgZ(4,"div",4),e.SDv(5,5),e.qZA(),e.TgZ(6,"div",6),e.SDv(7,7),e.qZA(),e.TgZ(8,"div",8),e.SDv(9,9),e.qZA(),e.TgZ(10,"div",10),e._uU(11),e.ALo(12,"paymentCardNumber"),e.qZA()(),e.TgZ(13,"section",0)(14,"div",1),e._UZ(15,"bb-header-ui",11),e.qZA(),e.TgZ(16,"div",12),e.SDv(17,13),e.qZA(),e.TgZ(18,"div",14)(19,"span"),e._uU(20),e.qZA()(),e.YNc(21,He,6,4,"ng-container",3),e.YNc(22,qe,9,5,"ng-container",3),e.qZA(),e.TgZ(23,"section")(24,"div",1),e._UZ(25,"bb-header-ui",15),e.qZA(),e.TgZ(26,"div",16),e.SDv(27,17),e.qZA(),e.TgZ(28,"div",1),e._UZ(29,"bb-amount-ui",18),e.qZA(),e.YNc(30,ke,10,7,"ng-container",3),e.YNc(31,ze,5,1,"ng-container",3),e.TgZ(32,"div",19),e.SDv(33,20),e.qZA(),e.YNc(34,$e,8,4,"ng-container",21),e.YNc(35,Qe,9,5,"ng-container",3),e.YNc(36,o_,21,12,"ng-template",null,22,e.W1O),e.qZA()),2&_){const a=e.MAs(37);e.xp6(3),e.Q6J("ngIf",null==n.paymentReview||null==n.paymentReview.paymentAccount?null:n.paymentReview.paymentAccount.accountNickName),e.xp6(4),e.pQV(null==n.paymentReview||null==n.paymentReview.paymentAccount?null:n.paymentReview.paymentAccount.accountType),e.QtT(7),e.xp6(4),e.hij(" ",e.xi3(12,13,null==n.paymentReview||null==n.paymentReview.paymentAccount?null:n.paymentReview.paymentAccount.accountNumber,n.accountNumberFormatConfig)," "),e.xp6(9),e.Oqu((null==n.paymentReview?null:n.paymentReview.payeeNickName)&&(null==n.paymentReview?null:n.paymentReview.payeeNickName)+" ("+(null==n.paymentReview?null:n.paymentReview.payeeName)+")"||(null==n.paymentReview?null:n.paymentReview.payeeName)),e.xp6(1),e.Q6J("ngIf",null==n.paymentReview?null:n.paymentReview.payeeAccountNumber),e.xp6(1),e.Q6J("ngIf",null==n.paymentReview?null:n.paymentReview.address),e.xp6(7),e.Q6J("amount",null==n.paymentReview||null==n.paymentReview.amount?null:n.paymentReview.amount.amount)("currency",null==n.paymentReview||null==n.paymentReview.amount?null:n.paymentReview.amount.currencyCode),e.xp6(1),e.Q6J("ngIf",null==n.paymentReview?null:n.paymentReview.fee),e.xp6(1),e.Q6J("ngIf",null==n.paymentReview?null:n.paymentReview.paymentMemo),e.xp6(3),e.Q6J("ngIf",!(null!=n.paymentReview&&n.paymentReview.recurring))("ngIfElse",a),e.xp6(1),e.Q6J("ngIf",null==n.paymentReview?null:n.paymentReview.overnightDeliveryAddress)}},directives:[C.G,G.G4,R.O5],pipes:[q.V9,R.H9,R.uU],encapsulation:2,changeDetection:0}),t})(),de=(()=>{class t{constructor(_){this.controlContainer=_,this.states=p_,this.address1RequiredId=d.generateId(),this.address1MaxLengthId=d.generateId(),this.address2MaxLengthId=d.generateId(),this.cityRequiredId=d.generateId(),this.cityMaxlengthId=d.generateId(),this.stateLengthId=d.generateId(),this.postalCodeRequiredId=d.generateId(),this.postalCodePatternId=d.generateId(),this.labelId=d.generateId()}ngAfterContentInit(){this.formGroup=this.controlContainer.control}hasError(_,n){const a=this.formGroup&&this.formGroup.get(_);return!!a&&a.hasError(n)&&a.touched}}return t.\u0275fac=function(_){return new(_||t)(e.Y36(N.gN))},t.\u0275cmp=e.Xpm({type:t,selectors:[["bb-billpay-address-form"]],decls:37,vars:34,consts:function(){let l,_,n,a,o,i,E,A,c,M,B,v,Y,T;return l="Address line 1",_=" Please enter a street number and name ",n=" Address may not be over forty characters ",a="Address line 2",o=" (Optional)",i=" Address may not be over forty characters ",E="City",A=" Please enter a City ",c=" City may not be over thirty-two characters ",M="State",B=" Please enter a State ",v="ZIP Code",Y=" Please enter a Zip Code ",T=" ZIP code should be 5 or 9 digits long ",[[3,"formGroup"],[1,"bb-block","bb-block--md"],[1,"bb-form-field","bb-form-field--md"],["formControlName","address1","data-role","address1-input","label",l,3,"aria-describedby"],["role","alert","data-role","address1-error-required",3,"showErrors","messageId"],_,["role","alert","data-role","address1-error-maxlength",3,"showErrors","messageId"],n,["data-role","address2-input-label",1,"bb-label"],a,[1,"bb-text-default","bb-text-support"],o,["formControlName","address2","data-role","address2-input",3,"aria-labelledby","aria-describedby"],["role","alert","data-role","address2-error-maxlength",3,"showErrors","messageId"],i,[1,"bb-form-field","bb-form-field--sm"],["formControlName","city","data-role","city-input","label",E,3,"aria-describedby"],["role","alert","data-role","city-error-required",3,"showErrors","messageId"],A,["role","alert","data-role","city-error-maxlength",3,"showErrors","messageId"],c,[1,"bb-form-field","bb-form-field--xs"],["label",M,"formControlName","state","data-role","state-select",3,"options","aria-describedby"],["role","alert","data-role","state-error-required",3,"showErrors","messageId"],B,["formControlName","postalCode","data-role","postal-code-input","label",v,3,"aria-describedby"],["role","alert","data-role","postal-code-error-required",3,"showErrors","messageId"],Y,["role","alert","data-role","postal-code-error-pattern",3,"showErrors","messageId"],T]},template:function(_,n){1&_&&(e.ynx(0,0),e.TgZ(1,"div",1)(2,"div",2),e._UZ(3,"bb-input-text-ui",3),e.qZA(),e.TgZ(4,"bb-input-validation-message-ui",4),e.SDv(5,5),e.qZA(),e.TgZ(6,"bb-input-validation-message-ui",6),e.SDv(7,7),e.qZA()(),e.TgZ(8,"div",1)(9,"div",2)(10,"label",8)(11,"span"),e.SDv(12,9),e.qZA(),e.TgZ(13,"span",10),e.SDv(14,11),e.qZA()(),e._UZ(15,"bb-input-text-ui",12),e.qZA(),e.TgZ(16,"bb-input-validation-message-ui",13),e.SDv(17,14),e.qZA()(),e.TgZ(18,"div",1)(19,"div",15),e._UZ(20,"bb-input-text-ui",16),e.qZA(),e.TgZ(21,"bb-input-validation-message-ui",17),e.SDv(22,18),e.qZA(),e.TgZ(23,"bb-input-validation-message-ui",19),e.SDv(24,20),e.qZA()(),e.TgZ(25,"div",1)(26,"div",21),e._UZ(27,"bb-dropdown-single-select-ui",22),e.qZA(),e.TgZ(28,"bb-input-validation-message-ui",23),e.SDv(29,24),e.qZA()(),e.TgZ(30,"div",1)(31,"div",21),e._UZ(32,"bb-input-text-ui",25),e.qZA(),e.TgZ(33,"bb-input-validation-message-ui",26),e.SDv(34,27),e.qZA(),e.TgZ(35,"bb-input-validation-message-ui",28),e.SDv(36,29),e.qZA()(),e.BQk()),2&_&&(e.Q6J("formGroup",n.formGroup),e.xp6(3),e.Q6J("aria-describedby",e.WLB(25,j,n.address1RequiredId,n.address1MaxLengthId).join(" ")),e.xp6(1),e.Q6J("showErrors",n.hasError("address1","required"))("messageId",n.address1RequiredId),e.xp6(2),e.Q6J("showErrors",n.hasError("address1","maxlength"))("messageId",n.address1MaxLengthId),e.xp6(4),e.uIk("id","bb-address-label"+n.labelId),e.xp6(5),e.Q6J("aria-labelledby","bb-address-label"+n.labelId)("aria-describedby",n.address2MaxLengthId),e.xp6(1),e.Q6J("showErrors",n.hasError("address2","maxlength"))("messageId",n.address2MaxLengthId),e.xp6(4),e.Q6J("aria-describedby",e.WLB(28,j,n.cityRequiredId,n.cityMaxlengthId).join(" ")),e.xp6(1),e.Q6J("showErrors",n.hasError("city","required"))("messageId",n.cityRequiredId),e.xp6(2),e.Q6J("showErrors",n.hasError("city","maxlength"))("messageId",n.cityMaxlengthId),e.xp6(4),e.Q6J("options",n.states)("aria-describedby",n.stateLengthId),e.xp6(1),e.Q6J("showErrors",n.hasError("state","required"))("messageId",n.stateLengthId),e.xp6(4),e.Q6J("aria-describedby",e.WLB(31,j,n.postalCodeRequiredId,n.postalCodePatternId).join(" ")),e.xp6(1),e.Q6J("showErrors",n.hasError("postalCode","required"))("messageId",n.postalCodeRequiredId),e.xp6(2),e.Q6J("showErrors",n.hasError("postalCode","pattern"))("messageId",n.postalCodePatternId))},directives:[k.m,z.d,$.Pp,N.JL,N.sg,N.JJ,N.u],encapsulation:2}),t})(),ce=(()=>{class t{constructor(){this.resolve=new e.vpe}cancelModal(){this.resolve.emit(!1)}confirmModal(){this.resolve.emit(!0)}}return t.\u0275fac=function(_){return new(_||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["bb-billpay-payee-navigate-modal"]],outputs:{resolve:"resolve"},decls:7,vars:1,consts:function(){let l,_,n,a;return l="Payee cannot be deleted",_="This payee has upcoming payments which must be canceled before deleting.",n=" Keep payee ",a=" View scheduled payments ",[["data-role","payee-navigate-modal",3,"isOpen","cancel"],["bbCustomModalHeader",""],["bbCustomModalBody",""],["bbCustomModalFooter",""],["data-role","payee-navigate-modal-header","headingType","h2","heading",l],["data-role","payee-navigate-modal-body"],_,["bbButton","","color","secondary","data-role","payee-navigate-modal-cancel-button",3,"click"],n,["bbButton","","color","primary","data-role","payee-navigate-modal-confirm-button",3,"click"],a]},template:function(_,n){1&_&&(e.TgZ(0,"bb-modal-ui",0),e.NdJ("cancel",function(){return n.cancelModal()}),e.TgZ(1,"bb-modal-header-ui"),e.YNc(2,i_,1,0,"ng-template",1),e.qZA(),e.TgZ(3,"bb-modal-body-ui"),e.YNc(4,r_,2,0,"ng-template",2),e.qZA(),e.TgZ(5,"bb-modal-footer-ui"),e.YNc(6,E_,4,0,"ng-template",3),e.qZA()()),2&_&&e.Q6J("isOpen",!0)},directives:[S.zS,S.Rb,C.G,S.KF,S.YI,S.cA,S.Qd,S.yk,L.Hq],encapsulation:2}),t})(),Me=(()=>{class t{constructor(){this.resolve=new e.vpe}cancelModal(){this.resolve.emit(!1)}confirmModal(){this.resolve.emit(!0)}}return t.\u0275fac=function(_){return new(_||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["bb-billpay-payee-delete-modal"]],outputs:{resolve:"resolve"},decls:7,vars:1,consts:function(){let l,_,n,a;return l="Delete payee?",_="Are you sure you want to delete this payee? This action cannot be undone.",n=" Keep payee ",a=" Delete payee ",[["data-role","payee-delete-modal",3,"isOpen","cancel"],["bbCustomModalHeader",""],["bbCustomModalBody",""],["bbCustomModalFooter",""],["data-role","payee-delete-modal-header","headingType","h2","heading",l],["data-role","payee-delete-modal-body"],_,["bbButton","","color","secondary","data-role","payee-delete-modal-cancel-button",3,"click"],n,["bbButton","","color","danger","data-role","payee-delete-modal-confirm-button",3,"click"],a]},template:function(_,n){1&_&&(e.TgZ(0,"bb-modal-ui",0),e.NdJ("cancel",function(){return n.cancelModal()}),e.TgZ(1,"bb-modal-header-ui"),e.YNc(2,s_,1,0,"ng-template",1),e.qZA(),e.TgZ(3,"bb-modal-body-ui"),e.YNc(4,S_,2,0,"ng-template",2),e.qZA(),e.TgZ(5,"bb-modal-footer-ui"),e.YNc(6,A_,4,0,"ng-template",3),e.qZA()()),2&_&&e.Q6J("isOpen",!0)},directives:[S.zS,S.Rb,C.G,S.KF,S.YI,S.cA,S.Qd,S.yk,L.Hq],encapsulation:2}),t})();const ue={cancelPendingPayments:!1};let ee=(()=>{class t{constructor(_,n,a,o){this.data=_,this.payverisData=n,this.ebillsData=a,this.payeesSummaryData=o,this.selectedDeletePayeeSource=new D.X(void 0),this.selectedDeleteEbillsSource=new D.X(void 0),this.reload=new D.X(void 0),this.buttonsDisabled=!1,this.currentPayeesLoadingState="",this.iterablePayeeSummaryList=[]}deletePayee(_,n){return n?this.data.deleteElectronicPayeeById(Object.assign(Object.assign({},ue),{id:_})):this.data.deletePayeeById(Object.assign(Object.assign({},ue),{id:_}))}resolveErrors(_){return this.payverisData.postBillPayPayverisResolveEbillErrors({billPayPayverisResolveEbillErrorsPostRequestBody:{payeeID:_}})}deleteEbills(_){return this.ebillsData.deleteBillPayEbills({id:_})}getPayees(){return this.reload.asObservable().pipe((0,y.b)(()=>this.currentPayeesLoadingState="loading"),(0,w.w)(()=>this.payeesSummaryData.getBillPayPayeesSummary().pipe((0,g.U)(y_))),(0,y.b)(_=>function g_(t){Oe(t.ebillsEnabled),Oe(t.ebillsNotEnabled)}(_)),(0,y.b)(_=>this.createIterablePayeeSummaryList(_)),(0,y.b)(()=>{this.currentPayeesLoadingState=""}),(0,P.K)(()=>(this.currentPayeesLoadingState="error",(0,f.of)(void 0))))}createIterablePayeeSummaryList(_){this.iterablePayeeSummaryList=[];for(let n=0;n<_.ebillsEnabled.length;n++)this.iterablePayeeSummaryList.push(_.ebillsEnabled[n]);for(let n=0;n<_.ebillsNotEnabled.length;n++)this.iterablePayeeSummaryList.push(_.ebillsNotEnabled[n])}reloadPayees(){this.reload.next(void 0)}disableWidgetButtons(){this.buttonsDisabled=!0}enableWidgetButtons(){this.buttonsDisabled=!1}updateSelectedDeletePayee(_){this.selectedDeletePayeeSource.next(_)}updateSelectedDeleteEbills(_){this.selectedDeleteEbillsSource.next(_)}get selectedDeletePayee(){return this.selectedDeletePayeeSource.asObservable()}get selectedDeleteEbills(){return this.selectedDeleteEbillsSource.asObservable()}get payeesLoadingState(){return this.currentPayeesLoadingState}get areButtonsDisabled(){return this.buttonsDisabled}get numberOfPayees(){return this.iterablePayeeSummaryList.length}payeesLoaded(){const _=this;return new Promise(function(n){!function a(){if(""===_.currentPayeesLoadingState)return n(!0);setTimeout(a,100)}()})}findPayeeSummaryById(_){return(0,_e.mG)(this,void 0,void 0,function*(){if(yield this.payeesLoaded())return this.iterablePayeeSummaryList.find(n=>n.id===_)})}}return t.\u0275fac=function(_){return new(_||t)(e.LFG(m.cE),e.LFG(m.Du),e.LFG(m.Fe),e.LFG(m.r1))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),t})();function y_(t){return t.payeeSummaries.reduce((_,n)=>(_[n.ebill&&n.ebill.enabled?"ebillsEnabled":"ebillsNotEnabled"].push(n),_),{ebillsEnabled:[],ebillsNotEnabled:[]})}function Oe(t){t.sort((l,_)=>me(l.name,l.nickName).toLowerCase()>me(_.name,_.nickName).toLowerCase()?1:-1)}function me(t,l){return l||t}let Re=(()=>{class t{constructor(_){this.payeeListWidgetService=_,this.resolve=new e.vpe}get selectedDeleteEbills$(){return this.payeeListWidgetService.selectedDeleteEbills}cancelModal(){this.resolve.emit(!1)}confirmModal(){this.resolve.emit(!0)}}return t.\u0275fac=function(_){return new(_||t)(e.Y36(ee))},t.\u0275cmp=e.Xpm({type:t,selectors:[["bb-billpay-ebills-delete-modal"]],outputs:{resolve:"resolve"},decls:2,vars:3,consts:function(){let l,_,n,a;return l="Stop receiving eBills?",_="Are you sure you want to stop receiving eBills for the payee " + "\ufffd0\ufffd" + "?",n=" Keep eBills ",a=" Stop receiving eBills ",[[4,"ngIf"],["data-role","ebills-delete-modal",3,"isOpen","cancel"],["bbCustomModalHeader",""],["bbCustomModalBody",""],["bbCustomModalFooter",""],["data-role","ebills-delete-modal-header","headingType","h2","heading",l],["data-role","ebills-delete-modal-body"],_,["bbButton","","color","secondary","data-role","ebills-delete-modal-cancel-button",3,"click"],n,["bbButton","","color","danger","data-role","ebills-delete-modal-confirm-button",3,"click"],a]},template:function(_,n){1&_&&(e.YNc(0,u_,8,1,"ng-container",0),e.ALo(1,"async")),2&_&&e.Q6J("ngIf",e.lcZ(1,1,n.selectedDeleteEbills$))},directives:[S.zS,S.Rb,C.G,S.KF,S.YI,R.O5,S.cA,S.Qd,S.yk,L.Hq],pipes:[R.Ov],encapsulation:2}),t})();const B_=[L.hJ,Z.p,H.P,W.PQ,C.O,G.i7,q.nj,z.w,$.CS,S.zk,k.j,te.O],N_=[V,re,Ee,X,d,se,m.YL,m.cE,m.Du,m.Fe,m.r1,m.D6,m.xu];let L_=(()=>{class t{}return t.\u0275fac=function(_){return new(_||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({providers:[...N_],imports:[[R.ez,h.Bz,N.UX,...B_],L.hJ,Z.p,H.P,W.PQ,C.O,G.i7,q.nj,z.w,$.CS,S.zk,k.j,te.O]}),t})(),C_=(()=>{class t{constructor(_,n){this.dataService=_,this.dropdownButtonConfig=n,this.RECURRING_PAYMENT=oe,this.ONE_OFF_PAYMENT=le,this.ebillRetrieveErrorId=d.generateId(),this.noEbillsDueId=d.generateId(),this.ebillsAvailableId=d.generateId(),this.recurringPaymentScheduledIdId=d.generateId(),this.ebillPaymentScheduledId=d.generateId(),this.ebillDueOnId=d.generateId(),this.ebillSupportErrorId=d.generateId(),this.ebillUserActionErrorId=d.generateId(),this.ebillUnknownErrorId=d.generateId(),this.payeeAmountId=d.generateId(),this.destroy$=new U.x,n.placement="bottom-right"}ngOnDestroy(){this.destroy$.next(void 0),this.destroy$.complete()}handleStopEbills(_){_.preventDefault(),this.dataService.updateSelectedDeleteEbills(this.payeeSummary)}handleDeletePayee(_){_.preventDefault(),this.dataService.updateSelectedDeletePayee(this.payeeSummary&&!this.payeeSummary.nextPayment&&this.payeeSummary||void 0)}get payeeName(){return this.payeeSummary&&(this.payeeSummary.nickName||this.payeeSummary.name)||""}get payeeId(){return this.payeeSummary&&this.payeeSummary.id||""}get areButtonsDisabled(){return this.dataService.areButtonsDisabled}get areRecurringPaymentsScheduled(){const _=this.payeeSummary;return!(!_||!_.hasRecurringPayments)}get areEbillsInErrorState(){return this.isEbillsStatusInError()}get isEbillsErrorUnknown(){return this.ebillErrorEquals("ERROR")}get isEbillsErrorUpdateCredentials(){return this.ebillErrorEquals("UPDATE_CREDENTIALS")}get isEbillsErrorNotSupported(){return this.ebillErrorEquals("NOT_SUPPORTED")}get isEbillsErrorUserAction(){return this.ebillErrorEquals("USER_ACTION")}handleResolveEbillsErrors(){this.payeeSummary&&this.dataService.resolveErrors(this.payeeSummary.id).pipe((0,Te.R)(this.destroy$)).subscribe(_=>{this.isEbillEnrolmentFlowRequired(_)?this.handleGetEbills():this.dataService.reloadPayees()})}isEbillEnrolmentFlowRequired(_){return _.accounts&&_.accounts.length>0||_.billers&&_.billers.length>0||_.authentication||_.callBackTime}get areEbillsAvailable(){return this.isEbillCapable()&&!this.isEbillEnabled()}get areEbillsDue(){return this.isEbillEnabled()&&this.hasLatestEbill()&&!this.latestEbillPaid()}get isLatestEbillPaid(){return this.latestEbillPaid()}get areEbillsEnabledButNotDue(){return this.isEbillEnabled()&&!this.hasLatestEbill()&&!this.isEbillsStatusInError()}get ebillLink(){return this.getLatestEbillURL()}get showStopEbills(){return this.isEbillEnabled()}get payeeType(){return this.payeeSummary.electronic?"electronic":"manual"}isEbillsStatusInError(){var _,n;return"ACTIVE"!==(null===(n=null===(_=this.payeeSummary)||void 0===_?void 0:_.ebill)||void 0===n?void 0:n.status)}ebillErrorEquals(_){var n;const a=null===(n=this.payeeSummary)||void 0===n?void 0:n.ebill;return!(!a||a.status!==_)}hasLatestEbill(){var _,n;return!!(null===(n=null===(_=this.payeeSummary)||void 0===_?void 0:_.ebill)||void 0===n?void 0:n.latestBill)}latestEbillPaid(){var _,n,a;return"PAID"===(null===(a=null===(n=null===(_=this.payeeSummary)||void 0===_?void 0:_.ebill)||void 0===n?void 0:n.latestBill)||void 0===a?void 0:a.status)}getLatestEbillURL(){var _,n,a;return(null===(a=null===(n=null===(_=this.payeeSummary)||void 0===_?void 0:_.ebill)||void 0===n?void 0:n.latestBill)||void 0===a?void 0:a.url)||""}isEbillCapable(){var _,n;return!!(null===(n=null===(_=this.payeeSummary)||void 0===_?void 0:_.ebill)||void 0===n?void 0:n.capable)}isEbillEnabled(){var _,n;return!!(null===(n=null===(_=this.payeeSummary)||void 0===_?void 0:_.ebill)||void 0===n?void 0:n.enabled)}}return t.\u0275fac=function(_){return new(_||t)(e.Y36(ee),e.Y36(he.jL))},t.\u0275cmp=e.Xpm({type:t,selectors:[["ng-component"]],inputs:{payeeSummary:"payeeSummary"},decls:0,vars:0,template:function(_,n){},encapsulation:2}),t})(),b_=(()=>{class t{constructor(_){this.cdRef=_,this.isDiscardModalOpen=!1,this.modalResolve$=new U.x}openModal(){return this.isDiscardModalOpen=!0,this.cdRef.detach(),this.cdRef.detectChanges(),this.modalResolve$.asObservable().pipe((0,y.b)(()=>this.cdRef.reattach()))}onModalResolve(_){this.isDiscardModalOpen=!1,this.cdRef.detectChanges(),this.modalResolve$.next(_)}}return t.\u0275fac=function(_){return new(_||t)(e.LFG(e.sBO))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),t})(),I_=(()=>{class t{constructor(){this._upcommingPaymentsSubject=new U.x,this.upcommingPaymentsSubject$=this._upcommingPaymentsSubject.asObservable(),this._managePaymentSubject=new U.x,this.managePaymentSubject$=this._managePaymentSubject.asObservable(),this._managePayeesSubject=new U.x,this.managePayeesSubject$=this._managePayeesSubject.asObservable()}navigateToPayments(){this._upcommingPaymentsSubject.next(void 0)}navigateToNewPayment(_){this._managePaymentSubject.next(_)}navigateToPayees(){this._managePayeesSubject.next(void 0)}}return t.\u0275fac=function(_){return new(_||t)},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);